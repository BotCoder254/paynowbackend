/*! For license information please see main.fa65ae74.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case N:return"Suspense";case S:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case p:return"Portal";case w:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return I(e(t))}catch(n){}}return null}var D=Array.isArray,R=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},O=[],F=-1;function V(e){return{current:e}}function U(e){0>F||(e.current=O[F],O[F]=null,F--)}function z(e,t){F++,O[F]=e.current,e.current=t}var B=V(null),W=V(null),H=V(null),q=V(null);function K(e,t){switch(z(H,t),z(W,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sd(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(B),z(B,e)}function G(){U(B),U(W),U(H)}function Y(e){null!==e.memoizedState&&z(q,e);var t=B.current,n=sd(t,e.type);t!==n&&(z(W,e),z(B,n))}function X(e){W.current===e&&(U(B),U(W)),q.current===e&&(U(q),Yd._currentValue=L)}var Q=Object.prototype.hasOwnProperty,$=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/pe|0)|0},me=Math.log,pe=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=ve(r):0!==(a&=o)?i=ve(a):n||0!==(n=o&~e)&&(i=ve(n)):0!==(o=r&~s)?i=ve(o):0!==a?i=ve(a):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Ne(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function je(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ce(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Pe(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Ae=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Ae,De="__reactProps$"+Ae,Re="__reactContainer$"+Ae,Me="__reactEvents$"+Ae,Le="__reactListeners$"+Ae,Oe="__reactHandles$"+Ae,Fe="__reactResources$"+Ae,Ve="__reactMarker$"+Ae;function Ue(e){delete e[Ie],delete e[De],delete e[Me],delete e[Le],delete e[Oe]}function ze(e){var t=e[Ie];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Re]||n[Ie]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xd(e);null!==e;){if(n=e[Ie])return n;e=xd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Ie]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function We(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Ve]=!0}var Ke=new Set,Ge={};function Ye(e,t){Xe(e,t),Xe(e+"Capture",t)}function Xe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Qe,$e,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,Q.call(et,i)||!Q.call(Ze,i)&&(Je.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Qe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",$e=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Qe+e+$e}var st=!1;function at(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function pt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function yt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(D(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&St(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&St(e,s,t[s])}function jt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return Ct.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Dt=null;function Rt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[De]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Mt=!1;function Lt(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==It||null!==Dt)&&(zc(),It&&(t=It,e=Dt,Dt=It=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Ot(e,t){var n=e.stateNode;if(null===n)return null;var r=n[De]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Ft)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Dh){Vt=!1}var zt=null,Bt=null,Wt=null;function Ht(){if(Wt)return Wt;var e,t,n=Bt,r=n.length,i="value"in zt?zt.value:zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Wt=i.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function Yt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Xt,Qt,$t,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Yt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Yt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Xt=e.screenX-$t.screenX,Qt=e.screenY-$t.screenY):Qt=Xt=0,$t=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),rn=Yt(nn),sn=Yt(h({},nn,{dataTransfer:0})),an=Yt(h({},en,{relatedTarget:0})),on=Yt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Yt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Yt(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return fn}var pn=Yt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Yt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),vn=Yt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),xn=Yt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Yt(h({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],kn=Ft&&"CompositionEvent"in window,Nn=null;Ft&&"documentMode"in document&&(Nn=document.documentMode);var Sn=Ft&&"TextEvent"in window&&!Nn,_n=Ft&&(!kn||Nn&&8<Nn&&11>=Nn),jn=String.fromCharCode(32),En=!1;function Cn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!An[e.type]:"textarea"===t}function Dn(e,t,n,r){It?Dt?Dt.push(r):Dt=[r]:It=r,0<(t=Hu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rn=null,Mn=null;function Ln(e){Lu(e,0)}function On(e){if(ht(We(e)))return e}function Fn(e,t){if("change"===e)return t}var Vn=!1;if(Ft){var Un;if(Ft){var zn="oninput"in document;if(!zn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),zn="function"===typeof Bn.oninput}Un=zn}else Un=!1;Vn=Un&&(!document.documentMode||9<document.documentMode)}function Wn(){Rn&&(Rn.detachEvent("onpropertychange",Hn),Mn=Rn=null)}function Hn(e){if("value"===e.propertyName&&On(Mn)){var t=[];Dn(t,Mn,e,At(e)),Lt(Ln,t)}}function qn(e,t,n){"focusin"===e?(Wn(),Mn=n,(Rn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Wn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return On(Mn)}function Gn(e,t){if("click"===e)return On(t)}function Yn(e,t){if("input"===e||"change"===e)return On(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Q.call(t,i)||!Xn(e[i],t[i]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=$n(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$n(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Qn(sr,r)||(sr=r,0<(r=Hu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),mr=hr("animationiteration"),pr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),xr=hr("transitionend"),br=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){br.set(e,t),Ye(t,[e])}wr.push("scrollEnd");var Nr=new WeakMap;function Sr(e,t){if("object"===typeof e&&null!==e){var n=Nr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Nr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var _r=[],jr=0,Er=0;function Cr(){for(var e=jr,t=Er=jr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var i=_r[t];_r[t++]=null;var s=_r[t];if(_r[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Ir(n,i,s)}}function Tr(e,t,n,r){_r[jr++]=e,_r[jr++]=t,_r[jr++]=n,_r[jr++]=r,Er|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Pr(e,t,n,r){return Tr(e,t,n,r),Dr(e)}function Ar(e,t){return Tr(e,null,null,t),Dr(e)}function Ir(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Dr(e){if(50<Ic)throw Ic=0,Dc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Rr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(e,t,n,r){return new Mr(e,t,n,r)}function Or(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Lr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ur(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Or(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Lr(31,n,t,i)).elementType=E,e.lanes=s,e;case g:return zr(n.children,i,s,t);case y:o=8,i|=24;break;case v:return(e=Lr(12,n,t,2|i)).elementType=v,e.lanes=s,e;case N:return(e=Lr(13,n,t,i)).elementType=N,e.lanes=s,e;case S:return(e=Lr(19,n,t,i)).elementType=S,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:case w:o=10;break e;case b:o=9;break e;case k:o=11;break e;case _:o=14;break e;case j:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Lr(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function zr(e,t,n,r){return(e=Lr(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=Lr(6,e,null,t)).lanes=n,e}function Wr(e,t,n){return(t=Lr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],qr=0,Kr=null,Gr=0,Yr=[],Xr=0,Qr=null,$r=1,Jr="";function Zr(e,t){Hr[qr++]=Gr,Hr[qr++]=Kr,Kr=e,Gr=t}function ei(e,t,n){Yr[Xr++]=$r,Yr[Xr++]=Jr,Yr[Xr++]=Qr,Qr=e;var r=$r;e=Jr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,$r=1<<32-fe(t)+i|n<<i|r,Jr=s+e}else $r=1<<s|n<<i|r,Jr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Kr;)Kr=Hr[--qr],Hr[qr]=null,Gr=Hr[--qr],Hr[qr]=null;for(;e===Qr;)Qr=Yr[--Xr],Yr[Xr]=null,Jr=Yr[--Xr],Yr[Xr]=null,$r=Yr[--Xr],Yr[Xr]=null}var ri=null,ii=null,si=!1,ai=null,oi=!1,li=Error(a(519));function ci(e){throw pi(Sr(Error(a(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ie]=e,t[De]=r,n){case"dialog":Ou("cancel",t),Ou("close",t);break;case"iframe":case"object":case"embed":Ou("load",t);break;case"video":case"audio":for(n=0;n<Ru.length;n++)Ou(Ru[n],t);break;case"source":Ou("error",t);break;case"img":case"image":case"link":Ou("error",t),Ou("load",t);break;case"details":Ou("toggle",t);break;case"input":Ou("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Ou("invalid",t);break;case"textarea":Ou("invalid",t),wt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Qu(t.textContent,n)?(null!=r.popover&&(Ou("beforetoggle",t),Ou("toggle",t)),null!=r.onScroll&&Ou("scroll",t),null!=r.onScrollEnd&&Ou("scrollend",t),null!=r.onClick&&(t.onclick=$u),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(oi=!1);case 27:case 3:return void(oi=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!si)return di(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fd(e.type)?(e=vd,vd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function mi(){var e=ai;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),ai=null),e}function pi(e){null===ai?ai=[e]:ai.push(e)}var gi=V(null),yi=null,vi=null;function xi(e,t,n){z(gi,t._currentValue),t._currentValue=n}function bi(e){e._currentValue=gi.current,U(gi)}function wi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ki(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),wi(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),wi(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ni(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Xn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===q.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}i=i.return}null!==e&&ki(t,e,n,r),t.flags|=262144}function Si(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _i(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ji(e){return Ci(yi,e)}function Ei(e,t){return null===yi&&_i(e),Ci(e,t)}function Ci(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(a(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Ti="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Pi=r.unstable_scheduleCallback,Ai=r.unstable_NormalPriority,Ii={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new Ti,data:new Map,refCount:0}}function Ri(e){e.refCount--,0===e.refCount&&Pi(Ai,function(){e.controller.abort()})}var Mi=null,Li=0,Oi=0,Fi=null;function Vi(){if(0===--Li&&null!==Mi){null!==Fi&&(Fi.status="fulfilled");var e=Mi;Mi=null,Oi=0,Fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ui=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Mi){var n=Mi=[];Li=0,Oi=Tu(),Fi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Li++,t.then(Vi,Vi)}(0,t),null!==Ui&&Ui(e,t)};var zi=V(null);function Bi(){var e=zi.current;return null!==e?e:rc.pooledCache}function Wi(e,t){z(zi,null===t?zi.current:t.pool)}function Hi(){var e=Bi();return null===e?null:{parent:Ii._currentValue,pool:e}}var qi=Error(a(460)),Ki=Error(a(474)),Gi=Error(a(542)),Yi={then:function(){}};function Xi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qi(){}function $i(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Qi,Qi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Qi,Qi);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Ji=t,qi}}var Ji=null;function Zi(){if(null===Ji)throw Error(a(459));var e=Ji;return Ji=null,e}function es(e){if(e===qi||e===Gi)throw Error(a(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Ir(e,null,n),t}return Tr(e,r,t,n),Dr(e)}function as(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function os(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Fi)throw Fi}}function us(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var f=-536870913&o.lane,m=f!==o.lane;if(m?(sc&f)===f:(r&f)===f){0!==f&&f===Oi&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;f=t;var y=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(y,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=g.payload)?p.call(y,d,f):p)||void 0===f)break e;d=h({},d,f);break e;case 2:ts=!0}}null!==(f=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=i.callbacks)?i.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,a|=f;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(m=o).next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),fc|=a,e.lanes=a,e.memoizedState=d}}function ds(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ds(n[e],t)}var fs=V(null),ms=V(0);function ps(e,t){z(ms,e=dc),z(fs,t),dc=e|t.baseLanes}function gs(){z(ms,dc),z(fs,fs.current)}function ys(){dc=ms.current,U(fs),U(ms)}var vs=0,xs=null,bs=null,ws=null,ks=!1,Ns=!1,Ss=!1,_s=0,js=0,Es=null,Cs=0;function Ts(){throw Error(a(321))}function Ps(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function As(e,t,n,r,i,s){return vs=s,xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?qa:Ka,Ss=!1,s=n(r,i),Ss=!1,Ns&&(s=Ds(t,n,r,i)),Is(e),s}function Is(e){R.H=Ha;var t=null!==bs&&null!==bs.next;if(vs=0,ws=bs=xs=null,ks=!1,js=0,Es=null,t)throw Error(a(300));null===e||Eo||null!==(e=e.dependencies)&&Si(e)&&(Eo=!0)}function Ds(e,t,n,r){xs=e;var i=0;do{if(Ns&&(Es=null),js=0,Ns=!1,25<=i)throw Error(a(301));if(i+=1,ws=bs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}R.H=Ga,s=t(n,r)}while(Ns);return s}function Rs(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?Us(t):t,e=e.useState()[0],(null!==bs?bs.memoizedState:null)!==e&&(xs.flags|=1024),t}function Ms(){var e=0!==_s;return _s=0,e}function Ls(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Os(e){if(ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ks=!1}vs=0,ws=bs=xs=null,Ns=!1,js=_s=0,Es=null}function Fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ws?xs.memoizedState=ws=e:ws=ws.next=e,ws}function Vs(){if(null===bs){var e=xs.alternate;e=null!==e?e.memoizedState:null}else e=bs.next;var t=null===ws?xs.memoizedState:ws.next;if(null!==t)ws=t,bs=e;else{if(null===e){if(null===xs.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(bs=e).memoizedState,baseState:bs.baseState,baseQueue:bs.baseQueue,queue:bs.queue,next:null},null===ws?xs.memoizedState=ws=e:ws=ws.next=e}return ws}function Us(e){var t=js;return js+=1,null===Es&&(Es=[]),e=$i(Es,e,t),t=xs,null===(null===ws?t.memoizedState:ws.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?qa:Ka),e}function zs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Us(e);if(e.$$typeof===w)return ji(e)}throw Error(a(438,String(e)))}function Bs(e){var t=null,n=xs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=xs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function Ws(e,t){return"function"===typeof t?t(e):t}function Hs(e){return qs(Vs(),bs,e)}function qs(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(sc&h)===h:(vs&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Oi&&(d=!0);else{if((vs&f)===f){u=u.next,f===Oi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,xs.lanes|=f,fc|=f}h=u.action,Ss&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,xs.lanes|=h,fc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Xn(s,e.memoizedState)&&(Eo=!0,d&&null!==(n=Fi)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ks(e){var t=Vs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Xn(s,t.memoizedState)||(Eo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Gs(e,t,n){var r=xs,i=Vs(),s=si;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Xn((bs||i).memoizedState,n);if(o&&(i.memoizedState=n,Eo=!0),i=i.queue,ga(2048,8,Qs.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==ws&&1&ws.memoizedState.tag){if(r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Xs.bind(null,r,i,n,t),null),null===rc)throw Error(a(349));s||0!==(124&vs)||Ys(r,t,n)}return n}function Ys(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xs(e,t,n,r){t.value=n,t.getSnapshot=r,$s(t)&&Js(e)}function Qs(e,t,n){return n(function(){$s(t)&&Js(e)})}function $s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(r){return!0}}function Js(e){var t=Ar(e,2);null!==t&&Lc(t,e,2)}function Zs(e){var t=Fs();if("function"===typeof e){var n=e;if(e=n(),Ss){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:e},t}function ea(e,t,n,r){return e.baseState=n,qs(e,bs,"function"===typeof r?r:Ws)}function ta(e,t,n,r,i){if(za(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==R.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,na(t,s)):(s.next=n.next,t.pending=n.next=s)}}function na(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=R.T,a={};R.T=a;try{var o=n(i,r),l=R.S;null!==l&&l(a,o),ra(e,t,o)}catch(c){sa(e,t,c)}finally{R.T=s}}else try{ra(e,t,s=n(i,r))}catch(u){sa(e,t,u)}}function ra(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ia(e,t,n)},function(n){return sa(e,t,n)}):ia(e,t,n)}function ia(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function sa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==r)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(si){var n=rc.formState;if(null!==n){e:{var r=xs;if(si){if(ii){t:{for(var i=ii,s=oi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Fs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=r,n=Fa.bind(null,xs,r),r.dispatch=n,r=Zs(!1),s=Ua.bind(null,xs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Fs()).queue=i,n=ta.bind(null,xs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return ua(Vs(),bs,e)}function ua(e,t,n){if(t=qs(e,t,oa)[0],e=Hs(Ws)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Us(t)}catch(a){if(a===qi)throw Gi;throw a}else r=t;var i=(t=Vs()).queue,s=i.dispatch;return n!==t.memoizedState&&(xs.flags|=2048,fa(9,{destroy:void 0,resource:void 0},da.bind(null,i,n),null)),[r,s,e]}function da(e,t){e.action=t}function ha(e){var t=Vs(),n=bs;if(null!==n)return ua(t,n,e);Vs(),t=t.memoizedState;var r=(n=Vs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function fa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=xs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ma(){return Vs().memoizedState}function pa(e,t,n,r){var i=Fs();r=void 0===r?null:r,xs.flags|=e,i.memoizedState=fa(1|t,{destroy:void 0,resource:void 0},n,r)}function ga(e,t,n,r){var i=Vs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==bs&&null!==r&&Ps(r,bs.memoizedState.deps)?i.memoizedState=fa(t,s,n,r):(xs.flags|=e,i.memoizedState=fa(1|t,s,n,r))}function ya(e,t){pa(8390656,8,e,t)}function va(e,t){ga(2048,8,e,t)}function xa(e,t){return ga(4,2,e,t)}function ba(e,t){return ga(4,4,e,t)}function wa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ka(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,wa.bind(null,t,e),n)}function Na(){}function Sa(e,t){var n=Vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ps(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _a(e,t){var n=Vs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ps(t,r[1]))return r[0];if(r=e(),Ss){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function ja(e,t,n){return void 0===n||0!==(1073741824&vs)?e.memoizedState=t:(e.memoizedState=n,e=Mc(),xs.lanes|=e,fc|=e,n)}function Ea(e,t,n,r){return Xn(n,t)?n:null!==fs.current?(e=ja(e,n,r),Xn(e,t)||(Eo=!0),e):0===(42&vs)?(Eo=!0,e.memoizedState=n):(e=Mc(),xs.lanes|=e,fc|=e,t)}function Ca(e,t,n,r,i){var s=M.p;M.p=0!==s&&8>s?s:8;var a=R.T,o={};R.T=o,Ua(e,!1,t,n);try{var l=i(),c=R.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Va(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Rc());else Va(e,t,r,Rc())}catch(u){Va(e,t,{then:function(){},status:"rejected",reason:u},Rc())}finally{M.p=s,R.T=a}}function Ta(){}function Pa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=Aa(e).queue;Ca(e,i,t,L,null===n?Ta:function(){return Ia(e),n(r)})}function Aa(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ia(e){Va(e,Aa(e).next.queue,{},Rc())}function Da(){return ji(Yd)}function Ra(){return Vs().memoizedState}function Ma(){return Vs().memoizedState}function La(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Rc(),r=ss(t,e=is(n),n);return null!==r&&(Lc(r,t,n),as(r,t,n)),t={cache:Di()},void(e.payload=t)}t=t.return}}function Oa(e,t,n){var r=Rc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},za(e)?Ba(t,n):null!==(n=Pr(e,t,n,r))&&(Lc(n,e,r),Wa(n,t,r))}function Fa(e,t,n){Va(e,t,n,Rc())}function Va(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(za(e))Ba(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Xn(o,a))return Tr(e,t,i,0),null===rc&&Cr(),!1}catch(l){}if(null!==(n=Pr(e,t,i,r)))return Lc(n,e,r),Wa(n,t,r),!0}return!1}function Ua(e,t,n,r){if(r={lane:2,revertLane:Tu(),action:r,hasEagerState:!1,eagerState:null,next:null},za(e)){if(t)throw Error(a(479))}else null!==(t=Pr(e,n,r,2))&&Lc(t,e,2)}function za(e){var t=e.alternate;return e===xs||null!==t&&t===xs}function Ba(e,t){Ns=ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wa(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Ha={readContext:ji,use:zs,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useLayoutEffect:Ts,useInsertionEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useSyncExternalStore:Ts,useId:Ts,useHostTransitionStatus:Ts,useFormState:Ts,useActionState:Ts,useOptimistic:Ts,useMemoCache:Ts,useCacheRefresh:Ts},qa={readContext:ji,use:zs,useCallback:function(e,t){return Fs().memoizedState=[e,void 0===t?null:t],e},useContext:ji,useEffect:ya,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,pa(4194308,4,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pa(4194308,4,e,t)},useInsertionEffect:function(e,t){pa(4,2,e,t)},useMemo:function(e,t){var n=Fs();t=void 0===t?null:t;var r=e();if(Ss){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Fs();if(void 0!==n){var i=n(t);if(Ss){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Oa.bind(null,xs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fs().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=Fa.bind(null,xs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Na,useDeferredValue:function(e,t){return ja(Fs(),e,t)},useTransition:function(){var e=Zs(!1);return e=Ca.bind(null,xs,e.queue,!0,!1),Fs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=xs,i=Fs();if(si){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&sc)||Ys(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ya(Qs.bind(null,r,s,e),[e]),r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Xs.bind(null,r,s,n,t),null),n},useId:function(){var e=Fs(),t=rc.identifierPrefix;if(si){var n=Jr;t="\xab"+t+"R"+(n=($r&~(1<<32-fe($r)-1)).toString(32)+n),0<(n=_s++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Cs++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Da,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Fs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ua.bind(null,xs,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bs,useCacheRefresh:function(){return Fs().memoizedState=La.bind(null,xs)}},Ka={readContext:ji,use:zs,useCallback:Sa,useContext:ji,useEffect:va,useImperativeHandle:ka,useInsertionEffect:xa,useLayoutEffect:ba,useMemo:_a,useReducer:Hs,useRef:ma,useState:function(){return Hs(Ws)},useDebugValue:Na,useDeferredValue:function(e,t){return Ea(Vs(),bs.memoizedState,e,t)},useTransition:function(){var e=Hs(Ws)[0],t=Vs().memoizedState;return["boolean"===typeof e?e:Us(e),t]},useSyncExternalStore:Gs,useId:Ra,useHostTransitionStatus:Da,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Vs(),0,e,t)},useMemoCache:Bs,useCacheRefresh:Ma},Ga={readContext:ji,use:zs,useCallback:Sa,useContext:ji,useEffect:va,useImperativeHandle:ka,useInsertionEffect:xa,useLayoutEffect:ba,useMemo:_a,useReducer:Ks,useRef:ma,useState:function(){return Ks(Ws)},useDebugValue:Na,useDeferredValue:function(e,t){var n=Vs();return null===bs?ja(n,e,t):Ea(n,bs.memoizedState,e,t)},useTransition:function(){var e=Ks(Ws)[0],t=Vs().memoizedState;return["boolean"===typeof e?e:Us(e),t]},useSyncExternalStore:Gs,useId:Ra,useHostTransitionStatus:Da,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Vs();return null!==bs?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bs,useCacheRefresh:Ma},Ya=null,Xa=0;function Qa(e){var t=Xa;return Xa+=1,null===Ya&&(Ya=[]),$i(Ya,e,t)}function $a(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ja(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===j&&Za(s)===t.type)?($a(t=i(t,n.props),n),t.return=e,t):($a(t=Ur(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=zr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return $a(n=Ur(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Wr(t,e.mode,n)).return=e,t;case j:return h(e,t=(0,t._init)(t._payload),n)}if(D(t)||P(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Qa(t),n);if(t.$$typeof===w)return h(e,Ei(e,t),n);Ja(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case p:return n.key===i?u(e,t,n,r):null;case j:return f(e,t,n=(i=n._init)(n._payload),r)}if(D(n)||P(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Qa(n),r);if(n.$$typeof===w)return f(e,t,Ei(e,n),r);Ja(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(D(r)||P(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Qa(r),i);if(r.$$typeof===w)return y(e,t,n,Ei(t,r),i);Ja(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var x=u.key;null!==c;){if(c.key===x){if((x=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===x||"object"===typeof x&&null!==x&&x.$$typeof===j&&Za(x)===c.type){n(l,c.sibling),$a(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=zr(u.props.children,l.mode,d,u.key)).return=l,l=d):($a(d=Ur(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(x=u.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Wr(u,l.mode,d)).return=l,l=d}return o(l);case j:return v(l,c,u=(x=u._init)(u._payload),d)}if(D(u))return function(i,a,o,l){for(var c=null,u=null,d=a,m=a=0,p=null;null!==d&&m<o.length;m++){d.index>m?(p=d,d=null):p=d.sibling;var g=f(i,d,o[m],l);if(null===g){null===d&&(d=p);break}e&&d&&null===g.alternate&&t(i,d),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g,d=p}if(m===o.length)return n(i,d),si&&Zr(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(a=s(d,a,m),null===u?c=d:u.sibling=d,u=d);return si&&Zr(i,m),c}for(d=r(d);m<o.length;m++)null!==(p=y(d,i,m,o[m],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?m:p.key),a=s(p,a,m),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(i,e)}),si&&Zr(i,m),c}(l,c,u,d);if(P(u)){if("function"!==typeof(x=P(u)))throw Error(a(150));return function(i,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,m=o,p=o=0,g=null,v=l.next();null!==m&&!v.done;p++,v=l.next()){m.index>p?(g=m,m=null):g=m.sibling;var x=f(i,m,v.value,c);if(null===x){null===m&&(m=g);break}e&&m&&null===x.alternate&&t(i,m),o=s(x,o,p),null===d?u=x:d.sibling=x,d=x,m=g}if(v.done)return n(i,m),si&&Zr(i,p),u;if(null===m){for(;!v.done;p++,v=l.next())null!==(v=h(i,v.value,c))&&(o=s(v,o,p),null===d?u=v:d.sibling=v,d=v);return si&&Zr(i,p),u}for(m=r(m);!v.done;p++,v=l.next())null!==(v=y(m,i,p,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?p:v.key),o=s(v,o,p),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),si&&Zr(i,p),u}(l,c,u=x.call(u),d)}if("function"===typeof u.then)return v(l,c,Qa(u),d);if(u.$$typeof===w)return v(l,c,Ei(l,u),d);Ja(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Br(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Xa=0;var i=v(e,t,n,r);return Ya=null,i}catch(a){if(a===qi||a===Gi)throw a;var s=Lr(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var to=eo(!0),no=eo(!1),ro=V(null),io=null;function so(e){var t=e.alternate;z(co,1&co.current),z(ro,e),null===io&&(null===t||null!==fs.current||null!==t.memoizedState)&&(io=e)}function ao(e){if(22===e.tag){if(z(co,co.current),z(ro,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else oo()}function oo(){z(co,co.current),z(ro,ro.current)}function lo(e){U(ro),io===e&&(io=null),U(co)}var co=V(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rc(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Lc(t,e,r),as(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rc(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Lc(t,e,r),as(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rc(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Lc(t,e,n),as(t,e,n))}};function mo(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(i,s))}function po(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var yo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vo(e){yo(e)}function xo(e){console.error(e)}function bo(e){yo(e)}function wo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ko(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function No(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){wo(e,t)},n}function So(e){return(e=is(e)).tag=3,e}function _o(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){ko(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){ko(t,n,r),"function"!==typeof i&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var jo=Error(a(461)),Eo=!1;function Co(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function To(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return _i(t),r=As(e,t,n,a,s,i),o=Ms(),null===e||Eo?(si&&o&&ti(t),t.flags|=1,Co(e,t,r,i),t.child):(Ls(e,t,i),Xo(e,t,i))}function Po(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Or(s)||void 0!==s.defaultProps||null!==n.compare?((e=Ur(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ao(e,t,s,r,i))}if(s=e.child,!Qo(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(a,r)&&e.ref===t.ref)return Xo(e,t,i)}return t.flags|=1,(e=Fr(s,r)).ref=t.ref,e.return=t,t.child=e}function Ao(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Qn(s,r)&&e.ref===t.ref){if(Eo=!1,t.pendingProps=r=s,!Qo(e,i))return t.lanes=e.lanes,Xo(e,t,i);0!==(131072&e.flags)&&(Eo=!0)}}return Mo(e,t,n,r,i)}function Io(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Do(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Do(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Wi(0,null!==s?s.cachePool:null),null!==s?ps(t,s):gs(),ao(t)}else null!==s?(Wi(0,s.cachePool),ps(t,s),oo(),t.memoizedState=null):(null!==e&&Wi(0,null),gs(),oo());return Co(e,t,i,n),t.child}function Do(e,t,n,r){var i=Bi();return i=null===i?null:{parent:Ii._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Wi(0,null),gs(),ao(t),null!==e&&Ni(e,t,r,!0),null}function Ro(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Mo(e,t,n,r,i){return _i(t),n=As(e,t,n,r,void 0,i),r=Ms(),null===e||Eo?(si&&r&&ti(t),t.flags|=1,Co(e,t,n,i),t.child):(Ls(e,t,i),Xo(e,t,i))}function Lo(e,t,n,r,i,s){return _i(t),t.updateQueue=null,n=Ds(t,r,n,i),Is(e),r=Ms(),null===e||Eo?(si&&r&&ti(t),t.flags|=1,Co(e,t,n,s),t.child):(Ls(e,t,s),Xo(e,t,s))}function Oo(e,t,n,r,i){if(_i(t),null===t.stateNode){var s=Rr,a=n.contextType;"object"===typeof a&&null!==a&&(s=ji(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),a=n.contextType,s.context="object"===typeof a&&null!==a?ji(a):Rr,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&fo.enqueueReplaceState(s,s.state,null),us(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=go(n,o);s.props=l;var c=s.context,u=n.contextType;a=Rr,"object"===typeof u&&null!==u&&(a=ji(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&po(t,s,r,a),ts=!1;var h=t.memoizedState;s.state=h,us(t,r,s,i),cs(),c=t.memoizedState,o||h!==c||ts?("function"===typeof d&&(ho(t,n,d,r),c=t.memoizedState),(l=ts||mo(t,n,l,r,h,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=go(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Rr,"object"===typeof c&&null!==c&&(l=ji(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&po(t,s,r,l),ts=!1,h=t.memoizedState,s.state=h,us(t,r,s,i),cs();var f=t.memoizedState;a!==d||h!==f||ts||null!==e&&null!==e.dependencies&&Si(e.dependencies)?("function"===typeof o&&(ho(t,n,o,r),f=t.memoizedState),(u=ts||mo(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Si(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ro(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,i),t.child=to(t,null,n,i)):Co(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Xo(e,t,i),e}function Fo(e,t,n,r){return fi(),t.flags|=256,Co(e,t,n,r),t.child}var Vo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uo(e){return{baseLanes:e,cachePool:Hi()}}function zo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Bo(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?so(t):oo(),si){var l,c=ii;if(l=c){e:{for(l=c,c=oi;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Qr?{id:$r,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Lr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=i.children,i=i.fallback,s?(oo(),c=Ho({mode:"hidden",children:c},s=t.mode),i=zr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=Uo(n),s.childLanes=zo(e,r,n),t.memoizedState=Vo,i):(so(t),Wo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(so(t),t.flags&=-257,t=qo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),s=i.fallback,c=t.mode,i=Ho({mode:"visible",children:i.children},c),(s=zr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,to(t,e.child,null,n),(i=t.child).memoizedState=Uo(n),i.childLanes=zo(e,r,n),t.memoizedState=Vo,t=s);else if(so(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,pi({value:i,source:null,stack:null}),t=qo(e,t,n)}else if(Eo||Ni(e,t,n,!1),r=0!==(n&e.childLanes),Eo||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ce(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Ar(e,i),Lc(r,e,i),jo;"$?"===c.data||Gc(),t=qo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(c.nextSibling),ri=t,si=!0,ai=null,oi=!1,null!==e&&(Yr[Xr++]=$r,Yr[Xr++]=Jr,Yr[Xr++]=Qr,$r=e.id,Jr=e.overflow,Qr=t),(t=Wo(t,i.children)).flags|=4096);return t}return s?(oo(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Fr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Fr(u,s):(s=zr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=Uo(n):(null!==(l=c.cachePool)?(u=Ii._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=zo(e,r,n),t.memoizedState=Vo,i):(so(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Wo(e,t){return(t=Ho({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ho(e,t){return(e=Lr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qo(e,t,n){return to(t,e.child,null,n),(e=Wo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wi(e.return,t,n)}function Go(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Co(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(co,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Go(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Go(t,!0,n,null,s);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ni(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Si(e))}function $o(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Eo=!0;else{if(!Qo(e,n)&&0===(128&t.flags))return Eo=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),xi(0,Ii,e.memoizedState.cache),fi();break;case 27:case 5:Y(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:xi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(so(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bo(e,t,n):(so(t),null!==(e=Xo(e,t,n))?e.sibling:null);so(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ni(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Yo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,Io(e,t,n);case 24:xi(0,Ii,e.memoizedState.cache)}return Xo(e,t,n)}(e,t,n);Eo=0!==(131072&e.flags)}else Eo=!1,si&&0!==(1048576&t.flags)&&ei(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===k){t.tag=11,t=To(null,t,r,e,n);break e}if(i===_){t.tag=14,t=Po(null,t,r,e,n);break e}}throw t=I(r)||r,Error(a(306,t,""))}Or(r)?(e=go(r,e),t.tag=1,t=Oo(null,t,r,e,n)):(t.tag=0,t=Mo(null,t,r,e,n))}return t;case 0:return Mo(e,t,t.type,t.pendingProps,n);case 1:return Oo(e,t,r=t.type,i=go(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),us(t,r,null,n);var o=t.memoizedState;if(r=o.cache,xi(0,Ii,r),r!==s.cache&&ki(t,[Ii],n,!0),cs(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Fo(e,t,r,n);break e}if(r!==i){pi(i=Sr(Error(a(424)),t)),t=Fo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,si=!0,ai=null,oi=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Xo(e,t,n);break e}Co(e,t,r,n)}t=t.child}return t;case 26:return Ro(e,t),null===e?(n=Cd(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=rd(H.current).createElement(n))[Ie]=t,r[De]=e,ed(r,n,e),qe(r),t.stateNode=r):t.memoizedState=Cd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&si&&(r=t.stateNode=bd(t.type,t.pendingProps,H.current),ri=t,oi=!0,i=ii,fd(t.type)?(vd=i,ii=yd(r.firstChild)):ii=i),Co(e,t,t.pendingProps.children,n),Ro(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,oi))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),oi=!1,i=!0):i=!1),i||ci(t)),Y(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,ad(i,s)?r=null:null!==o&&ad(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=As(e,t,Rs,null,null,n),Yd._currentValue=i),Ro(e,t),Co(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,oi))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return Bo(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):Co(e,t,r,n),t.child;case 11:return To(e,t,t.type,t.pendingProps,n);case 7:return Co(e,t,t.pendingProps,n),t.child;case 8:case 12:return Co(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,xi(0,t.type,r.value),Co(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,_i(t),r=r(i=ji(i)),t.flags|=1,Co(e,t,r,n),t.child;case 14:return Po(e,t,t.type,t.pendingProps,n);case 15:return Ao(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ho(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Io(e,t,n);case 24:return _i(t),r=ji(Ii),null===e?(null===(i=Bi())&&(i=rc,s=Di(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),xi(0,Ii,i)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),xi(0,Ii,r)):(r=s.cache,xi(0,Ii,r),r!==i.cache&&ki(t,[Ii],n,!0))),Co(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Jo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zd(t)){if(null!==(t=ro.current)&&((4194048&sc)===sc?null!==io:(62914560&sc)!==sc&&0===(536870912&sc)||t!==io))throw Ji=Yi,Ki;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bi(Ii),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Jo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,mi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Jo(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Jo(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Jo(t),nl(t),t.flags&=-16777217),null;case 27:X(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=B.current,hi(t)?ui(t):(e=bd(i,r,n),t.stateNode=e,Jo(t))}return nl(t),null;case 5:if(X(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=B.current,hi(t))ui(t);else{switch(i=rd(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Ie]=t,e[De]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Jo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=H.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ie]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Qu(e.nodeValue,n)))||ci(t)}else(e=rd(e).createTextNode(r))[Ie]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Ie]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=mi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&Uu(t.stateNode.containerInfo),nl(t),null;case 10:return bi(t.type),nl(t),null;case 19:if(U(co),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=uo(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return z(co,1&co.current|2),t.child}e=e.sibling}null!==i.tail&&te()>kc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=co.current,z(co,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),ys(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(zi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(Ii),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(Ii),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(co),null;case 4:return G(),null;case 10:return bi(t.type),null;case 22:case 23:return lo(t),ys(),null!==e&&U(zi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(Ii),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:bi(Ii),G();break;case 26:case 27:case 5:X(t);break;case 4:G();break;case 13:lo(t);break;case 19:U(co);break;case 10:bi(t.type);break;case 22:case 23:lo(t),ys(),null!==e&&U(zi);break;case 24:bi(Ii)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){uu(t,t.return,o)}}function ol(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hs(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){uu(e,t,s)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||Ju(e,t,m,null,r,h)}}for(var f in r){var m=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":s=m;break;case"name":i=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:m!==h&&Ju(e,t,f,m,r,h)}}return void gt(e,o,l,c,u,d,s,i);case"select":for(s in m=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(s)||Ju(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&Ju(e,t,i,s,r,c)}return t=l,n=o,r=m,void(null!=f?xt(e,!!n,f,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":f=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&Ju(e,t,o,i,r,s)}return void bt(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else Ju(e,t,p,null,r,f);for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Ju(e,t,c,f,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Ju(e,t,g,null,r,f);for(u in r)if(f=r[u],m=n[u],r.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Ju(e,t,u,f,r,m)}return;default:if(jt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Zu(e,t,y,void 0,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||Zu(e,t,d,f,r,m);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Ju(e,t,v,null,r,f);for(h in r)f=r[h],m=n[h],!r.hasOwnProperty(h)||f===m||null==f&&null==m||Ju(e,t,h,f,r,m)}(r,e.type,n,t),r[De]=t}catch(i){uu(e,e.return,i)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function pl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$u));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Ie]=e,t[De]=n}catch(s){uu(e,e.return,s)}}var xl=!1,bl=!1,wl=!1,kl="function"===typeof WeakSet?WeakSet:Set,Nl=null;function Sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ol(e,n),4&r&&al(5,n);break;case 1:if(Ol(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var i=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Ol(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hs(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Ol(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Ol(e,n);break;case 13:Ol(e,n),4&r&&Pl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||xl)){t=null!==t&&null!==t.memoizedState||bl,i=xl;var s=bl;xl=r,(bl=t)&&!s?Vl(e,n,0!==(8772&n.subtreeFlags)):Ol(e,n),xl=i,bl=s}break;case 30:break;default:Ol(e,n)}}function _l(e){var t=e.alternate;null!==t&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jl=null,El=!1;function Cl(e,t,n){for(n=n.child;null!==n;)Tl(e,t,n),n=n.sibling}function Tl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:bl||dl(n,t),Cl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||dl(n,t);var r=jl,i=El;fd(n.type)&&(jl=n.stateNode,El=!1),Cl(e,t,n),wd(n.stateNode),jl=r,El=i;break;case 5:bl||dl(n,t);case 6:if(r=jl,i=El,jl=null,Cl(e,t,n),El=i,null!==(jl=r))if(El)try{(9===jl.nodeType?jl.body:"HTML"===jl.nodeName?jl.ownerDocument.body:jl).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{jl.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==jl&&(El?(md(9===(e=jl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Eh(e)):md(jl,n.stateNode));break;case 4:r=jl,i=El,jl=n.stateNode.containerInfo,El=!0,Cl(e,t,n),jl=r,El=i;break;case 0:case 11:case 14:case 15:bl||ol(2,n,t),bl||ol(4,n,t),Cl(e,t,n);break;case 1:bl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Cl(e,t,n);break;case 21:Cl(e,t,n);break;case 22:bl=(r=bl)||null!==n.memoizedState,Cl(e,t,n),bl=r;break;default:Cl(e,t,n)}}function Pl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Eh(e)}catch(n){uu(t,t.return,n)}}function Al(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=pu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Il(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){jl=l.stateNode,El=!1;break e}break;case 5:jl=l.stateNode,El=!1;break e;case 3:case 4:jl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===jl)throw Error(a(160));Tl(s,o,i),jl=null,El=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Rl(t,e),t=t.sibling}var Dl=null;function Rl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Il(t,e),Ml(e),4&r&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Il(t,e),Ml(e),512&r&&(bl||null===n||dl(n,n.return)),64&r&&xl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Dl;if(Il(t,e),Ml(e),512&r&&(bl||null===n||dl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ve]||s[Ie]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),ed(s,r,n),s[Ie]=e,qe(s),r=s;break e;case"link":var o=Vd("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=Vd("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[Ie]=e,qe(s),r=s}e.stateNode=r}else Ud(i,e.type,e.stateNode);else e.stateNode=Rd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Ud(i,e.type,e.stateNode):Rd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Il(t,e),Ml(e),512&r&&(bl||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Il(t,e),Ml(e),512&r&&(bl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(m){uu(e,e.return,m)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(wl=!0);break;case 6:if(Il(t,e),Ml(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){uu(e,e.return,m)}}break;case 3:if(Fd=null,i=Dl,Dl=Sd(t.containerInfo),Il(t,e),Dl=i,Ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Eh(t.containerInfo)}catch(m){uu(e,e.return,m)}wl&&(wl=!1,Ll(e));break;case 4:r=Dl,Dl=Sd(e.stateNode.containerInfo),Il(t,e),Ml(e),Dl=r;break;case 12:default:Il(t,e),Ml(e);break;case 13:Il(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Al(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=xl,d=bl;if(xl=u||i,bl=d||c,Il(t,e),bl=d,xl=u,Ml(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||xl||bl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){uu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){uu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Al(e,n))));break;case 19:Il(t,e),Ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Al(e,r)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,pl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(kt(s,""),n.flags&=-33),yl(e,pl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;gl(e,pl(e),o);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ll(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ll(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ol(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Fl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:wd(t.stateNode);case 26:case 5:dl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Vl(i,s,n),al(4,s);break;case 1:if(Vl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ds(l[i],o)}catch(c){uu(r,r.return,c)}}n&&64&a&&ll(s),ul(s,s.return);break;case 27:vl(s);case 26:case 5:Vl(i,s,n),n&&null===r&&4&a&&hl(s),ul(s,s.return);break;case 12:Vl(i,s,n);break;case 13:Vl(i,s,n),n&&4&a&&Pl(i,s);break;case 22:null===s.memoizedState&&Vl(i,s,n),ul(s,s.return);break;case 30:break;default:Vl(i,s,n)}t=t.sibling}}function Ul(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ri(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ri(e))}function Bl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Wl(e,t,n,r),t=t.sibling}function Wl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:Bl(e,t,n,r);break;case 3:Bl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ri(e)));break;case 12:if(2048&i){Bl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Bl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?Bl(e,t,n,r):ql(e,t):2&s._visibility?Bl(e,t,n,r):(s._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Ul(a,t);break;case 24:Bl(e,t,n,r),2048&i&&zl(t.alternate,t)}}function Hl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Hl(s,a,o,l,i),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Hl(s,a,o,l,i):ql(s,a):(u._visibility|=2,Hl(s,a,o,l,i)),i&&2048&c&&Ul(a.alternate,a);break;case 24:Hl(s,a,o,l,i),i&&2048&c&&zl(a.alternate,a);break;default:Hl(s,a,o,l,i)}t=t.sibling}}function ql(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:ql(n,r),2048&i&&Ul(r.alternate,r);break;case 24:ql(n,r),2048&i&&zl(r.alternate,r);break;default:ql(n,r)}t=t.sibling}}var Kl=8192;function Gl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Gl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Bd)throw Error(a(475));var r=Bd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Td(n.href),s=e.querySelector(Pd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void qe(s);s=e.ownerDocument||e,n=Ad(n),(i=kd.get(i))&&Ld(n,i),qe(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Dl;Dl=Sd(e.stateNode.containerInfo),Gl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Gl(e),Kl=t):Gl(e))}}function Xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,Zl(r,e)}Xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Ql(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Ql(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,Zl(r,e)}Xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Nl;){var n=Nl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ri(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Nl=r;else e:for(n=e;null!==Nl;){var i=(r=Nl).sibling,s=r.return;if(_l(r),r===n){Nl=null;break e}if(null!==i){i.return=s,Nl=i;break e}Nl=s}}}var ec={getCacheForType:function(e){var t=ji(Ii),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,sc=0,ac=0,oc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,fc=0,mc=0,pc=0,gc=0,yc=0,vc=null,xc=null,bc=!1,wc=0,kc=1/0,Nc=null,Sc=null,_c=0,jc=null,Ec=null,Cc=0,Tc=0,Pc=null,Ac=null,Ic=0,Dc=null;function Rc(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==R.T){return 0!==Oi?Oi:Tu()}return Pe()}function Mc(){0===gc&&(gc=0===(536870912&sc)||si?ke():536870912);var e=ro.current;return null!==e&&(e.flags|=32),gc}function Lc(e,t,n){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Wc(e,0),Uc(e,sc,gc,!1)),_e(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(mc|=n),4===hc&&Uc(e,sc,gc,!1)),ku(e))}function Oc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=qc(),i=Kc();rc!==e||sc!==t?(Nc=null,kc=te()+500,Wc(e,t)):cc=be(e,t);e:for(;;)try{if(0!==ac&&null!==ic){t=ic;var s=oc;t:switch(ac){case 1:ac=0,oc=null,Zc(e,t,s,1);break;case 2:case 9:if(Xi(s)){ac=0,oc=null,Jc(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),ku(e)},s.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Xi(s)?(ac=0,oc=null,Jc(t)):(ac=0,oc=null,Zc(e,t,s,7));break;case 5:var o=null;switch(ic.tag){case 26:o=ic.memoizedState;case 5:case 27:var l=ic;if(!o||zd(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}ac=0,oc=null,Zc(e,t,s,5);break;case 6:ac=0,oc=null,Zc(e,t,s,6);break;case 8:Bc(),hc=6;break e;default:throw Error(a(462))}}Qc();break}catch(d){Hc(e,d)}return vi=yi=null,R.H=r,R.A=i,nc=n,null!==ic?0:(rc=null,sc=0,Cr(),hc)}(e,t):Yc(e,t,!0),s=r;;){if(0===i){cc&&!r&&Uc(e,t,0,!1);break}if(n=e.current.alternate,!s||Vc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Wc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=s,mc|=s,i=4;break e}s=xc,xc=i,null!==s&&(null===xc?xc=s:xc.push.apply(xc,s))}i=o}if(s=!1,2!==i)continue}}if(1===i){Wc(e,0),Uc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Uc(r,t,gc,!lc);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=wc+300-te())){if(Uc(r,t,gc,!lc),0!==xe(r,0,!0))break e;r.timeoutHandle=ld(Fc.bind(null,r,n,xc,Nc,bc,t,gc,mc,yc,lc,s,2,-0,0),i)}else Fc(r,n,xc,Nc,bc,t,gc,mc,yc,lc,s,0,-0,0)}break}i=Yc(e,t,!1),s=!1}ku(e)}function Fc(e,t,n,r,i,s,o,l,c,u,d,h,f,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bd={stylesheets:null,count:0,unsuspend:Wd},Yl(t),null!==(h=function(){if(null===Bd)throw Error(a(475));var e=Bd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,s,n,r,i,o,l,c,d,1,f,m)),void Uc(e,s,o,!u);nu(e,t,s,n,r,i,o,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,n,r){t&=~pc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&je(e,n,t)}function zc(){return 0!==(6&nc)||(Nu(0,!1),!1)}function Bc(){if(null!==ic){if(0===ac)var e=ic.return;else vi=yi=null,Os(e=ic),Ya=null,Xa=0,e=ic;for(;null!==e;)sl(e.alternate,e),e=e.return;ic=null}}function Wc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),rc=e,ic=n=Fr(e.current,null),sc=t,ac=0,oc=null,lc=!1,cc=be(e,t),uc=!1,yc=gc=pc=mc=fc=hc=0,xc=vc=null,bc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return dc=t,Cr(),n}function Hc(e,t){xs=null,R.H=Ha,t===qi||t===Gi?(t=Zi(),ac=3):t===Ki?(t=Zi(),ac=4):ac=t===jo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===ic&&(hc=1,wo(e,Sr(t,e.current)))}function qc(){var e=R.H;return R.H=Ha,null===e?Ha:e}function Kc(){var e=R.A;return R.A=ec,e}function Gc(){hc=4,lc||(4194048&sc)!==sc&&null!==ro.current||(cc=!0),0===(134217727&fc)&&0===(134217727&mc)||null===rc||Uc(rc,sc,gc,!1)}function Yc(e,t,n){var r=nc;nc|=2;var i=qc(),s=Kc();rc===e&&sc===t||(Nc=null,Wc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==ic){var o=ic,l=oc;switch(ac){case 8:Bc(),a=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=ac;if(ac=0,oc=null,Zc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Zc(e,o,l,c)}}Xc(),a=hc;break}catch(u){Hc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=r,R.H=i,R.A=s,null===ic&&(rc=null,sc=0,Cr()),a}function Xc(){for(;null!==ic;)$c(ic)}function Qc(){for(;null!==ic&&!Z();)$c(ic)}function $c(e){var t=$o(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Lo(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Lo(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Os(t);default:sl(n,t),t=$o(n,t=ic=Vr(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Zc(e,t,n,r){vi=yi=null,Os(t),Ya=null,Xa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ni(t,n,i,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===io?Gc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,i)),!1;case 22:return n.flags|=65536,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,i)),!1}throw Error(a(435,n.tag))}return du(e,r,i),Gc(),!1}if(si)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&pi(Sr(e=Error(a(422),{cause:r}),n))):(r!==li&&pi(Sr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Sr(r,n),os(e,i=No(e.stateNode,r,i)),4!==hc&&(hc=2)),!1;var s=Error(a(520),{cause:r});if(s=Sr(s,n),null===vc?vc=[s]:vc.push(s),4!==hc&&(hc=2),null===t)return!0;r=Sr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,os(n,e=No(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Sc||!Sc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,_o(i=So(i),e,n,r),os(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sc))return hc=1,wo(e,Sr(n,e.current)),void(ic=null)}catch(s){if(null!==i)throw ic=i,s;return hc=1,wo(e,Sr(n,e.current)),void(ic=null)}32768&t.flags?(si||1===r?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);hc=6,ic=null}function nu(e,t,n,r,i,s,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==_c);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&je(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Er,o,l,c),e===rc&&(ic=rc=null,sc=0),Ec=t,jc=e,Cc=n,Tc=s,Pc=i,Ac=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,$(se,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=R.T,R.T=null,i=M.p,M.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Nl=t;null!==Nl;)if(e=(t=Nl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Nl=e;else for(;null!==Nl;){switch(s=(t=Nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var p=go(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(p,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))pd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Nl=e;break}Nl=t.return}}(e,t)}finally{nc=o,M.p=i,R.T=r}}_c=1,ru(),iu(),su()}}function ru(){if(1===_c){_c=0;var e=jc,t=Ec,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var r=M.p;M.p=2;var i=nc;nc|=4;try{Rl(t,e);var s=nd,a=er(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(a=g,g=p,p=a);var y=Jn(o,p),v=Jn(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var x=d.createRange();x.setStart(y.node,y.offset),f.removeAllRanges(),p>g?(f.addRange(x),f.extend(v.node,v.offset)):(x.setEnd(v.node,v.offset),f.addRange(x))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var b=d[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nh=!!td,nd=td=null}finally{nc=i,M.p=r,R.T=n}}e.current=t,_c=2}}function iu(){if(2===_c){_c=0;var e=jc,t=Ec,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var r=M.p;M.p=2;var i=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=i,M.p=r,R.T=n}}_c=3}}function su(){if(4===_c||3===_c){_c=0,ee();var e=jc,t=Ec,n=Cc,r=Ac;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?_c=5:(_c=0,Ec=jc=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Sc=null),Te(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=R.T,i=M.p,M.p=2,R.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{R.T=t,M.p=i}}0!==(3&Cc)&&ou(),ku(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Dc?Ic++:(Ic=0,Dc=e):Ic=0,Nu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ri(t)))}function ou(e){return ru(),iu(),su(),lu()}function lu(){if(5!==_c)return!1;var e=jc,t=Tc;Tc=0;var n=Te(Cc),r=R.T,i=M.p;try{M.p=32>n?32:n,R.T=null,n=Pc,Pc=null;var s=jc,o=Cc;if(_c=0,Ec=jc=null,Cc=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,$l(s.current),Wl(s,s.current,o,n),nc=l,Nu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{M.p=i,R.T=r,au(e,t)}}function cu(e,t,n){t=Sr(n,t),null!==(e=ss(e,t=No(e.stateNode,t,2),2))&&(_e(e,2),ku(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=Sr(n,e),null!==(r=ss(t,n=So(2),2))&&(_o(n,r,t,e),_e(r,2),ku(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(sc&n)===n&&(4===hc||3===hc&&(62914560&sc)===sc&&300>te()-wc?0===(2&nc)&&Wc(e,0):pc|=n,yc===sc&&(yc=0)),ku(e)}function fu(e,t){0===t&&(t=Ne()),null!==(e=Ar(e,t))&&(_e(e,t),ku(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function pu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),fu(e,n)}var gu=null,yu=null,vu=!1,xu=!1,bu=!1,wu=0;function ku(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),xu=!0,vu||(vu=!0,dd(function(){0!==(6&nc)?$(re,Su):_u()}))}function Nu(e,t){if(!bu&&xu){bu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Cu(r,s))}else s=sc,0===(3&(s=xe(r,r===rc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,s)||(n=!0,Cu(r,s));r=r.next}}while(n);bu=!1}}function Su(){_u()}function _u(){xu=vu=!1;var e=0;0!==wu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=wu),wu=0);for(var t=te(),n=null,r=gu;null!==r;){var i=r.next,s=ju(r,t);0===s?(r.next=null,null===n?gu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&s))&&(xu=!0)),r=i}Nu(e,!1)}function ju(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-fe(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=we(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=sc,n=xe(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Te(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=oe}return r=Eu.bind(null,e),n=$(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Eu(e,t){if(0!==_c&&5!==_c)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var r=sc;return 0===(r=xe(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Oc(e,r,t),ju(e,te()),null!=e.callbackNode&&e.callbackNode===n?Eu.bind(null,e):null)}function Cu(e,t){if(ou())return null;Oc(e,t,!0)}function Tu(){return 0===wu&&(wu=ke()),wu}function Pu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function Au(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Iu=0;Iu<wr.length;Iu++){var Du=wr[Iu];kr(Du.toLowerCase(),"on"+(Du[0].toUpperCase()+Du.slice(1)))}kr(fr,"onAnimationEnd"),kr(mr,"onAnimationIteration"),kr(pr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(xr,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function Lu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){yo(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){yo(u)}i.currentTarget=null,s=l}}}}function Ou(e,t){var n=t[Me];void 0===n&&(n=t[Me]=new Set);var r=e+"__bubble";n.has(r)||(zu(t,e,2,!1),n.add(r))}function Fu(e,t,n){var r=0;t&&(r|=4),zu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[Vu]){e[Vu]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Mu.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Fu("selectionchange",!1,t))}}function zu(e,t,n,r){switch(ch(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=sh}n=i.bind(null,t,n,e),i=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==o;){if(null===(a=ze(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=s=a;continue e}o=o.parentNode}}r=r.return}Lt(function(){var r=s,i=At(n),a=[];e:{var o=br.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=pn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case mr:case pr:c=on;break;case xr:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=xn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=bn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Ot(p,f))&&d.push(Wu(p,g,m)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Pt||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Re])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:We(c),m=null==u?o:We(u),(o=new d(g,p+"leave",c,n,i)).target=h,o.relatedTarget=m,g=null,ze(i)===r&&((d=new d(f,p+"enter",u,n,i)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,p=0,m=d=c;m;m=qu(m))p++;for(m=0,g=f;g;g=qu(g))m++;for(;0<p-m;)d=qu(d),p--;for(;0<m-p;)f=qu(f),m--;for(;p--;){if(d===f||null!==f&&d===f.alternate)break e;d=qu(d),f=qu(f)}d=null}else d=null;null!==c&&Ku(a,o,c,d,!1),null!==u&&null!==h&&Ku(a,h,u,d,!0)}if("select"===(c=(o=r?We(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Fn;else if(In(o))if(Vn)y=Yn;else{y=Kn;var v=qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&jt(r.elementType)&&(y=Fn):y=Gn;switch(y&&(y=y(e,r))?Dn(a,y,n,i):(v&&v(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&vt(o,"number",o.value)),v=r?We(r):window,e){case"focusin":(In(v)||"true"===v.contentEditable)&&(rr=v,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,i)}var x;if(kn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Pn?Cn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(_n&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Pn&&(x=Ht()):(Bt="value"in(zt=i)?zt.value:zt.textContent,Pn=!0)),0<(v=Hu(r,b)).length&&(b=new cn(b,e,null,n,i),a.push({event:b,listeners:v}),x?b.data=x:null!==(x=Tn(n))&&(b.data=x))),(x=Sn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(En=!0,jn);case"textInput":return(e=t.data)===jn&&En?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!kn&&Cn(e,t)?(e=Ht(),Wt=Bt=zt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Hu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),a.push({event:v,listeners:b}),v.data=x)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Pu((i[De]||null).action),a=r.submitter;a&&null!==(t=(t=a[De]||null)?Pu(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new Zt("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wu){var e=a?Au(i,a):new FormData(i);Pa(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Au(i,a):new FormData(i),Pa(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Lu(a,t)})}function Wu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ot(e,n))&&r.unshift(Wu(e,i,s)),null!=(i=Ot(e,t))&&r.push(Wu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function qu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Ot(n,s))&&a.unshift(Wu(n,c,l)):i||null!=(c=Ot(n,s))&&a.push(Wu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Gu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Xu(e){return("string"===typeof e?e:""+e).replace(Gu,"\n").replace(Yu,"")}function Qu(e,t){return t=Xu(t),Xu(e)===t}function $u(){}function Ju(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":_t(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Ju(e,t,"name",i.name,i,null),Ju(e,t,"formEncType",i.formEncType,i,null),Ju(e,t,"formMethod",i.formMethod,i,null),Ju(e,t,"formTarget",i.formTarget,i,null)):(Ju(e,t,"encType",i.encType,i,null),Ju(e,t,"method",i.method,i,null),Ju(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=$u);break;case"onScroll":null!=r&&Ou("scroll",e);break;case"onScrollEnd":null!=r&&Ou("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Tt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ou("beforetoggle",e),Ou("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,r)}}function Zu(e,t,n,r,i,s){switch(n){case"style":_t(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Ou("scroll",e);break;case"onScrollEnd":null!=r&&Ou("scrollend",e);break;case"onClick":null!=r&&(e.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[De]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ou("error",e),Ou("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ju(e,t,r,o,n,null)}}return s&&Ju(e,t,"srcSet",n.srcSet,n,null),void(i&&Ju(e,t,"src",n.src,n,null));case"input":Ou("invalid",e);var l=r=o=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Ju(e,t,i,d,n,null)}}return yt(e,r,l,c,u,o,s,!1),void dt(e);case"select":for(s in Ou("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:Ju(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?xt(e,!!i,t,!1):null!=n&&xt(e,!!i,n,!0));case"textarea":for(o in Ou("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Ju(e,t,o,l,n,null)}return wt(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Ju(e,t,c,i,n,null);return;case"dialog":Ou("beforetoggle",e),Ou("toggle",e),Ou("cancel",e),Ou("close",e);break;case"iframe":case"object":Ou("load",e);break;case"video":case"audio":for(i=0;i<Ru.length;i++)Ou(Ru[i],e);break;case"image":Ou("error",e),Ou("load",e);break;case"details":Ou("toggle",e);break;case"embed":case"source":case"link":Ou("error",e),Ou("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ju(e,t,u,i,n,null)}return;default:if(jt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Zu(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Ju(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function md(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&wd(a.documentElement),2&n&&wd(a.body),4&n)for(wd(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===i)return e.removeChild(s),void Eh(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Eh(t)}function pd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":pd(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function xd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function wd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var kd=new Map,Nd=new Set;function Sd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _d=M.d;M.d={f:function(){var e=_d.f(),t=zc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Ia(t):_d.r(e)},D:function(e){_d.D(e),Ed("dns-prefetch",e,null)},C:function(e,t){_d.C(e,t),Ed("preconnect",e,t)},L:function(e,t,n){_d.L(e,t,n);var r=jd;if(r&&e&&t){var i='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+pt(n.imageSizes)+'"]')):i+='[href="'+pt(e)+'"]';var s=i;switch(t){case"style":s=Td(e);break;case"script":s=Id(e)}kd.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Pd(s))||"script"===t&&r.querySelector(Dd(s))||(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}},m:function(e,t){_d.m(e,t);var n=jd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+pt(r)+'"][href="'+pt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Id(e)}if(!kd.has(s)&&(e=h({rel:"modulepreload",href:e},t),kd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dd(s)))return}ed(r=n.createElement("link"),"link",e),qe(r),n.head.appendChild(r)}}},X:function(e,t){_d.X(e,t);var n=jd;if(n&&e){var r=He(n).hoistableScripts,i=Id(e),s=r.get(i);s||((s=n.querySelector(Dd(i)))||(e=h({src:e,async:!0},t),(t=kd.get(i))&&Od(e,t),qe(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){_d.S(e,t,n);var r=jd;if(r&&e){var i=He(r).hoistableStyles,s=Td(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Pd(s)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(s))&&Ld(e,n);var l=a=r.createElement("link");qe(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Md(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){_d.M(e,t);var n=jd;if(n&&e){var r=He(n).hoistableScripts,i=Id(e),s=r.get(i);s||((s=n.querySelector(Dd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=kd.get(i))&&Od(e,t),qe(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var jd="undefined"===typeof document?null:document;function Ed(e,t,n){var r=jd;if(r&&"string"===typeof t&&t){var i=pt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Nd.has(i)||(Nd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}}function Cd(e,t,n,r){var i,s,o,l,c=(c=H.current)?Sd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Td(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Td(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Pd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),u||(i=c,s=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),ed(s,"link",o),qe(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Id(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Td(e){return'href="'+pt(e)+'"'}function Pd(e){return'link[rel="stylesheet"]['+e+"]"}function Ad(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Id(e){return'[src="'+pt(e)+'"]'}function Dd(e){return"script[async]"+e}function Rd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+pt(n.href)+'"]');if(r)return t.instance=r,qe(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Md(r,n.precedence,e),t.instance=r;case"stylesheet":i=Td(n.href);var s=e.querySelector(Pd(i));if(s)return t.state.loading|=4,t.instance=s,qe(s),s;r=Ad(n),(i=kd.get(i))&&Ld(r,i),qe(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(s,"link",r),t.state.loading|=4,Md(s,n.precedence,e),t.instance=s;case"script":return s=Id(n.src),(i=e.querySelector(Dd(s)))?(t.instance=i,qe(i),i):(r=n,(i=kd.get(s))&&Od(r=h({},n),i),qe(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Md(r,n.precedence,e));return t.instance}function Md(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Ld(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Od(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function Vd(e,t,n){if(null===Fd){var r=new Map,i=Fd=new Map;i.set(n,r)}else(r=(i=Fd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ve]||s[Ie]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function Ud(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bd=null;function Wd(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var qd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,qd=new Map,t.forEach(Gd,e),qd=null,Hd.call(e))}function Gd(e,t){if(!(4&t.state.loading)){var n=qd.get(e);if(n)var r=n.get(null);else{n=new Map,qd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Hd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:w,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Xd(e,t,n,r,i,s,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Qd(e,t,n,r,i,s,a,o,l,c,u,d){return e=new Xd(e,t,n,a,o,l,c,d),t=1,!0===s&&(t|=24),s=Lr(3,null,null,t),e.current=s,s.stateNode=e,(t=Di()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function $d(e){return e?e=Rr:Rr}function Jd(e,t,n,r,i,s){i=$d(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Lc(n,0,t),as(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Ar(e,67108864);null!==t&&Lc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=R.T;R.T=null;var s=M.p;try{M.p=2,sh(e,t,n,r)}finally{M.p=s,R.T=i}}function ih(e,t,n,r){var i=R.T;R.T=null;var s=M.p;try{M.p=8,sh(e,t,n,r)}finally{M.p=s,R.T=i}}function sh(e,t,n,r){if(nh){var i=ah(r);if(null===i)Bu(e,t,r,oh,n),vh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=xh(dh,e,t,n,r,i),!0;case"dragenter":return hh=xh(hh,e,t,n,r,i),!0;case"mouseover":return fh=xh(fh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return mh.set(s,xh(mh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ph.set(s,xh(ph.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var s=Be(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=ve(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}ku(s),0===(6&nc)&&(kc=te()+500,Nu(0,!1))}}break;case 13:null!==(o=Ar(s,2))&&Lc(o,0,2),zc(),eh(s,2)}if(null===(s=ah(r))&&Bu(e,t,r,oh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function ah(e){return lh(e=At(e))}var oh=null;function lh(e){if(oh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,fh=null,mh=new Map,ph=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ph.delete(t.pointerId)}}function xh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}(e.priority,function(){if(13===n.tag){var e=Rc();e=Ce(e);var t=Ar(n,e);null!==t&&Lc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Pt=r,n.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function kh(e,t,n){wh(e)&&n.delete(t)}function Nh(){uh=!1,null!==dh&&wh(dh)&&(dh=null),null!==hh&&wh(hh)&&(hh=null),null!==fh&&wh(fh)&&(fh=null),mh.forEach(kh),ph.forEach(kh)}function Sh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Nh)))}var _h=null;function jh(e){_h!==e&&(_h=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_h===e&&(_h=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var s=Be(n);null!==s&&(e.splice(t,3),t-=3,Pa(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Eh(e){function t(t){return Sh(t,e)}null!==dh&&Sh(dh,e),null!==hh&&Sh(hh,e),null!==fh&&Sh(fh,e),mh.forEach(t),ph.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)bh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[De]||null;if("function"===typeof s)a||jh(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[De]||null)o=a.formAction;else if(null!==lh(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),jh(n)}}}function Ch(e){this._internalRoot=e}function Th(e){this._internalRoot=e}Th.prototype.render=Ch.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Jd(t.current,Rc(),e,t,null,null)},Th.prototype.unmount=Ch.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),zc(),t[Re]=null}},Th.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&bh(e)}};var Ph=i.version;if("19.1.1"!==Ph)throw Error(a(527,Ph,"19.1.1"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ah={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{ue=Ih.inject(Ah),de=Ih}catch(Rh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=vo,s=xo,l=bo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qd(e,1,!1,null,0,n,r,i,s,l,0,null),e[Re]=t.current,Uu(e),new Ch(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=vo,l=xo,c=bo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Qd(e,1,!0,t,0,r,i,s,l,c,0,u)).context=$d(null),n=t.current,(i=is(r=Ce(r=Rc()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,_e(t,n),ku(t),e[Re]=t.current,Uu(e),new Th(t)},t.version="19.1.1"},43:(e,t,n)=>{"use strict";e.exports=n(288)},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,p(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function S(e,t,r,i,s,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(){}function T(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return T((u=e._init)(e._payload),t,i,s,a)}}if(u)return a=a(e),u=""===s?"."+E(e,0):s,w(a)?(i="",null!=u&&(i=u.replace(j,"$&/")+"/"),T(a,t,i,"",function(e){return e})):null!=a&&(_(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+u,a=S(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,m=""===s?".":s+":";if(w(e))for(var p=0;p<e.length;p++)u+=T(s=e[p],t,i,o=m+E(s,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(s=e.next()).done;)u+=T(s=s.value,t,i,o=m+E(s,p++),a);else if("object"===o){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(C,C):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",function(e){return t.call(n,e,i++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=p({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!N.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return S(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)N.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return S(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,I)}catch(s){I(s)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},393:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function o(e,t){if(null==e)return{};var n,r,i=a(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e,t){return c(e)||u(e,t)||d(e,t)||f()}function c(e){if(Array.isArray(e))return e}function u(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}}function d(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var p,g,y,v,x={exports:{}};function b(){return g?p:(g=1,p="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function w(){if(v)return y;v=1;var e=b();function t(){}function n(){}return n.resetWarningCache=t,y=function(){function r(t,n,r,i,s,a){if(a!==e){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function i(){return r}r.isRequired=r;var s={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s}}x.exports=w()();var k=m(x.exports),N=function(e,n,r){var i=!!r,s=t.useRef(r);t.useEffect(function(){s.current=r},[r]),t.useEffect(function(){if(!i||!e)return function(){};var t=function(){s.current&&s.current.apply(s,arguments)};return e.on(n,t),function(){e.off(n,t)}},[i,n,e,s])},S=function(e){var n=t.useRef(e);return t.useEffect(function(){n.current=e},[e]),n.current},_=function(e){return null!==e&&"object"===i(e)},j=function(e){return _(e)&&"function"===typeof e.then},E=function(e){return _(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},C="[object Object]",T=function e(t,n){if(!_(t)||!_(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===C;if(i!==(Object.prototype.toString.call(n)===C))return!1;if(!i&&!r)return t===n;var s=Object.keys(t),a=Object.keys(n);if(s.length!==a.length)return!1;for(var o={},l=0;l<s.length;l+=1)o[s[l]]=!0;for(var c=0;c<a.length;c+=1)o[a[c]]=!0;var u=Object.keys(o);if(u.length!==s.length)return!1;var d=t,h=n,f=function(t){return e(d[t],h[t])};return u.every(f)},P=function(e,t,n){return _(e)?Object.keys(e).reduce(function(i,a){var o=!_(t)||!T(e[a],t[a]);return n.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?r(r({},i||{}),{},s({},a,e[a])):i},null):null},A="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(null===e||E(e))return e;throw new Error(t)},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(j(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return I(e,t)})};var n=I(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},R=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.9.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.9.0",url:"https://stripe.com/docs/stripe-js/react"}))},M=t.createContext(null);M.displayName="ElementsContext";var L=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},O=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo(function(){return D(n)},[n]),a=l(t.useState(function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(r):null}}),2),o=a[0],c=a[1];t.useEffect(function(){var e=!0,t=function(e){c(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==s.tag||o.stripe?"sync"!==s.tag||o.stripe||t(s.stripe):s.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[s,o,r]);var u=S(n);t.useEffect(function(){null!==u&&u!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,n]);var d=S(r);return t.useEffect(function(){if(o.elements){var e=P(r,d,["clientSecret","fonts"]);e&&o.elements.update(e)}},[r,d,o.elements]),t.useEffect(function(){R(o.stripe)},[o.stripe]),t.createElement(M.Provider,{value:o},i)};O.propTypes={stripe:k.any,options:k.object};var F=function(e){var n=t.useContext(M);return L(n,e)},V=function(){return F("calls useElements()").elements},U=function(e){return(0,e.children)(F("mounts <ElementsConsumer>"))};U.propTypes={children:k.func.isRequired};var z=["on","session"],B=t.createContext(null);B.displayName="CheckoutSdkContext";var W=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},H=t.createContext(null);H.displayName="CheckoutContext";var q=function(e,t){if(!e)return null;e.on,e.session;var n=o(e,z);return t?Object.assign(t,n):Object.assign(e.session(),n)},K="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",G=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo(function(){return D(n,K)},[n]),a=l(t.useState(null),2),o=a[0],c=a[1],u=l(t.useState(function(){return{stripe:"sync"===s.tag?s.stripe:null,checkoutSdk:null}}),2),d=u[0],h=u[1],f=function(e,t){h(function(n){return n.stripe&&n.checkoutSdk?n:{stripe:e,checkoutSdk:t}})},m=t.useRef(!1);t.useEffect(function(){var e=!0;return"async"!==s.tag||d.stripe?"sync"===s.tag&&s.stripe&&!m.current&&(m.current=!0,s.stripe.initCheckout(r).then(function(e){e&&(f(s.stripe,e),e.on("change",c))})):s.stripePromise.then(function(t){t&&e&&!m.current&&(m.current=!0,t.initCheckout(r).then(function(e){e&&(f(t,e),e.on("change",c))}))}),function(){e=!1}},[s,d,r,c]);var p=S(n);t.useEffect(function(){null!==p&&p!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[p,n]);var g=S(r),y=S(d.checkoutSdk);t.useEffect(function(){var e,t,n,i;if(d.checkoutSdk){var s=Boolean(!y&&d.checkoutSdk),a=null===g||void 0===g||null===(e=g.elementsOptions)||void 0===e?void 0:e.appearance,o=null===r||void 0===r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance,l=!T(o,a);o&&(l||s)&&d.checkoutSdk.changeAppearance(o);var c=null===g||void 0===g||null===(n=g.elementsOptions)||void 0===n?void 0:n.fonts,u=null===r||void 0===r||null===(i=r.elementsOptions)||void 0===i?void 0:i.fonts,h=!T(c,u);u&&(h||s)&&d.checkoutSdk.loadFonts(u)}},[r,g,d.checkoutSdk,y]),t.useEffect(function(){R(d.stripe)},[d.stripe]);var v=t.useMemo(function(){return q(d.checkoutSdk,o)},[d.checkoutSdk,o]);return d.checkoutSdk?t.createElement(B.Provider,{value:d},t.createElement(H.Provider,{value:v},i)):null};G.propTypes={stripe:k.any,options:k.shape({fetchClientSecret:k.func.isRequired,elementsOptions:k.object}).isRequired};var Y=function(e){var n=t.useContext(B);return W(n,e)},X=function(e){var n=t.useContext(B),r=t.useContext(M);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?W(n,e):L(r,e)},Q=function(){Y("calls useCheckout()");var e=t.useContext(H);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},$=["mode"],J=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Z=function(e,n){var r="".concat(J(e),"Element"),i=n?function(e){X("mounts <".concat(r,">"));var n=e.id,i=e.className;return t.createElement("div",{id:n,className:i})}:function(n){var i,s=n.id,a=n.className,c=n.options,u=void 0===c?{}:c,d=n.onBlur,h=n.onFocus,f=n.onReady,m=n.onChange,p=n.onEscape,g=n.onClick,y=n.onLoadError,v=n.onLoaderStart,x=n.onNetworksChange,b=n.onConfirm,w=n.onCancel,k=n.onShippingAddressChange,_=n.onShippingRateChange,j=X("mounts <".concat(r,">")),E="elements"in j?j.elements:null,C="checkoutSdk"in j?j.checkoutSdk:null,T=l(t.useState(null),2),A=T[0],I=T[1],D=t.useRef(null),R=t.useRef(null);N(A,"blur",d),N(A,"focus",h),N(A,"escape",p),N(A,"click",g),N(A,"loaderror",y),N(A,"loaderstart",v),N(A,"networkschange",x),N(A,"confirm",b),N(A,"cancel",w),N(A,"shippingaddresschange",k),N(A,"shippingratechange",_),N(A,"change",m),f&&(i="expressCheckout"===e?f:function(){f(A)}),N(A,"ready",i),t.useLayoutEffect(function(){if(null===D.current&&null!==R.current&&(E||C)){var t=null;if(C)switch(e){case"payment":t=C.createPaymentElement(u);break;case"address":if(!("mode"in u))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=u.mode,i=o(u,$);if("shipping"===n)t=C.createShippingAddressElement(i);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=C.createBillingAddressElement(i)}break;case"expressCheckout":t=C.createExpressCheckoutElement(u);break;case"currencySelector":t=C.createCurrencySelectorElement();break;case"taxId":t=C.createTaxIdElement(u);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else E&&(t=E.create(e,u));D.current=t,I(t),t&&t.mount(R.current)}},[E,C,u]);var M=S(u);return t.useEffect(function(){if(D.current){var e=P(u,M,["paymentRequest"]);e&&"update"in D.current&&D.current.update(e)}},[u,M]),t.useLayoutEffect(function(){return function(){if(D.current&&"function"===typeof D.current.destroy)try{D.current.destroy(),D.current=null}catch(e){}}},[]),t.createElement("div",{id:s,className:a,ref:R})};return i.propTypes={id:k.string,className:k.string,onChange:k.func,onBlur:k.func,onFocus:k.func,onReady:k.func,onEscape:k.func,onClick:k.func,onLoadError:k.func,onLoaderStart:k.func,onNetworksChange:k.func,onConfirm:k.func,onCancel:k.func,onShippingAddressChange:k.func,onShippingRateChange:k.func,options:k.object},i.displayName=r,i.__elementType=e,i},ee="undefined"===typeof window,te=t.createContext(null);te.displayName="EmbeddedCheckoutProviderContext";var ne=function(){var e=t.useContext(te);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},re="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ie=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo(function(){return D(n,re)},[n]),a=t.useRef(null),o=t.useRef(null),c=l(t.useState({embeddedCheckout:null}),2),u=c[0],d=c[1];t.useEffect(function(){if(!o.current&&!a.current){var e=function(e){o.current||a.current||(o.current=e,a.current=o.current.initEmbeddedCheckout(r).then(function(e){d({embeddedCheckout:e})}))};"async"!==s.tag||o.current||!r.clientSecret&&!r.fetchClientSecret?"sync"!==s.tag||o.current||!r.clientSecret&&!r.fetchClientSecret||e(s.stripe):s.stripePromise.then(function(t){t&&e(t)})}},[s,r,u,o]),t.useEffect(function(){return function(){u.embeddedCheckout?(a.current=null,u.embeddedCheckout.destroy()):a.current&&a.current.then(function(){a.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()})}},[u.embeddedCheckout]),t.useEffect(function(){R(o)},[o]);var h=S(n);t.useEffect(function(){null!==h&&h!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[h,n]);var f=S(r);return t.useEffect(function(){null!=f&&(null!=r?(void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=f.clientSecret&&r.clientSecret!==f.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.fetchClientSecret&&r.fetchClientSecret!==f.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.onComplete&&r.onComplete!==f.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=f.onShippingDetailsChange&&r.onShippingDetailsChange!==f.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=f.onLineItemsChange&&r.onLineItemsChange!==f.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))},[f,r]),t.createElement(te.Provider,{value:u},i)},se=function(e){var n=e.id,r=e.className,i=ne().embeddedCheckout,s=t.useRef(!1),a=t.useRef(null);return t.useLayoutEffect(function(){return!s.current&&i&&null!==a.current&&(i.mount(a.current),s.current=!0),function(){if(s.current&&i)try{i.unmount(),s.current=!1}catch(e){}}},[i]),t.createElement("div",{ref:a,id:n,className:r})},ae=function(e){var n=e.id,r=e.className;return ne(),t.createElement("div",{id:n,className:r})},oe=ee?ae:se,le=function(){return X("calls useStripe()").stripe},ce=Z("auBankAccount",ee),ue=Z("card",ee),de=Z("cardNumber",ee),he=Z("cardExpiry",ee),fe=Z("cardCvc",ee),me=Z("fpxBank",ee),pe=Z("iban",ee),ge=Z("idealBank",ee),ye=Z("p24Bank",ee),ve=Z("epsBank",ee),xe=Z("payment",ee),be=Z("expressCheckout",ee),we=Z("currencySelector",ee),ke=Z("paymentRequestButton",ee),Ne=Z("linkAuthentication",ee),Se=Z("address",ee),_e=Z("shippingAddress",ee),je=Z("paymentMethodMessaging",ee),Ee=Z("affirmMessage",ee),Ce=Z("afterpayClearpayMessage",ee),Te=Z("taxId",ee);e.AddressElement=Se,e.AffirmMessageElement=Ee,e.AfterpayClearpayMessageElement=Ce,e.AuBankAccountElement=ce,e.CardCvcElement=fe,e.CardElement=ue,e.CardExpiryElement=he,e.CardNumberElement=de,e.CheckoutProvider=G,e.CurrencySelectorElement=we,e.Elements=O,e.ElementsConsumer=U,e.EmbeddedCheckout=oe,e.EmbeddedCheckoutProvider=ie,e.EpsBankElement=ve,e.ExpressCheckoutElement=be,e.FpxBankElement=me,e.IbanElement=pe,e.IdealBankElement=ge,e.LinkAuthenticationElement=Ne,e.P24BankElement=ye,e.PaymentElement=xe,e.PaymentMethodMessagingElement=je,e.PaymentRequestButtonElement=ke,e.ShippingAddressElement=_e,e.TaxIdElement=Te,e.useCheckout=Q,e.useElements=V,e.useStripe=le}(t,n(43))},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,w(e),!p)if(null!==r(c))p=!0,S||(S=!0,N());else{var t=r(u);null!==t&&I(k,t.startTime-e)}}var N,S=!1,_=-1,j=5,E=-1;function C(){return!!y||!(t.unstable_now()-E<j)}function T(){if(y=!1,S){var e=t.unstable_now();E=e;var n=!0;try{e:{p=!1,g&&(g=!1,x(_),_=-1),m=!0;var s=f;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===r(c)&&i(c),w(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&I(k,l.startTime-e),n=!1}}break e}finally{h=null,f=s,m=!1}n=void 0}}finally{n?N():S=!1}}}if("function"===typeof b)N=function(){b(T)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=T,N=function(){A.postMessage(null)}}else N=function(){v(T,0)};function I(e,n){_=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(x(_),_=-1):g=!0,I(k,s-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,S||(S=!0,N()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".9c2db2a9.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="paynow:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkpaynow=self.webpackChunkpaynow||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>DC,hasStandardBrowserEnv:()=>MC,hasStandardBrowserWebWorkerEnv:()=>LC,navigator:()=>RC,origin:()=>OC});var t=n(43),r=n(391);function i(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=["sri"],d=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],p=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var g="popstate";function y(){return S(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return w("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:k(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function v(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function b(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?N(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function N(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function S(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,u=d();function d(){return(a.state||{idx:null}).idx}function h(){o="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:o,location:m.location,delta:t})}function f(e){return _(e)}null==u&&(u=0,a.replaceState(c(c({},a.state),{},{idx:u}),""));let m={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(g,h),l=e,()=>{i.removeEventListener(g,h),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=w(m.location,e,t);n&&n(r,e),u=d()+1;let c=b(r,u),h=m.createHref(r);try{a.pushState(c,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}s&&l&&l({action:o,location:m.location,delta:1})},replace:function(e,t){o="REPLACE";let r=w(m.location,e,t);n&&n(r,e),u=d();let i=b(r,u),c=m.createHref(r);a.replaceState(i,"",c),s&&l&&l({action:o,location:m.location,delta:0})},go:e=>a.go(e)};return m}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),v(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:k(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function j(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,n,r){let i=B(("string"===typeof t?N(t):t).pathname||"/",n);if(null==i)return null;let s=C(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=z(i);a=F(s[o],e,r)}return a}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(v(a.relativePath.startsWith(r),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(r.length));let o=G([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(v(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),C(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:O(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of T(e.path))i(e,t,r);else i(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=T(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var P=/^:[\w-]+$/,A=3,I=2,D=1,R=10,M=-2,L=e=>"*"===e;function O(e,t){let n=e.split("/"),r=n.length;return n.some(L)&&(r+=M),t&&(r+=I),n.filter(e=>!L(e)).reduce((e,t)=>e+(P.test(t)?A:""===t?D:R),r)}function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:G([s,u.pathname]),pathnameBase:Y(G([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=G([s,u.pathnameBase]))}return a}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=U(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:a,pattern:e}}function U(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function z(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function W(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function H(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function q(e){let t=H(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function K(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=N(e):(r=c({},e),v(!r.pathname||!r.pathname.includes("?"),W("?","pathname","search",r)),v(!r.pathname||!r.pathname.includes("#"),W("#","pathname","hash",r)),v(!r.search||!r.search.includes("#"),W("#","search","hash",r)));let s,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)s=n;else{let e=t.length-1;if(!i&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?N(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:X(r),hash:Q(i)}}(r,s),u=o&&"/"!==o&&o.endsWith("/"),d=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var G=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var J=["POST","PUT","PATCH","DELETE"],Z=(new Set(J),["GET",...J]);new Set(Z),Symbol("ResetLoaderData");var ee=t.createContext(null);ee.displayName="DataRouter";var te=t.createContext(null);te.displayName="DataRouterState";var ne=t.createContext(!1);var re=t.createContext({isTransitioning:!1});re.displayName="ViewTransition";var ie=t.createContext(new Map);ie.displayName="Fetchers";var se=t.createContext(null);se.displayName="Await";var ae=t.createContext(null);ae.displayName="Navigation";var oe=t.createContext(null);oe.displayName="Location";var le=t.createContext({outlet:null,matches:[],isDataRoute:!1});le.displayName="Route";var ce=t.createContext(null);ce.displayName="RouteError";function ue(){return null!=t.useContext(oe)}function de(){return v(ue(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(oe).location}var he="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fe(e){t.useContext(ae).static||t.useLayoutEffect(e)}function me(){let{isDataRoute:e}=t.useContext(le);return e?function(){let{router:e}=Se("useNavigate"),n=je("useNavigate"),r=t.useRef(!1);fe(()=>{r.current=!0});let i=t.useCallback(async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(r.current,he),r.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,c({fromRouteId:n},i)))},[e,n]);return i}():function(){v(ue(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(ee),{basename:n,navigator:r}=t.useContext(ae),{matches:i}=t.useContext(le),{pathname:s}=de(),a=JSON.stringify(q(i)),o=t.useRef(!1);fe(()=>{o.current=!0});let l=t.useCallback(function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(o.current,he),!o.current)return;if("number"===typeof t)return void r.go(t);let l=K(t,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:G([n,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)},[n,r,a,s,e]);return l}()}t.createContext(null);function pe(){let{matches:e}=t.useContext(le),n=e[e.length-1];return n?n.params:{}}function ge(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=t.useContext(le),{pathname:i}=de(),s=JSON.stringify(q(r));return t.useMemo(()=>K(e,JSON.parse(s),i,"path"===n),[e,s,i,n])}function ye(e,n,r,i){v(ue(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=t.useContext(ae),{matches:a}=t.useContext(le),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",h=o&&o.route;{let e=h&&h.path||"";Te(u,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,m=de();if(n){var p;let e="string"===typeof n?N(n):n;v("/"===d||(null===(p=e.pathname)||void 0===p?void 0:p.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=m;let g=f.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=j(e,{pathname:y});x(h||null!=b,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),x(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=ke(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:G([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:G([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,r,i);return n&&w?t.createElement(oe.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},w):w}function ve(){let e=Ee(),n=$(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:a},"ErrorBoundary")," or"," ",t.createElement("code",{style:a},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,o)}var xe=t.createElement(ve,null),be=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(le.Provider,{value:this.props.routeContext},t.createElement(ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function we(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(ee);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(le.Provider,{value:n},i)}function ke(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let i=e,s=null===r||void 0===r?void 0:r.errors;if(null!=s){let e=i.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));v(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),i=i.slice(0,Math.min(i.length,e+1))}let a=!1,o=-1;if(r)for(let t=0;t<i.length;t++){let e=i[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=t),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){a=!0,i=o>=0?i.slice(0,o+1):[i[0]];break}}}return i.reduceRight((e,l,c)=>{let u,d=!1,h=null,f=null;r&&(u=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||xe,a&&(o<0&&0===c?(Te("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):o===c&&(d=!0,f=l.route.hydrateFallbackElement||null)));let m=n.concat(i.slice(0,c+1)),p=()=>{let n;return n=u?h:d?f:l.route.Component?t.createElement(l.route.Component,null):l.route.element?l.route.element:e,t.createElement(we,{match:l,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?t.createElement(be,{location:r.location,revalidation:r.revalidation,component:h,error:u,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}function Ne(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Se(e){let n=t.useContext(ee);return v(n,Ne(e)),n}function _e(e){let n=t.useContext(te);return v(n,Ne(e)),n}function je(e){let n=function(e){let n=t.useContext(le);return v(n,Ne(e)),n}(e),r=n.matches[n.matches.length-1];return v(r.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),r.route.id}function Ee(){var e;let n=t.useContext(ce),r=_e("useRouteError"),i=je("useRouteError");return void 0!==n?n:null===(e=r.errors)||void 0===e?void 0:e[i]}var Ce={};function Te(e,t,n){t||Ce[e]||(Ce[e]=!0,x(!1,n))}var Pe={};function Ae(e,t){e||Pe[t]||(Pe[t]=!0,console.warn(t))}t.memo(function(e){let{routes:t,future:n,state:r}=e;return ye(t,void 0,r,n)});function Ie(e){let{to:n,replace:r,state:i,relative:s}=e;v(ue(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=t.useContext(ae);x(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=t.useContext(le),{pathname:l}=de(),c=me(),u=K(n,q(o),l,"path"===s),d=JSON.stringify(u);return t.useEffect(()=>{c(JSON.parse(d),{replace:r,state:i,relative:s})},[c,d,s,r,i]),null}function De(e){v(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Re(e){let{basename:n="/",children:r=null,location:i,navigationType:s="POP",navigator:a,static:o=!1}=e;v(!ue(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=t.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof i&&(i=N(i));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:m="default"}=i,p=t.useMemo(()=>{let e=B(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:m},navigationType:s}},[l,u,d,h,f,m,s]);return x(null!=p,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==p?null:t.createElement(ae.Provider,{value:c},t.createElement(oe.Provider,{children:r,value:p}))}function Me(e){let{children:t,location:n}=e;return ye(Le(t),n)}t.Component;function Le(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.Children.forEach(e,(e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,Le(e.props.children,s));v(e.type===De,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),v(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Le(e.props.children,s)),r.push(a)}),r}var Oe="get",Fe="application/x-www-form-urlencoded";function Ve(e){return null!=e&&"string"===typeof e.tagName}var Ue=null;var ze=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Be(e){return null==e||ze.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Fe,'"')),null)}function We(e,t){let n,r,i,s,a;if(Ve(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?B(a,t):null,n=e.getAttribute("method")||Oe,i=Be(e.getAttribute("enctype"))||Fe,s=new FormData(e)}else if(function(e){return Ve(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ve(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?B(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Oe,i=Be(e.getAttribute("formenctype"))||Be(a.getAttribute("enctype"))||Fe,s=new FormData(a,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch(e){Ue=!0}return Ue}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(Ve(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Oe,r=null,i=Fe,a=e}var o;return s&&"text/plain"===i&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function He(e){return{__html:e}}function qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ke(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===B(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Ge(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ye(e){return null!=e&&"string"===typeof e.page}function Xe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Qe(e,t,n,r,i,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function $e(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Je(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Ye(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function Ze(e,t){return"lazy"===e.mode&&!0===t}function et(){let e=t.useContext(ee);return qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tt(){let e=t.useContext(te);return qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nt=t.createContext(void 0);function rt(){let e=t.useContext(nt);return qe(e,"You must render this element inside a <HydratedRouter> element"),e}function it(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function st(e,t,n){if(n&&!ct)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}nt.displayName="FrameworkContext";function at(e){let{page:n}=e,r=i(e,d),{router:s}=et(),a=t.useMemo(()=>j(s.routes,n,s.basename),[s.routes,n,s.basename]);return a?t.createElement(lt,c({page:n,matches:a},r)):null}function ot(e){let{manifest:n,routeModules:r}=rt(),[i,s]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,n){return Je((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ge(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Xe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,n,r).then(e=>{t||s(e)}),()=>{t=!0}},[e,n,r]),i}function lt(e){let{page:n,matches:r}=e,s=i(e,h),a=de(),{manifest:o,routeModules:l}=rt(),{basename:u}=et(),{loaderData:d,matches:f}=tt(),m=t.useMemo(()=>Qe(n,r,f,o,a,"data"),[n,r,f,o,a]),p=t.useMemo(()=>Qe(n,r,f,o,a,"assets"),[n,r,f,o,a]),g=t.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{var r;let i=o.routes[n.route.id];i&&i.hasLoader&&(!m.some(e=>e.route.id===n.route.id)&&n.route.id in d&&null!==(r=l[n.route.id])&&void 0!==r&&r.shouldRevalidate||i.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let i=Ke(n,u,"data");return t&&e.size>0&&i.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[u,d,a,o,m,r,n,l]),y=t.useMemo(()=>$e(p,o),[p,o]),v=ot(p);return t.createElement(t.Fragment,null,g.map(e=>t.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},s))),y.map(e=>t.createElement("link",c({key:e,rel:"modulepreload",href:e},s))),v.map(e=>{let{key:n,link:r}=e;return t.createElement("link",c({key:n,nonce:s.nonce},r))}))}var ct=!1;function ut(e){let{manifest:n,serverHandoffString:r,isSpaMode:s,renderMeta:a,routeDiscovery:o,ssr:l}=rt(),{router:d,static:h,staticContext:f}=et(),{matches:m}=tt(),p=t.useContext(ne),g=Ze(o,l);a&&(a.didRenderScripts=!0);let y=st(m,null,s);t.useEffect(()=>{0},[]);let v=t.useMemo(()=>{var s;if(p)return null;let a=f?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==n.hmr&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(y.map((e,t)=>{let r="route".concat(t),i=n.routes[e.route.id];qe(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=i(e,u),s=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(a.pop();a.length>0;)o.push("/".concat(a.join("/"))),a.pop();o.forEach(e=>{let n=j(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let l=[...s].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:He(a),type:void 0})),t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:He(o),type:"module",async:!0})))},[]),x=ct||p?[]:(n.entry.imports.concat($e(y,n,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let w="object"===typeof n.sri?n.sri:{};return Ae(!p,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ct||p?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:w[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:w[n.entry.module],suppressHydrationWarning:!0}),x.map(n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:w[n],suppressHydrationWarning:!0})),v)}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}t.Component;function ht(e){let{error:n,isOutsideRemixApp:r}=e;console.error(n);let i,s=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if($(n))return t.createElement(ft,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),s);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(ft,{title:"Application Error!",isOutsideRemixApp:r},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function ft(e){var n;let{title:r,renderScripts:i,isOutsideRemixApp:s,children:a}=e,{routeModules:o}=rt();return null!==o.root&&void 0!==n&&n.Layout&&!s?a:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,r)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?t.createElement(ut,null):null)))}var mt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{mt&&(window.__reactRouterVersion="7.8.0")}catch(MF){}function pt(e){let{basename:n,children:r,window:i}=e,s=t.useRef();null==s.current&&(s.current=y({window:i,v5Compat:!0}));let a=s.current,[o,l]=t.useState({action:a.action,location:a.location}),c=t.useCallback(e=>{t.startTransition(()=>l(e))},[l]);return t.useLayoutEffect(()=>a.listen(c),[a,c]),t.createElement(Re,{basename:n,children:r,location:o.location,navigationType:o.action,navigator:a})}var gt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yt=t.forwardRef(function(e,n){let r,{onClick:s,discover:a="render",prefetch:o="none",relative:l,reloadDocument:u,replace:d,state:h,target:m,to:p,preventScrollReset:g,viewTransition:y}=e,b=i(e,f),{basename:w}=t.useContext(ae),N="string"===typeof p&&gt.test(p),S=!1;if("string"===typeof p&&N&&(r=p,mt))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),n=B(t.pathname,w);t.origin===e.origin&&null!=n?p=n+t.search+t.hash:S=!0}catch(MF){x(!1,'<Link to="'.concat(p,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let _=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(ue(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=t.useContext(ae),{hash:s,pathname:a,search:o}=ge(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:G([r,a])),i.createHref({pathname:l,search:o,hash:s})}(p,{relative:l}),[j,E,C]=function(e,n){let r=t.useContext(nt),[i,s]=t.useState(!1),[a,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=t.useRef(null);t.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(i){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[i]);let m=()=>{s(!0)},p=()=>{s(!1),o(!1)};return r?"intent"!==e?[a,f,{}]:[a,f,{onFocus:it(l,m),onBlur:it(c,p),onMouseEnter:it(u,m),onMouseLeave:it(d,p),onTouchStart:it(h,m)}]:[!1,f,{}]}(o,b),T=function(e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=me(),c=de(),u=ge(e,{relative:a});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:k(c)===k(u);l(e,{replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,i,n,e,s,a,o])}(p,{replace:d,state:h,target:m,preventScrollReset:g,relative:l,viewTransition:y});let P=t.createElement("a",c(c(c({},b),C),{},{href:r||_,onClick:S||u?s:function(e){s&&s(e),e.defaultPrevented||T(e)},ref:dt(n,E),target:m,"data-discover":N||"render"!==a?void 0:"true"}));return j&&!N?t.createElement(t.Fragment,null,P,t.createElement(at,{page:_})):P});yt.displayName="Link";var vt=t.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:u,viewTransition:d,children:h}=e,f=i(e,m),p=ge(u,{relative:f.relative}),g=de(),y=t.useContext(te),{navigator:x,basename:b}=t.useContext(ae),w=null!=y&&function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.useContext(re);v(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=wt("useViewTransitionState"),s=ge(e,{relative:n});if(!r.isTransitioning)return!1;let a=B(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=B(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=V(s.pathname,o)||null!=V(s.pathname,a)}(p)&&!0===d,k=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,N=g.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(N=N.toLowerCase(),S=S?S.toLowerCase():null,k=k.toLowerCase()),S&&b&&(S=B(S,b)||S);const _="/"!==k&&k.endsWith("/")?k.length-1:k.length;let j,E=N===k||!o&&N.startsWith(k)&&"/"===N.charAt(_),C=null!=S&&(S===k||!o&&S.startsWith(k)&&"/"===S.charAt(k.length)),T={isActive:E,isPending:C,isTransitioning:w},P=E?r:void 0;j="function"===typeof a?a(T):[a,E?"active":null,C?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof l?l(T):l;return t.createElement(yt,c(c({},f),{},{"aria-current":P,className:j,ref:n,style:A,to:u,viewTransition:d}),"function"===typeof h?h(T):h)});vt.displayName="NavLink";var xt=t.forwardRef((e,n)=>{let{discover:r="render",fetcherKey:s,navigate:a,reloadDocument:o,replace:l,state:u,method:d=Oe,action:h,onSubmit:f,relative:m,preventScrollReset:g,viewTransition:y}=e,x=i(e,p),b=St(),w=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=t.useContext(ae),i=t.useContext(le);v(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a=c({},ge(e||".",{relative:n})),o=de();if(null==e){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:G([r,a.pathname]));return k(a)}(h,{relative:m}),N="get"===d.toLowerCase()?"get":"post",S="string"===typeof h&&gt.test(h);return t.createElement("form",c(c({ref:n,method:N,action:w,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;b(t||e.currentTarget,{fetcherKey:s,method:n,navigate:a,replace:l,state:u,relative:m,preventScrollReset:g,viewTransition:y})}},x),{},{"data-discover":S||"render"!==r?void 0:"true"}))});function bt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function wt(e){let n=t.useContext(ee);return v(n,bt(e)),n}xt.displayName="Form";var kt=0,Nt=()=>"__".concat(String(++kt),"__");function St(){let{router:e}=wt("useSubmit"),{basename:n}=t.useContext(ae),r=je("useRouteId");return t.useCallback(async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:o,formData:l,body:c}=We(t,n);if(!1===i.navigate){let t=i.fetcherKey||Nt();await e.fetch(t,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,n,r])}const _t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},jt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_t(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Et;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Et extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ct=function(e){return function(e){const t=_t(e);return jt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Tt=function(e){try{return jt.decodeString(e,!0)}catch(MF){console.error("base64Decode failed: ",MF)}return null};function Pt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const At=()=>{try{return Pt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(MF){return}const t=e&&Tt(e[1]);return t&&JSON.parse(t)})()}catch(MF){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(MF))}},It=e=>{var t;return null===(t=At())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Dt=e=>{const t=It(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Rt=()=>{var e;return null===(e=At())||void 0===e?void 0:e.config},Mt=e=>{var t;return null===(t=At())||void 0===t?void 0:t["_".concat(e)]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ot(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Ft(e){return(await fetch(e,{credentials:"include"})).ok}function Vt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ct(JSON.stringify({alg:"none",type:"JWT"})),Ct(JSON.stringify(s)),""].join(".")}const Ut={};let zt=!1;function Bt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Ot(window.location.host)||Ut[e]===t||Ut[e]||zt)return;function n(e){return"__firebase__banner__".concat(e)}Ut[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ut))Ut[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{zt=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function Wt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ht(){var e;const t=null===(e=At())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(MF){return!1}}function qt(){return!Ht()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kt(){try{return"object"===typeof indexedDB}catch(MF){return!1}}class Gt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}}class Yt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Xt,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Gt(n,s,t)}}const Xt=/\{\$([^}]+)}/g;function Qt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if($t(n)&&$t(s)){if(!Qt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $t(e){return null!==e&&"object"===typeof e}function Jt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Zt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function en(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class tn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=nn),void 0===r.error&&(r.error=nn),void 0===r.complete&&(r.complete=nn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(MF){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(MF){"undefined"!==typeof console&&console.error&&console.error(MF)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nn(){}function rn(e){return e&&e._delegate?e._delegate:e}class sn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const an="[DEFAULT]";class on{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Lt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(MF){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(MF){if(r)return null;throw MF}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:an})}catch(MF){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(MF){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===an?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;return this.component?this.component.multipleInstances?e:an:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ln{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new on(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const cn=[];var un;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(un||(un={}));const dn={debug:un.DEBUG,verbose:un.VERBOSE,info:un.INFO,warn:un.WARN,error:un.ERROR,silent:un.SILENT},hn=un.INFO,fn={[un.DEBUG]:"log",[un.VERBOSE]:"log",[un.INFO]:"info",[un.WARN]:"warn",[un.ERROR]:"error"},mn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=fn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class pn{constructor(e){this.name=e,this._logLevel=hn,this._logHandler=mn,this._userLogHandler=null,cn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in un))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?dn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,un.DEBUG,...t),this._logHandler(this,un.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,un.VERBOSE,...t),this._logHandler(this,un.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,un.INFO,...t),this._logHandler(this,un.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,un.WARN,...t),this._logHandler(this,un.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,un.ERROR,...t),this._logHandler(this,un.ERROR,...t)}}let gn,yn;const vn=new WeakMap,xn=new WeakMap,bn=new WeakMap,wn=new WeakMap,kn=new WeakMap;let Nn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||bn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Sn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(yn||(yn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(En(this),n),jn(vn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return jn(e.apply(En(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(En(this),t,...r);return bn.set(s,t.sort?t.sort():[t]),jn(s)}}function _n(e){return"function"===typeof e?Sn(e):(e instanceof IDBTransaction&&function(e){if(xn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});xn.set(e,t)}(e),t=e,(gn||(gn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Nn):e);var t}function jn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(jn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&vn.set(t,e)}).catch(()=>{}),kn.set(t,e),t}(e);if(wn.has(e))return wn.get(e);const t=_n(e);return t!==e&&(wn.set(e,t),kn.set(t,e)),t}const En=e=>kn.get(e);const Cn=["get","getKey","getAll","getAllKeys","count"],Tn=["put","add","delete","clear"],Pn=new Map;function An(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Pn.get(t))return Pn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Tn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Cn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Pn.set(t,s),s}!function(e){Nn=e(Nn)}(e=>c(c({},e),{},{get:(t,n,r)=>An(t,n)||e.get(t,n,r),has:(t,n)=>!!An(t,n)||e.has(t,n)}));class In{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Dn="@firebase/app",Rn="0.14.1",Mn=new pn("@firebase/app"),Ln="@firebase/app-compat",On="@firebase/analytics-compat",Fn="@firebase/analytics",Vn="@firebase/app-check-compat",Un="@firebase/app-check",zn="@firebase/auth",Bn="@firebase/auth-compat",Wn="@firebase/database",Hn="@firebase/data-connect",qn="@firebase/database-compat",Kn="@firebase/functions",Gn="@firebase/functions-compat",Yn="@firebase/installations",Xn="@firebase/installations-compat",Qn="@firebase/messaging",$n="@firebase/messaging-compat",Jn="@firebase/performance",Zn="@firebase/performance-compat",er="@firebase/remote-config",tr="@firebase/remote-config-compat",nr="@firebase/storage",rr="@firebase/storage-compat",ir="@firebase/firestore",sr="@firebase/ai",ar="@firebase/firestore-compat",or="firebase",lr="[DEFAULT]",cr={[Dn]:"fire-core",[Ln]:"fire-core-compat",[Fn]:"fire-analytics",[On]:"fire-analytics-compat",[Un]:"fire-app-check",[Vn]:"fire-app-check-compat",[zn]:"fire-auth",[Bn]:"fire-auth-compat",[Wn]:"fire-rtdb",[Hn]:"fire-data-connect",[qn]:"fire-rtdb-compat",[Kn]:"fire-fn",[Gn]:"fire-fn-compat",[Yn]:"fire-iid",[Xn]:"fire-iid-compat",[Qn]:"fire-fcm",[$n]:"fire-fcm-compat",[Jn]:"fire-perf",[Zn]:"fire-perf-compat",[er]:"fire-rc",[tr]:"fire-rc-compat",[nr]:"fire-gcs",[rr]:"fire-gcs-compat",[ir]:"fire-fst",[ar]:"fire-fst-compat",[sr]:"fire-vertex","fire-js":"fire-js",[or]:"fire-js-all"},ur=new Map,dr=new Map,hr=new Map;function fr(e,t){try{e.container.addComponent(t)}catch(MF){Mn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),MF)}}function mr(e){const t=e.name;if(hr.has(t))return Mn.debug("There were multiple attempts to register component ".concat(t,".")),!1;hr.set(t,e);for(const n of ur.values())fr(n,e);for(const n of dr.values())fr(n,e);return!0}function pr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function gr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const yr=new Yt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class vr{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const xr="12.1.0";function br(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:lr,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw yr.create("bad-app-name",{appName:String(i)});if(n||(n=Rt()),!n)throw yr.create("no-options");const s=ur.get(i);if(s){if(Qt(n,s.options)&&Qt(r,s.config))return s;throw yr.create("duplicate-app",{appName:i})}const a=new ln(i);for(const l of hr.values())a.addComponent(l);const o=new vr(n,r,a);return ur.set(i,o),o}function wr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr;const t=ur.get(e);if(!t&&e===lr&&Rt())return br();if(!t)throw yr.create("no-app",{appName:e});return t}function kr(e,t,n){var r;let i=null!==(r=cr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Mn.warn(e.join(" "))}mr(new sn("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Nr="firebase-heartbeat-store";let Sr=null;function _r(){return Sr||(Sr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=jn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(jn(a.result),e.oldVersion,e.newVersion,jn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Nr)}catch(MF){console.warn(MF)}}}).catch(e=>{throw yr.create("idb-open",{originalErrorMessage:e.message})})),Sr}async function jr(e,t){try{const n=(await _r()).transaction(Nr,"readwrite"),r=n.objectStore(Nr);await r.put(t,Er(e)),await n.done}catch(MF){if(MF instanceof Gt)Mn.warn(MF.message);else{const t=yr.create("idb-set",{originalErrorMessage:null===MF||void 0===MF?void 0:MF.message});Mn.warn(t.message)}}}function Er(e){return"".concat(e.name,"!").concat(e.options.appId)}class Cr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Tr();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(MF){Mn.warn(MF)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Tr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Ar(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ar(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ct(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(MF){return Mn.warn(MF),""}}}function Tr(){return(new Date).toISOString().substring(0,10)}class Pr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Kt()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await _r()).transaction(Nr),n=await t.objectStore(Nr).get(Er(e));return await t.done,n}catch(MF){if(MF instanceof Gt)Mn.warn(MF.message);else{const t=yr.create("idb-get",{originalErrorMessage:null===MF||void 0===MF?void 0:MF.message});Mn.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return jr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return jr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ar(e){return Ct(JSON.stringify({version:2,heartbeats:e})).length}var Ir;Ir="",mr(new sn("platform-logger",e=>new In(e),"PRIVATE")),mr(new sn("heartbeat",e=>new Cr(e),"PRIVATE")),kr(Dn,Rn,Ir),kr(Dn,Rn,"esm2020"),kr("fire-js","");const Dr=["providerId"],Rr=["uid","auth","stsTokenManager"],Mr=["providerId","signInMethod"];function Lr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Or=Lr,Fr=new Yt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Vr=new pn("@firebase/auth");function Ur(e){if(Vr.logLevel<=un.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Vr.error("Auth (".concat(xr,"): ").concat(e),...n)}}function zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Kr(e,...n)}function Br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Kr(e,...n)}function Wr(e,t,n){const r=c(c({},Or()),{},{[t]:n});return new Yt("auth","Firebase",r).create(t,{appName:e.name})}function Hr(e){return Wr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&zr(e,"argument-error"),Wr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Kr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Fr.create(e,...n)}function Gr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Kr(t,...r)}}function Yr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ur(t),new Error(t)}function Xr(e,t){e||Yr(t)}function Qr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function $r(){return"http:"===Jr()||"https:"===Jr()}function Jr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Zr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&($r()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ei{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Zr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ti(e,t){Xr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ni{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ri={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ii=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],si=new ei(3e4,6e4);function ai(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function oi(e,t,n,r){return li(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=Jt(c({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Ot(e.emulatorConfig.host)&&(l.credentials="include"),ni.fetch()(await ui(e,e.config.apiHost,n,a),l)})}async function li(e,t,n){e._canInitEmulator=!1;const r=c(c({},ri),t);try{const t=new hi(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw fi(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw fi(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw fi(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw fi(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Wr(e,o,a);zr(e,o)}}catch(MF){if(MF instanceof Gt)throw MF;zr(e,"network-request-failed",{message:String(MF)})}}async function ci(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await oi(e,t,n,r,i);return"mfaPendingCredential"in s&&zr(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function ui(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?ti(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(ii.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function di(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hi{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Br(this.auth,"network-request-failed")),si.get())})}}function fi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Br(e,t,r);return i.customData._tokenResponse=n,i}function mi(e){return void 0!==e&&void 0!==e.enterprise}class pi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return di(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gi(e,t){return oi(e,"GET","/v2/recaptchaConfig",ai(e,t))}async function yi(e,t){return oi(e,"POST","/v1/accounts:lookup",t)}function vi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(MF){}}function xi(e){return 1e3*Number(e)}function bi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ur("JWT malformed, contained fewer than 3 sections"),null;try{const e=Tt(n);return e?JSON.parse(e):(Ur("Failed to decode base64 JWT payload"),null)}catch(MF){return Ur("Caught error parsing JWT payload as JSON",null===MF||void 0===MF?void 0:MF.toString()),null}}function wi(e){const t=bi(e);return Gr(t,"internal-error"),Gr("undefined"!==typeof t.exp,"internal-error"),Gr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ki(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(MF){throw MF instanceof Gt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(MF)&&e.auth.currentUser===e&&await e.auth.signOut(),MF}}class Ni{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(MF){return void((null===MF||void 0===MF?void 0:MF.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Si{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vi(this.lastLoginAt),this.creationTime=vi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _i(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ki(e,yi(n,{idToken:r}));Gr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?ji(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Si(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function ji(e){return e.map(e=>{let{providerId:t}=e,n=i(e,Dr);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Gr(e.idToken,"internal-error"),Gr("undefined"!==typeof e.idToken,"internal-error"),Gr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):wi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Gr(0!==e.length,"internal-error");const t=wi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Gr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await li(e,{},async()=>{const n=Jt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await ui(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&Ot(e.emulatorConfig.host)&&(o.credentials="include"),ni.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ei;return n&&(Gr("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Gr("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Gr("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return Yr("not implemented")}}function Ci(e,t){Gr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ti{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=i(e,Rr);this.providerId="firebase",this.proactiveRefresh=new Ni(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Si(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ki(this,this.stsTokenManager.getToken(this.auth,e));return Gr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=rn(e),r=await n.getIdToken(t),i=bi(r);Gr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:vi(xi(i.auth_time)),issuedAtTime:vi(xi(i.iat)),expirationTime:vi(xi(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=rn(e);await _i(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Gr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ti(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Gr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await _i(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(Hr(this.auth));const e=await this.getIdToken();return await ki(this,async function(e,t){return oi(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,m=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:x,emailVerified:b,isAnonymous:w,providerData:k,stsTokenManager:N}=t;Gr(x&&N,e,"internal-error");const S=Ei.fromJSON(this.name,N);Gr("string"===typeof x,e,"internal-error"),Ci(d,e.name),Ci(h,e.name),Gr("boolean"===typeof b,e,"internal-error"),Gr("boolean"===typeof w,e,"internal-error"),Ci(f,e.name),Ci(m,e.name),Ci(p,e.name),Ci(g,e.name),Ci(y,e.name),Ci(v,e.name);const _=new Ti({uid:x,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:w,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:S,createdAt:y,lastLoginAt:v});return k&&Array.isArray(k)&&(_.providerData=k.map(e=>c({},e))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ei;r.updateFromServerResponse(t);const i=new Ti({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await _i(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Gr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ji(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new Ei;a.updateFromIdToken(n);const o=new Ti({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Si(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const Pi=new Map;function Ai(e){Xr(e instanceof Function,"Expected a class definition");let t=Pi.get(e);return t?(Xr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Pi.set(e,t),t)}class Ii{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ii.type="NONE";const Di=Ii;function Ri(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Mi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ri(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ri("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await yi(this.auth,{idToken:e}).catch(()=>{});return t?Ti._fromGetAccountInfoResponse(this.auth,t,e):null}return Ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Mi(Ai(Di),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Ai(Di);const s=Ri(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await yi(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Ti._fromGetAccountInfoResponse(e,r,t)}else n=Ti._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new Mi(i,e,n)):new Mi(i,e,n)}}function Li(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ui(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Oi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Bi(t))return"Blackberry";if(Wi(t))return"Webos";if(Fi(t))return"Safari";if((t.includes("chrome/")||Vi(t))&&!t.includes("edge/"))return"Chrome";if(zi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/firefox\//i.test(e)}function Fi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/crios\//i.test(e)}function Ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/iemobile/i.test(e)}function zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/android/i.test(e)}function Bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/blackberry/i.test(e)}function Wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/webos/i.test(e)}function Hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function qi(){return function(){const e=Wt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return Hi(e)||zi(e)||Wi(e)||Bi(e)||/windows phone/i.test(e)||Ui(e)}function Gi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Li(Wt());break;case"Worker":t="".concat(Li(Wt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xr,"/").concat(r)}class Yi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(MF){r(MF)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(MF){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===MF||void 0===MF?void 0:MF.message})}}}class Xi{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Qi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ji(this),this.idTokenSubscription=new Ji(this),this.beforeStateQueue=new Yi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ai(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Mi.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(MF){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await yi(this,{idToken:e}),n=await Ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(s=n)||void 0===s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(MF){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(MF))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Gr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(MF){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _i(e)}catch(MF){if((null===MF||void 0===MF?void 0:MF.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(Hr(this));const t=e?rn(e):null;return t&&Gr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Gr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(Hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(Hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return oi(e,"GET","/v2/passwordPolicy",ai(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Xi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return oi(e,"POST","/v2/accounts:revokeToken",ai(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ai(e)||this._popupRedirectResolver;Gr(t,this,"argument-error"),this.redirectPersistenceManager=await Mi.create(this,[Ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gr(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Gr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Vr.logLevel<=un.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Vr.warn("Auth (".concat(xr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function $i(e){return rn(e)}class Ji{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new tn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Gr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function es(e){return Zi.loadJS(e)}function ts(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ns{constructor(){this.enterprise=new rs}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rs{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const is="NO_RECAPTCHA";class ss{constructor(e){this.type="recaptcha-enterprise",this.auth=$i(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;mi(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(is)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new ns).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{gi(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new pi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&mi(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Zi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),es(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function as(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new ss(e);let a;if(i)a=is;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function os(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await as(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await as(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await as(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await as(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await as(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function ls(e){const t=$i(e),n=await gi(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new pi(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new ss(t).verify()}}function cs(e,t,n){const r=$i(e);Gr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=us(t),{host:a,port:o}=function(e){const t=us(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ds(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ds(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(s,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Gr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Gr(Qt(c,r.config.emulator)&&Qt(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ot(a)?(Ft("".concat(s,"//").concat(a).concat(l)),Bt("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function us(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ds(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class hs{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,t){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function fs(e,t){return oi(e,"POST","/v1/accounts:signUp",t)}async function ms(e,t){return ci(e,"POST","/v1/accounts:signInWithPassword",ai(e,t))}async function ps(e,t){return oi(e,"POST","/v1/accounts:sendOobCode",ai(e,t))}async function gs(e,t){return ps(e,t)}class ys extends hs{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ys(e,t,"password")}static _fromEmailAndCode(e,t){return new ys(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return os(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ms,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ci(e,"POST","/v1/accounts:signInWithEmailLink",ai(e,t))}(e,{email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return os(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fs,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ci(e,"POST","/v1/accounts:signInWithEmailLink",ai(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function vs(e,t){return ci(e,"POST","/v1/accounts:signInWithIdp",ai(e,t))}class xs extends hs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=i(t,Mr);if(!n||!r)return null;const a=new xs(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return vs(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,vs(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jt(t)}return e}}async function bs(e,t){return oi(e,"POST","/v1/accounts:sendVerificationCode",ai(e,t))}const ws={USER_NOT_FOUND:"user-not-found"};class ks extends hs{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ks({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ks({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ci(e,"POST","/v1/accounts:signInWithPhoneNumber",ai(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ci(e,"POST","/v1/accounts:signInWithPhoneNumber",ai(e,t));if(n.temporaryProof)throw fi(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ci(e,"POST","/v1/accounts:signInWithPhoneNumber",ai(e,c(c({},t),{},{operation:"REAUTH"})),ws)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ks({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ns{constructor(e){var t,n,r,i,s,a;const o=Zt(en(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Gr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Zt(en(e)).link,n=t?Zt(en(t)).deep_link_id:null,r=Zt(en(e)).deep_link_id;return(r?Zt(en(r)).link:null)||r||n||t||e}(e);try{return new Ns(t)}catch(n){return null}}}class Ss{constructor(){this.providerId=Ss.PROVIDER_ID}static credential(e,t){return ys._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ns.parseLink(t);return Gr(n,"argument-error"),ys._fromEmailAndCode(e,n.code,n.tenantId)}}Ss.PROVIDER_ID="password",Ss.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ss.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _s{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class js extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Es extends js{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Es.credential(t.oauthAccessToken)}catch(n){return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com",Es.PROVIDER_ID="facebook.com";class Cs extends js{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xs._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Cs.credential(n,r)}catch(i){return null}}}Cs.GOOGLE_SIGN_IN_METHOD="google.com",Cs.PROVIDER_ID="google.com";class Ts extends js{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ts.credential(t.oauthAccessToken)}catch(n){return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com",Ts.PROVIDER_ID="github.com";class Ps extends js{constructor(){super("twitter.com")}static credential(e,t){return xs._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ps.credential(n,r)}catch(i){return null}}}async function As(e,t){return ci(e,"POST","/v1/accounts:signUp",ai(e,t))}Ps.TWITTER_SIGN_IN_METHOD="twitter.com",Ps.PROVIDER_ID="twitter.com";class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ti._fromIdTokenResponse(e,n,r),s=Ds(n);return new Is({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ds(n);return new Is({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ds(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Rs extends Gt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Rs.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Rs(e,t,n,r)}}function Ms(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Rs._fromErrorAndOperation(e,n,t,r);throw n})}async function Ls(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ki(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Is._forOperation(e,"link",r)}async function Os(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(gr(r.app))return Promise.reject(Hr(r));const i="reauthenticate";try{const s=await ki(e,Ms(r,i,t,e),n);Gr(s.idToken,r,"internal-error");const a=bi(s.idToken);Gr(a,r,"internal-error");const{sub:o}=a;return Gr(e.uid===o,r,"user-mismatch"),Is._forOperation(e,i,s)}catch(MF){throw(null===MF||void 0===MF?void 0:MF.code)==="auth/".concat("user-not-found")&&zr(r,"user-mismatch"),MF}}async function Fs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(gr(e.app))return Promise.reject(Hr(e));const r="signIn",i=await Ms(e,r,t),s=await Is._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Vs(e,t){return Fs($i(e),t)}function Us(e,t,n){var r;Gr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Gr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Gr("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Gr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Gr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function zs(e){const t=$i(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Bs(e,t){const n=rn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Us(n.auth,r,t);const{email:i}=await async function(e,t){return ps(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Ws(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=rn(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await ki(i,async function(e,t){return oi(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function Hs(e,t){return oi(e,"POST","/v2/accounts/mfaEnrollment:start",ai(e,t))}new WeakMap;const qs="__sak";class Ks{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qs,"1"),this.storage.removeItem(qs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Gs extends Ks{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ki(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);qi()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gs.type="LOCAL";const Ys=Gs;function Xs(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Qs(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class $s{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Qs(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Xs(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Qs(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Qs(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Xs(n);const i=setInterval(()=>{const e=Xs(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}$s.type="COOKIE";class Js extends Ks{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Js.type="SESSION";const Zs=Js;class ea{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ea(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ea.receivers=[];class na{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=ta("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function ra(){return window}function ia(){return"undefined"!==typeof ra().WorkerGlobalScope&&"function"===typeof ra().importScripts}const sa="firebaseLocalStorageDb",aa="firebaseLocalStorage",oa="fbase_key";class la{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ca(e,t){return e.transaction([aa],t?"readwrite":"readonly").objectStore(aa)}function ua(){const e=indexedDB.open(sa,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(aa,{keyPath:oa})}catch(MF){n(MF)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(aa)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(sa);return new la(e).toPromise()}(),t(await ua()))})})}async function da(e,t,n){const r=ca(e,!0).put({[oa]:t,value:n});return new la(r).toPromise()}function ha(e,t){const n=ca(e,!0).delete(t);return new la(n).toPromise()}class fa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ua()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(MF){if(t++>3)throw MF;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ia()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ea._getInstance(ia()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new na(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ua();return await da(e,qs,"1"),await ha(e,qs),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>da(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=ca(e,!1).get(t),r=await new la(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ha(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=ca(e,!1).getAll();return new la(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}fa.type="LOCAL";const ma=fa;function pa(e,t){return oi(e,"POST","/v2/accounts/mfaSignIn:start",ai(e,t))}ts("rcb"),new ei(3e4,6e4);const ga="recaptcha";async function ya(e,t,n){if(!e._getRecaptchaConfig())try{await ls(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Gr("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=os(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===is){Gr((null===n||void 0===n?void 0:n.type)===ga,e,"argument-error");return Hs(e,await va(e,t,n))}return Hs(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Gr("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Gr(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=os(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===is){Gr((null===n||void 0===n?void 0:n.type)===ga,e,"argument-error");return pa(e,await va(e,t,n))}return pa(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=os(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===is){Gr((null===n||void 0===n?void 0:n.type)===ga,e,"argument-error");return bs(e,await va(e,t,n))}return bs(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function va(e,t,n){Gr(n.type===ga,e,"argument-error");const r=await n.verify();Gr("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class xa{constructor(e){this.providerId=xa.PROVIDER_ID,this.auth=$i(e)}verifyPhoneNumber(e,t){return ya(this.auth,e,rn(t))}static credential(e,t){return ks._fromVerification(e,t)}static credentialFromResult(e){const t=e;return xa.credentialFromTaggedObject(t)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ks._fromTokenResponse(n,r):null}}function ba(e,t){return t?Ai(t):(Gr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}xa.PROVIDER_ID="phone",xa.PHONE_SIGN_IN_METHOD="phone";class wa extends hs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ka(e){return Fs(e.auth,new wa(e),e.bypassAuthState)}function Na(e){const{auth:t,user:n}=e;return Gr(n,t,"internal-error"),Os(n,new wa(e),e.bypassAuthState)}async function Sa(e){const{auth:t,user:n}=e;return Gr(n,t,"internal-error"),Ls(n,new wa(e),e.bypassAuthState)}class _a{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(MF){this.reject(MF)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(MF){this.reject(MF)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ka;case"linkViaPopup":case"linkViaRedirect":return Sa;case"reauthViaPopup":case"reauthViaRedirect":return Na;default:zr(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ja=new ei(2e3,1e4);class Ea extends _a{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ea.currentPopupAction&&Ea.currentPopupAction.cancel(),Ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Gr(e,this.auth,"internal-error"),e}async onExecution(){Xr(1===this.filter.length,"Popup operations only handle one event");const e=ta();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ja.get())};e()}}Ea.currentPopupAction=null;const Ca=new Map;class Ta extends _a{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ca.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ia(t),r=Aa(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(MF){e=()=>Promise.reject(MF)}Ca.set(this.auth._key(),e)}return this.bypassAuthState||Ca.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Pa(e,t){Ca.set(e._key(),t)}function Aa(e){return Ai(e._redirectPersistence)}function Ia(e){return Ri("pendingRedirect",e.config.apiKey,e.name)}async function Da(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(gr(e.app))return Promise.reject(Hr(e));const r=$i(e),i=ba(r,t),s=new Ta(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ra{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return La(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!La(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Br(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ma(e))}saveEventToCache(e){this.cachedEventUids.add(Ma(e)),this.lastProcessedEventTime=Date.now()}}function Ma(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function La(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Oa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fa=/^https?/;async function Va(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return oi(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ua(r))return}catch(n){}zr(e,"unauthorized-domain")}function Ua(e){const t=Qr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Fa.test(n))return!1;if(Oa.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const za=new ei(3e4,6e4);function Ba(){const e=ra().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Wa(e){return new Promise((t,n)=>{var r,i;function s(){Ba(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ba(),n(Br(e,"network-request-failed"))},timeout:za.get()})}if(null!==(r=ra().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=ra().gapi)||void 0===i||!i.load){const t=ts("iframefcb");return ra()[t]=()=>{gapi.load?s():n(Br(e,"network-request-failed"))},es("".concat(Zi.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Ha=null,e})}let Ha=null;const qa=new ei(5e3,15e3),Ka={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ga=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ya(e){const t=e.config;Gr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ti(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:xr},i=Ga.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Jt(r).slice(1))}async function Xa(e){const t=await function(e){return Ha=Ha||Wa(e),Ha}(e),n=ra().gapi;return Gr(n,e,"internal-error"),t.open({where:document.body,url:Ya(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ka,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Br(e,"network-request-failed"),s=ra().setTimeout(()=>{r(i)},qa.get());function a(){ra().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Qa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $a{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(MF){}}}function Ja(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=c(c({},Qa),{},{width:r.toString(),height:i.toString(),top:s,left:a}),u=Wt().toLowerCase();n&&(o=Vi(u)?"_blank":n),Oi(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Hi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new $a(null);const h=window.open(t||"",o,d);Gr(h,e,"popup-blocked");try{h.focus()}catch(MF){}return new $a(h)}const Za="__/auth/handler",eo="emulator/auth/handler",to=encodeURIComponent("fac");async function no(e,t,n,r,i,s){Gr(e.config.authDomain,e,"auth-domain-config-required"),Gr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xr,eventId:i};if(t instanceof _s){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof js){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(to,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Za);return ti(t,eo)}(e),"?").concat(Jt(o).slice(1)).concat(c)}const ro="webStorageSupport";const io=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zs,this._completeRedirectFn=Da,this._overrideRedirectResult=Pa}async _openPopup(e,t,n,r){var i;Xr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ja(e,await no(e,t,n,Qr(),r),ta())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ra().location.href=e}(await no(e,t,n,Qr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Xr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Xa(e),n=new Ra(e);return t.register("authEvent",t=>{Gr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ro,{type:ro},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[ro];void 0!==i&&t(!!i),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Va(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ki()||Fi()||Hi()}};var so="@firebase/auth",ao="1.11.0";class oo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Gr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const lo=Mt("authIdTokenMaxAge")||300;let co=null;var uo,ho;uo={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Br("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Zi=uo,ho="Browser",mr(new sn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Gr(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:ho,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gi(ho)},c=new Qi(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ai);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),mr(new sn("auth-internal",e=>(e=>new oo(e))($i(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),kr(so,ao,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ho)),kr(so,ao,"esm2020");var fo,mo,po="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},go={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new p(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new p(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),p=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,m(n,2*i+2*s),n[2*i+2*s+1]+=l*g,m(n,2*i+2*s+1),n[2*i+2*s+1]+=f*p,m(n,2*i+2*s+1),n[2*i+2*s+2]+=l*p,m(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,mo=go.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},fo=go.Integer=r}).apply("undefined"!==typeof po?po:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var yo,vo,xo,bo,wo,ko,No,So,_o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},jo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof _o&&_o];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function N(e){i.setTimeout(()=>{throw e},0)}function S(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new j,e=>e.reset());class j{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let E,C=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);E=()=>{e.then(A)}};var A=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){N(n)}var t=_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function I(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.s=!1,I.prototype.ma=function(){this.s||(this.s=!0,this.N())},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}d(M,D);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var O="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=W(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function K(e,t,n,r,i){if(r&&r.once)return Y(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[O]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Y(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);return null}return n=te(n),e&&e[O]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function X(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)X(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[O]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,i)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[O])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function $(e){return e in q?q[e]:q[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){I.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;w(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,I),ne.prototype[O]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends I{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){I.call(this),this.h=e,this.g={}}d(le,I);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Q(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function xe(){D.call(this,"c")}d(ve,D),d(xe,D);var be={},we=null;function ke(){return we=we||new ne}function Ne(e){D.call(this,be.La,e)}function Se(e){const t=ke();re(t,new Ne(t))}function _e(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function je(e){const t=ke();re(t,new _e(t,e))}function Ee(e,t){D.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Te(){this.g=!0}function Pe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",d(Ne,D),be.STAT_EVENT="statevent",d(_e,D),be.Ma="timingevent",d(Ee,D),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ae,Ie={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Re,me),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Oe={},Fe={};function Ve(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),We(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Oe:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Qt(n)}rn(n),je(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!m(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(qe(o),We(o)),r.g=a}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Xt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=h||7==t||Se(),qe(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var s=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,je(12),Ge(this),Ke(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,je(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Oe){this.s=4,je(15),Pe(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Ye(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,je(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,je(11))}}else Pe(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Pe(this.i,this.l,o,null),Ye(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),Ge(this),Ke(this)}}}catch(h){}},Me.prototype.cancel=function(){this.J=!0,Ge(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),je(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Xe=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Nt(this,t),_t(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,xt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var pt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,xt=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Nt(e,t){kt(e),t=jt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return kt(e),t=jt(e,t),e.g.has(t)}function _t(e,t,n){Nt(e,t),0<n.length&&(e.i=null,e.g.set(jt(e,t),h(n)),e.h+=n.length)}function jt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function Tt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(MF){throw t.push(r+"type="+encodeURIComponent("_badmap")),MF}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function It(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ot(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){kt(this),this.i=null,e=jt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(jt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,St(this,e=jt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(Pt,me),Pt.prototype.g=function(){return new At(this.l,this.j)},Pt.prototype.i=(pt={},function(){return pt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;It(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Rt(this),3==this.readyState&&It(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Ot,ne);var Ft=/^https?$/i,Vt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Wt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{Wt(e)}}}function Wt(e,t){if(e.g){Ht(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(MF){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Xt(e){if($t(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Me(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}dn(e)}function Qt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function $t(e){Qt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;E||P(),C||(E(),C=!0),T.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Tt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;E||P(),C||(E(),C=!0),T.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ue(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=ke(),new Ee(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Te;if(i.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else je(2);e.G=0,e.l&&e.l.sa(t),dn(e),$t(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ot(new Pt({eb:n})):new Ot(e.pa)).Ha(e.J),t}function mn(){}function pn(){}function gn(e,t){ne.call(this),this.g=new Yt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){xe.call(this),this.status=1}function xn(e){this.g=e}(e=Ot.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ut(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Ut(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Wt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wt(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Yt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){je(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=x(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||$e(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),Qt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Qt(this),rn(this),je(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=mn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Xt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Xe(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,xe),d(xn,mn),xn.prototype.ua=function(){re(this.g,"a")},xn.prototype.ta=function(e){re(this.g,new yn(e))},xn.prototype.sa=function(e){re(this.g,new vn)},xn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,So=jo.createWebChannelTransport=function(){return new pn},No=jo.getStatEventTarget=function(){return ke()},ko=jo.Event=be,wo=jo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,bo=jo.ErrorCode=Ie,De.COMPLETE="complete",xo=jo.EventType=De,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,vo=jo.WebChannel=ge,jo.FetchXmlHttpFactory=Pt,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,yo=jo.XhrIo=Ot}).apply("undefined"!==typeof _o?_o:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Eo="@firebase/firestore",Co="4.9.0";class To{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}To.UNAUTHENTICATED=new To(null),To.GOOGLE_CREDENTIALS=new To("google-credentials-uid"),To.FIRST_PARTY=new To("first-party-uid"),To.MOCK_USER=new To("mock-user");let Po="12.0.0";const Ao=new pn("@firebase/firestore");function Io(){return Ao.logLevel}function Do(e){if(Ao.logLevel<=un.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Lo);Ao.debug("Firestore (".concat(Po,"): ").concat(e),...i)}}function Ro(e){if(Ao.logLevel<=un.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Lo);Ao.error("Firestore (".concat(Po,"): ").concat(e),...i)}}function Mo(e){if(Ao.logLevel<=un.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Lo);Ao.warn("Firestore (".concat(Po,"): ").concat(e),...i)}}function Lo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Oo(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Fo(e,r,n)}function Fo(e,t,n){let r="FIRESTORE (".concat(Po,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Ro(r),new Error(r)}function Vo(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Fo(t,i,r)}function Uo(e,t){return e}const zo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bo extends Gt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Wo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ho{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class qo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(To.UNAUTHENTICATED))}shutdown(){}}class Ko{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Go{constructor(e){this.t=e,this.currentUser=To.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Vo(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wo,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Do("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Do("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wo)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Do("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Vo("string"==typeof t.accessToken,31837,{l:t}),new Ho(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vo(null===e||"string"==typeof e,2055,{h:e}),new To(e)}}class Yo{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=To.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xo{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Yo(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(To.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $o{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Vo(void 0===this.o,3512);const n=e=>{null!=e.error&&Do("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Do("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Do("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Do("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qo(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Vo("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Qo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Jo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Zo{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Jo(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function el(e,t){return e<t?-1:e>t?1:0}function tl(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return il(n)===il(i)?el(n,i):il(n)?1:-1}return el(e.length,t.length)}const nl=55296,rl=57343;function il(e){const t=e.charCodeAt(0);return t>=nl&&t<=rl}function sl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const al="__name__";class ol{constructor(e,t,n){void 0===t?t=0:t>e.length&&Oo(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Oo(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ol.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ol?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ol.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return el(e.length,t.length)}static compareSegments(e,t){const n=ol.isNumericId(e),r=ol.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ol.extractNumericId(e).compare(ol.extractNumericId(t)):tl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fo.fromString(e.substring(4,e.length-2))}}class ll extends ol{construct(e,t,n){return new ll(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Bo(zo.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new ll(e)}static emptyPath(){return new ll([])}}const cl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ul extends ol{construct(e,t,n){return new ul(e,t,n)}static isValidIdentifier(e){return cl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ul.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===al}static keyField(){return new ul([al])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Bo(zo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Bo(zo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Bo(zo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Bo(zo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ul(t)}static emptyPath(){return new ul([])}}class dl{constructor(e){this.path=e}static fromPath(e){return new dl(ll.fromString(e))}static fromName(e){return new dl(ll.fromString(e).popFirst(5))}static empty(){return new dl(ll.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ll.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ll.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dl(new ll(e.slice()))}}function hl(e,t,n){if(!n)throw new Bo(zo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fl(e){if(!dl.isDocumentKey(e))throw new Bo(zo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ml(e){if(dl.isDocumentKey(e))throw new Bo(zo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function pl(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function gl(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Oo(12329,{type:typeof e})}function yl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Bo(zo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gl(e);throw new Bo(zo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function vl(e,t){const n={typeString:e};return t&&(n.value=t),n}function xl(e,t){if(!pl(e))throw new Bo(zo.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Bo(zo.INVALID_ARGUMENT,n);return!0}const bl=-62135596800,wl=1e6;class kl{static now(){return kl.fromMillis(Date.now())}static fromDate(e){return kl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*wl);return new kl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Bo(zo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Bo(zo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bl)throw new Bo(zo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Bo(zo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wl}_compareTo(e){return this.seconds===e.seconds?el(this.nanoseconds,e.nanoseconds):el(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xl(e,kl._jsonSchema))return new kl(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kl._jsonSchemaVersion="firestore/timestamp/1.0",kl._jsonSchema={type:vl("string",kl._jsonSchemaVersion),seconds:vl("number"),nanoseconds:vl("number")};class Nl{static fromTimestamp(e){return new Nl(e)}static min(){return new Nl(new kl(0,0))}static max(){return new Nl(new kl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Sl=-1;class _l{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}_l.UNKNOWN_ID=-1;function jl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Nl.fromTimestamp(1e9===r?new kl(n+1,0):new kl(n,r));return new Cl(i,dl.empty(),t)}function El(e){return new Cl(e.readTime,e.key,Sl)}class Cl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Cl(Nl.min(),dl.empty(),Sl)}static max(){return new Cl(Nl.max(),dl.empty(),Sl)}}function Tl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=dl.comparator(e.documentKey,t.documentKey),0!==n?n:el(e.largestBatchId,t.largestBatchId))}const Pl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Al{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Il(e){if(e.code!==zo.FAILED_PRECONDITION||e.message!==Pl)throw e;Do("LocalStore","Unexpectedly lost primary lease")}class Dl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oo(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Dl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Dl?t:Dl.resolve(t)}catch(e){return Dl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Dl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Dl.reject(t)}static resolve(e){return new Dl((t,n)=>{t(e)})}static reject(e){return new Dl((t,n)=>{n(e)})}static waitFor(e){return new Dl((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Dl.resolve(!1);for(const n of e)t=t.next(e=>e?Dl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Dl((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Dl((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Rl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ml(e){return"IndexedDbTransactionError"===e.name}class Ll{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ll.ce=-1;const Ol=-1;function Fl(e){return null==e}function Vl(e){return 0===e&&1/e==-1/0}function Ul(e){return"number"==typeof e&&Number.isInteger(e)&&!Vl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const zl="\x01";function Bl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Hl(t)),t=Wl(e.get(n),t);return Hl(t)}function Wl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case zl:n+="\x01\x11";break;default:n+=t}}return n}function Hl(e){return e+zl+"\x01"}const ql="remoteDocuments",Kl="owner",Gl="mutationQueues",Yl="mutations";const Xl="documentMutations",Ql="remoteDocumentsV14",$l="remoteDocumentGlobal",Jl="targets",Zl="targetDocuments",ec="targetGlobal",tc="collectionParents",nc="clientMetadata",rc="bundles",ic="namedQueries",sc="indexConfiguration",ac="indexState",oc="indexEntries",lc="documentOverlays",cc="globals",uc=[Gl,Yl,Xl,ql,Jl,Kl,ec,Zl,nc,$l,tc,rc,ic],dc=[Gl,Yl,Xl,Ql,Jl,Kl,ec,Zl,nc,$l,tc,rc,ic,lc],hc=dc,fc=[...hc,sc,ac,oc];function mc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function pc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function gc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class yc{constructor(e,t){this.comparator=e,this.root=t||xc.EMPTY}insert(e,t){return new yc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xc.BLACK,null,null))}remove(e){return new yc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vc(this.root,e,this.comparator,!0)}}class vc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:xc.RED,this.left=null!=r?r:xc.EMPTY,this.right=null!=i?i:xc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new xc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return xc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oo(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oo(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oo(27949);return e+(this.isRed()?0:1)}}xc.EMPTY=null,xc.RED=!0,xc.BLACK=!1,xc.EMPTY=new class{constructor(){this.size=0}get key(){throw Oo(57766)}get value(){throw Oo(16141)}get color(){throw Oo(16727)}get left(){throw Oo(29726)}get right(){throw Oo(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new xc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bc{constructor(e){this.comparator=e,this.data=new yc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wc(this.data.getIterator())}getIteratorFrom(e){return new wc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof bc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bc(this.comparator);return t.data=e,t}}class wc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class kc{constructor(e){this.fields=e,e.sort(ul.comparator)}static empty(){return new kc([])}unionWith(e){let t=new bc(ul.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new kc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Nc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Nc("Invalid base64 string: "+e):e}}(e);return new Sc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Sc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return el(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sc.EMPTY_BYTE_STRING=new Sc("");const _c=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jc(e){if(Vo(!!e,39018),"string"==typeof e){let t=0;const n=_c.exec(e);if(Vo(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ec(e.seconds),nanos:Ec(e.nanos)}}function Ec(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Cc(e){return"string"==typeof e?Sc.fromBase64String(e):Sc.fromUint8Array(e)}const Tc="server_timestamp",Pc="__type__",Ac="__previous_value__",Ic="__local_write_time__";function Dc(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Pc])||void 0===t?void 0:t.stringValue)===Tc}function Rc(e){const t=e.mapValue.fields[Ac];return Dc(t)?Rc(t):t}function Mc(e){const t=jc(e.mapValue.fields[Ic].timestampValue);return new kl(t.seconds,t.nanos)}class Lc{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Oc="(default)";class Fc{constructor(e,t){this.projectId=e,this.database=t||Oc}static empty(){return new Fc("","")}get isDefaultDatabase(){return this.database===Oc}isEqual(e){return e instanceof Fc&&e.projectId===this.projectId&&e.database===this.database}}const Vc="__type__",Uc="__max__",zc={mapValue:{fields:{__type__:{stringValue:Uc}}}},Bc="__vector__",Wc="value";function Hc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Dc(e)?4:ou(e)?9007199254740991:su(e)?10:11:Oo(28295,{value:e})}function qc(e,t){if(e===t)return!0;const n=Hc(e);if(n!==Hc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Mc(e).isEqual(Mc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=jc(e.timestampValue),r=jc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Cc(e.bytesValue).isEqual(Cc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ec(e.geoPointValue.latitude)===Ec(t.geoPointValue.latitude)&&Ec(e.geoPointValue.longitude)===Ec(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ec(e.integerValue)===Ec(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ec(e.doubleValue),r=Ec(t.doubleValue);return n===r?Vl(n)===Vl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sl(e.arrayValue.values||[],t.arrayValue.values||[],qc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(mc(n)!==mc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qc(n[i],r[i])))return!1;return!0}(e,t);default:return Oo(52216,{left:e})}}function Kc(e,t){return void 0!==(e.values||[]).find(e=>qc(e,t))}function Gc(e,t){if(e===t)return 0;const n=Hc(e),r=Hc(t);if(n!==r)return el(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return el(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ec(e.integerValue||e.doubleValue),r=Ec(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Yc(e.timestampValue,t.timestampValue);case 4:return Yc(Mc(e),Mc(t));case 5:return tl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Cc(e),r=Cc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=el(n[i],r[i]);if(0!==e)return e}return el(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=el(Ec(e.latitude),Ec(t.latitude));return 0!==n?n:el(Ec(e.longitude),Ec(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Xc(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const a=e.fields||{},o=t.fields||{},l=null===(n=a[Wc])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Wc])||void 0===r?void 0:r.arrayValue,u=el((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Xc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===zc.mapValue&&t===zc.mapValue)return 0;if(e===zc.mapValue)return 1;if(t===zc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=tl(r[a],s[a]);if(0!==e)return e;const t=Gc(n[r[a]],i[s[a]]);if(0!==t)return t}return el(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Oo(23264,{he:n})}}function Yc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return el(e,t);const n=jc(e),r=jc(t),i=el(n.seconds,r.seconds);return 0!==i?i:el(n.nanos,r.nanos)}function Xc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Gc(n[i],r[i]);if(e)return e}return el(n.length,r.length)}function Qc(e){return $c(e)}function $c(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=jc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Cc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return dl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$c(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat($c(e.fields[i]));return n+"}"}(e.mapValue):Oo(61005,{value:e})}function Jc(e){switch(Hc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Rc(e);return t?16+Jc(t):16;case 5:return 2*e.stringValue.length;case 6:return Cc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Jc(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return pc(e.fields,(e,n)=>{t+=e.length+Jc(n)}),t}(e.mapValue);default:throw Oo(13486,{value:e})}}function Zc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function eu(e){return!!e&&"integerValue"in e}function tu(e){return!!e&&"arrayValue"in e}function nu(e){return!!e&&"nullValue"in e}function ru(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function iu(e){return!!e&&"mapValue"in e}function su(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Vc])||void 0===t?void 0:t.stringValue)===Bc}function au(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return pc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=au(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=au(e.arrayValue.values[n]);return t}return c({},e)}function ou(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Uc}class lu{constructor(e){this.value=e}static empty(){return new lu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!iu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=ul.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=au(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());iu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];iu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){pc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new lu(au(this.value))}}function cu(e){const t=[];return pc(e.fields,(e,n)=>{const r=new ul([e]);if(iu(n)){const e=cu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new kc(t)}class uu{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new uu(e,0,Nl.min(),Nl.min(),Nl.min(),lu.empty(),0)}static newFoundDocument(e,t,n,r){return new uu(e,1,t,Nl.min(),n,r,0)}static newNoDocument(e,t){return new uu(e,2,t,Nl.min(),Nl.min(),lu.empty(),0)}static newUnknownDocument(e,t){return new uu(e,3,t,Nl.min(),Nl.min(),lu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof uu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new uu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class du{constructor(e,t){this.position=e,this.inclusive=t}}function hu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?dl.comparator(dl.fromName(a.referenceValue),n.key):Gc(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function fu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qc(e.position[n],t.position[n]))return!1;return!0}class mu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function pu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class gu{}class yu extends gu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new _u(e,t,n):"array-contains"===t?new Tu(e,n):"in"===t?new Pu(e,n):"not-in"===t?new Au(e,n):"array-contains-any"===t?new Iu(e,n):new yu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ju(e,n):new Eu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Gc(t,this.value)):null!==t&&Hc(this.value)===Hc(t)&&this.matchesComparison(Gc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Oo(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vu extends gu{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vu(e,t)}matches(e){return xu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xu(e){return"and"===e.op}function bu(e){return wu(e)&&xu(e)}function wu(e){for(const t of e.filters)if(t instanceof vu)return!1;return!0}function ku(e){if(e instanceof yu)return e.field.canonicalString()+e.op.toString()+Qc(e.value);if(bu(e))return e.filters.map(e=>ku(e)).join(",");{const t=e.filters.map(e=>ku(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Nu(e,t){return e instanceof yu?function(e,t){return t instanceof yu&&e.op===t.op&&e.field.isEqual(t.field)&&qc(e.value,t.value)}(e,t):e instanceof vu?function(e,t){return t instanceof vu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Nu(n,t.filters[r]),!0)}(e,t):void Oo(19439)}function Su(e){return e instanceof yu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Qc(e.value))}(e):e instanceof vu?function(e){return e.op.toString()+" {"+e.getFilters().map(Su).join(" ,")+"}"}(e):"Filter"}class _u extends yu{constructor(e,t,n){super(e,t,n),this.key=dl.fromName(n.referenceValue)}matches(e){const t=dl.comparator(e.key,this.key);return this.matchesComparison(t)}}class ju extends yu{constructor(e,t){super(e,"in",t),this.keys=Cu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Eu extends yu{constructor(e,t){super(e,"not-in",t),this.keys=Cu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>dl.fromName(e.referenceValue))}class Tu extends yu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tu(t)&&Kc(t.arrayValue,this.value)}}class Pu extends yu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Kc(this.value.arrayValue,t)}}class Au extends yu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Kc(this.value.arrayValue,t)}}class Iu extends yu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Kc(this.value.arrayValue,e))}}class Du{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function Ru(e){return new Du(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Mu(e){const t=Uo(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ku(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Fl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Qc(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Qc(e)).join(",")),t.Te=e}return t.Te}function Lu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!pu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Nu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fu(e.startAt,t.startAt)&&fu(e.endAt,t.endAt)}function Ou(e){return dl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Fu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Vu(e,t,n,r,i,s,a,o){return new Fu(e,t,n,r,i,s,a,o)}function Uu(e){return new Fu(e)}function zu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Bu(e){return null!==e.collectionGroup}function Wu(e){const t=Uo(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new bc(ul.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new mu(r,n))}),e.has(ul.keyField().canonicalString())||t.Ie.push(new mu(ul.keyField(),n))}return t.Ie}function Hu(e){const t=Uo(e);return t.Ee||(t.Ee=qu(t,Wu(e))),t.Ee}function qu(e,t){if("F"===e.limitType)return Ru(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new mu(e.field,t)});const n=e.endAt?new du(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new du(e.startAt.position,e.startAt.inclusive):null;return Ru(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ku(e,t){const n=e.filters.concat([t]);return new Fu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Gu(e,t,n){return new Fu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yu(e,t){return Lu(Hu(e),Hu(t))&&e.limitType===t.limitType}function Xu(e){return"".concat(Mu(Hu(e)),"|lt:").concat(e.limitType)}function Qu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Su(e)).join(", "),"]")),Fl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Qc(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Qc(e)).join(",")),"Target(".concat(t,")")}(Hu(e)),"; limitType=").concat(e.limitType,")")}function $u(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):dl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Wu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=hu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Wu(e),t))&&!(e.endAt&&!function(e,t,n){const r=hu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Wu(e),t))}(e,t)}function Ju(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Zu(e){return(t,n)=>{let r=!1;for(const i of Wu(e)){const e=ed(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ed(e,t,n){const r=e.field.isKeyField()?dl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Gc(r,i):Oo(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Oo(19790,{direction:e.dir})}}class td{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){pc(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return gc(this.inner)}size(){return this.innerSize}}const nd=new yc(dl.comparator);function rd(){return nd}const id=new yc(dl.comparator);function sd(){let e=id;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ad(e){let t=id;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function od(){return cd()}function ld(){return cd()}function cd(){return new td(e=>e.toString(),(e,t)=>e.isEqual(t))}const ud=new yc(dl.comparator),dd=new bc(dl.comparator);function hd(){let e=dd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const fd=new bc(el);function md(){return fd}function pd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vl(t)?"-0":t}}function gd(e){return{integerValue:""+e}}function yd(e,t){return Ul(t)?gd(t):pd(e,t)}class vd{constructor(){this._=void 0}}function xd(e,t,n){return e instanceof kd?function(e,t){const n={fields:{[Pc]:{stringValue:Tc},[Ic]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Dc(t)&&(t=Rc(t)),t&&(n.fields[Ac]=t),{mapValue:n}}(n,t):e instanceof Nd?Sd(e,t):e instanceof _d?jd(e,t):function(e,t){const n=wd(e,t),r=Cd(n)+Cd(e.Ae);return eu(n)&&eu(e.Ae)?gd(r):pd(e.serializer,r)}(e,t)}function bd(e,t,n){return e instanceof Nd?Sd(e,t):e instanceof _d?jd(e,t):n}function wd(e,t){return e instanceof Ed?function(e){return eu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class kd extends vd{}class Nd extends vd{constructor(e){super(),this.elements=e}}function Sd(e,t){const n=Td(t);for(const r of e.elements)n.some(e=>qc(e,r))||n.push(r);return{arrayValue:{values:n}}}class _d extends vd{constructor(e){super(),this.elements=e}}function jd(e,t){let n=Td(t);for(const r of e.elements)n=n.filter(e=>!qc(e,r));return{arrayValue:{values:n}}}class Ed extends vd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Cd(e){return Ec(e.integerValue||e.doubleValue)}function Td(e){return tu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Pd{constructor(e,t){this.field=e,this.transform=t}}class Ad{constructor(e,t){this.version=e,this.transformResults=t}}class Id{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Id}static exists(e){return new Id(void 0,e)}static updateTime(e){return new Id(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Rd{}function Md(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qd(e.key,Id.none()):new Ud(e.key,e.data,Id.none());{const n=e.data,r=lu.empty();let i=new bc(ul.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new zd(e.key,r,new kc(i.toArray()),Id.none())}}function Ld(e,t,n){e instanceof Ud?function(e,t,n){const r=e.value.clone(),i=Wd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zd?function(e,t,n){if(!Dd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Wd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Od(e,t,n,r){return e instanceof Ud?function(e,t,n,r){if(!Dd(e.precondition,t))return n;const i=e.value.clone(),s=Hd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof zd?function(e,t,n,r){if(!Dd(e.precondition,t))return n;const i=Hd(e.fieldTransforms,r,t),s=t.data;return s.setAll(Bd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Dd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Fd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=wd(r.transform,e||null);null!=i&&(null===n&&(n=lu.empty()),n.set(r.field,i))}return n||null}function Vd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sl(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Nd&&t instanceof Nd||e instanceof _d&&t instanceof _d?sl(e.elements,t.elements,qc):e instanceof Ed&&t instanceof Ed?qc(e.Ae,t.Ae):e instanceof kd&&t instanceof kd}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ud extends Rd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class zd extends Rd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Bd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Wd(e,t,n){const r=new Map;Vo(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,bd(a,o,n[i]))}return r}function Hd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,xd(e,s,t))}return r}class qd extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kd extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ld(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Od(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Od(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ld();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Md(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Nl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),hd())}isEqual(e){return this.batchId===e.batchId&&sl(this.mutations,e.mutations,(e,t)=>Vd(e,t))&&sl(this.baseMutations,e.baseMutations,(e,t)=>Vd(e,t))}}class Yd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Vo(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ud;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Yd(e,t,n,r)}}class Xd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Qd{constructor(e,t){this.count=e,this.unchangedNames=t}}var $d,Jd;function Zd(e){switch(e){case zo.OK:return Oo(64938);case zo.CANCELLED:case zo.UNKNOWN:case zo.DEADLINE_EXCEEDED:case zo.RESOURCE_EXHAUSTED:case zo.INTERNAL:case zo.UNAVAILABLE:case zo.UNAUTHENTICATED:return!1;case zo.INVALID_ARGUMENT:case zo.NOT_FOUND:case zo.ALREADY_EXISTS:case zo.PERMISSION_DENIED:case zo.FAILED_PRECONDITION:case zo.ABORTED:case zo.OUT_OF_RANGE:case zo.UNIMPLEMENTED:case zo.DATA_LOSS:return!0;default:return Oo(15467,{code:e})}}function eh(e){if(void 0===e)return Ro("GRPC error has no .code"),zo.UNKNOWN;switch(e){case $d.OK:return zo.OK;case $d.CANCELLED:return zo.CANCELLED;case $d.UNKNOWN:return zo.UNKNOWN;case $d.DEADLINE_EXCEEDED:return zo.DEADLINE_EXCEEDED;case $d.RESOURCE_EXHAUSTED:return zo.RESOURCE_EXHAUSTED;case $d.INTERNAL:return zo.INTERNAL;case $d.UNAVAILABLE:return zo.UNAVAILABLE;case $d.UNAUTHENTICATED:return zo.UNAUTHENTICATED;case $d.INVALID_ARGUMENT:return zo.INVALID_ARGUMENT;case $d.NOT_FOUND:return zo.NOT_FOUND;case $d.ALREADY_EXISTS:return zo.ALREADY_EXISTS;case $d.PERMISSION_DENIED:return zo.PERMISSION_DENIED;case $d.FAILED_PRECONDITION:return zo.FAILED_PRECONDITION;case $d.ABORTED:return zo.ABORTED;case $d.OUT_OF_RANGE:return zo.OUT_OF_RANGE;case $d.UNIMPLEMENTED:return zo.UNIMPLEMENTED;case $d.DATA_LOSS:return zo.DATA_LOSS;default:return Oo(39323,{code:e})}}(Jd=$d||($d={}))[Jd.OK=0]="OK",Jd[Jd.CANCELLED=1]="CANCELLED",Jd[Jd.UNKNOWN=2]="UNKNOWN",Jd[Jd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jd[Jd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jd[Jd.NOT_FOUND=5]="NOT_FOUND",Jd[Jd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jd[Jd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jd[Jd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jd[Jd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jd[Jd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jd[Jd.ABORTED=10]="ABORTED",Jd[Jd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jd[Jd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jd[Jd.INTERNAL=13]="INTERNAL",Jd[Jd.UNAVAILABLE=14]="UNAVAILABLE",Jd[Jd.DATA_LOSS=15]="DATA_LOSS";let th=null;function nh(){return new TextEncoder}const rh=new fo([4294967295,4294967295],0);function ih(e){const t=nh().encode(e),n=new mo;return n.update(t),new Uint8Array(n.digest())}function sh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new fo([n,r],0),new fo([i,s],0)]}class ah{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new oh("Invalid padding: ".concat(t));if(n<0)throw new oh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new oh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new oh("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=fo.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(fo.fromNumber(n)));return 1===r.compare(rh)&&(r=new fo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ih(e),[n,r]=sh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ah(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=ih(e),[n,r]=sh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class oh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ch.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new lh(Nl.min(),r,new yc(el),rd(),hd())}}class ch{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ch(n,t,hd(),hd(),hd())}}class uh{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class dh{constructor(e,t){this.targetId=e,this.Ce=t}}class hh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class fh{constructor(){this.ve=0,this.Fe=gh(),this.Me=Sc.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=hd(),t=hd(),n=hd();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Oo(38017,{changeType:i})}}),new ch(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=gh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vo(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mh{constructor(e){this.Ge=e,this.ze=new Map,this.je=rd(),this.Je=ph(),this.He=ph(),this.Ye=new yc(el)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Oo(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Ou(s))if(0===n){const e=new dl(s.path);this.et(t,e,uu.newNoDocument(e,Nl.min()))}else Vo(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=th)||void 0===i||i.lt(function(e,t,n,r,i,s,a,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Cc(n).toUint8Array()}catch(e){if(e instanceof Nc)return Mo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ah(s,r,i)}catch(e){return Mo(e instanceof oh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Ou(i.target)){const t=new dl(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,uu.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=hd();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new lh(e,t,this.Ye,this.je,n);return this.je=rd(),this.Je=ph(),this.He=ph(),this.Ye=new yc(el),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new fh,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bc(el),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bc(el),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Do("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fh),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ph(){return new yc(dl.comparator)}function gh(){return new yc(dl.comparator)}const yh={asc:"ASCENDING",desc:"DESCENDING"},vh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xh={and:"AND",or:"OR"};class bh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wh(e,t){return e.useProto3Json||Fl(t)?t:{value:t}}function kh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Nh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Sh(e,t){return kh(e,t.toTimestamp())}function _h(e){return Vo(!!e,49232),Nl.fromTimestamp(function(e){const t=jc(e);return new kl(t.seconds,t.nanos)}(e))}function jh(e,t){return Eh(e,t).canonicalString()}function Eh(e,t){const n=function(e){return new ll(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ch(e){const t=ll.fromString(e);return Vo(Yh(t),10190,{key:t.toString()}),t}function Th(e,t){return jh(e.databaseId,t.path)}function Ph(e,t){const n=Ch(t);if(n.get(1)!==e.databaseId.projectId)throw new Bo(zo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Bo(zo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new dl(Rh(n))}function Ah(e,t){return jh(e.databaseId,t)}function Ih(e){const t=Ch(e);return 4===t.length?ll.emptyPath():Rh(t)}function Dh(e){return new ll(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rh(e){return Vo(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Mh(e,t,n){return{name:Th(e,t),fields:n.value.mapValue.fields}}function Lh(e,t){let n;if(t instanceof Ud)n={update:Mh(e,t.key,t.value)};else if(t instanceof qd)n={delete:Th(e,t.key)};else if(t instanceof zd)n={update:Mh(e,t.key,t.data),updateMask:Gh(t.fieldMask)};else{if(!(t instanceof Kd))return Oo(16599,{Vt:t.type});n={verify:Th(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof kd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _d)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ed)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Oo(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Sh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Oo(27497)}(e,t.precondition)),n}function Oh(e,t){return{documents:[Ah(e,t.path)]}}function Fh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ah(e,i);const s=function(e){if(0!==e.length)return Kh(vu.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Hh(e.field),direction:zh(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=wh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Vh(e){let t=Ih(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Vo(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Uh(e);return t instanceof vu&&bu(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new mu(qh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Fl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new du(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new du(n,t)}(n.endAt)),Vu(t,i,a,s,o,"F",l,c)}function Uh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qh(e.unaryFilter.field);return yu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qh(e.unaryFilter.field);return yu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qh(e.unaryFilter.field);return yu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=qh(e.unaryFilter.field);return yu.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oo(61313);default:return Oo(60726)}}(e):void 0!==e.fieldFilter?function(e){return yu.create(qh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oo(58110);default:return Oo(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return vu.create(e.compositeFilter.filters.map(e=>Uh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Oo(1026)}}(e.compositeFilter.op))}(e):Oo(30097,{filter:e})}function zh(e){return yh[e]}function Bh(e){return vh[e]}function Wh(e){return xh[e]}function Hh(e){return{fieldPath:e.canonicalString()}}function qh(e){return ul.fromServerFormat(e.fieldPath)}function Kh(e){return e instanceof yu?function(e){if("=="===e.op){if(ru(e.value))return{unaryFilter:{field:Hh(e.field),op:"IS_NAN"}};if(nu(e.value))return{unaryFilter:{field:Hh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ru(e.value))return{unaryFilter:{field:Hh(e.field),op:"IS_NOT_NAN"}};if(nu(e.value))return{unaryFilter:{field:Hh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hh(e.field),op:Bh(e.op),value:e.value}}}(e):e instanceof vu?function(e){const t=e.getFilters().map(e=>Kh(e));return 1===t.length?t[0]:{compositeFilter:{op:Wh(e.op),filters:t}}}(e):Oo(54877,{filter:e})}function Gh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Yh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Xh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Nl.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Nl.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sc.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Xh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qh{constructor(e){this.yt=e}}function $h(e){const t=Vh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gu(t,t.limit,"L"):t}class Jh{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ec(e.integerValue));else if("doubleValue"in e){const n=Ec(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Vl(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=jc(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Cc(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?ou(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):su(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Oo(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Wc,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Ec(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),dl.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Jh.Kt=new Jh;class Zh{constructor(){this.Cn=new ef}addToCollectionParentIndex(e,t){return this.Cn.add(t),Dl.resolve()}getCollectionParents(e,t){return Dl.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Dl.resolve()}deleteFieldIndex(e,t){return Dl.resolve()}deleteAllFieldIndexes(e){return Dl.resolve()}createTargetIndexes(e,t){return Dl.resolve()}getDocumentsMatchingTarget(e,t){return Dl.resolve(null)}getIndexType(e,t){return Dl.resolve(0)}getFieldIndexes(e,t){return Dl.resolve([])}getNextCollectionGroupToUpdate(e){return Dl.resolve(null)}getMinOffset(e,t){return Dl.resolve(Cl.min())}getMinOffsetFromCollectionGroup(e,t){return Dl.resolve(Cl.min())}updateCollectionGroup(e,t,n){return Dl.resolve()}updateIndexEntries(e,t){return Dl.resolve()}}class ef{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bc(ll.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new bc(ll.comparator)).toArray()}}new Uint8Array(0);const tf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nf=41943040;class rf{static withCacheSize(e){return new rf(e,rf.DEFAULT_COLLECTION_PERCENTILE,rf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}rf.DEFAULT_COLLECTION_PERCENTILE=10,rf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rf.DEFAULT=new rf(nf,rf.DEFAULT_COLLECTION_PERCENTILE,rf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rf.DISABLED=new rf(-1,0,0);class sf{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sf(0)}static cr(){return new sf(-1)}}const af="LruGarbageCollector",of=1048576;function lf(e,t){let[n,r]=e,[i,s]=t;const a=el(n,i);return 0===a?el(r,s):a}class cf{constructor(e){this.Ir=e,this.buffer=new bc(lf),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();lf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Do(af,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ml(e)?Do(af,"Ignoring IndexedDB error during garbage collection: ",e):await Il(e)}await this.Vr(3e5)})}}class df{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Dl.resolve(Ll.ce);const n=new cf(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Do("LruGarbageCollector","Garbage collection skipped; disabled"),Dl.resolve(tf)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Do("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),tf):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Do("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Io()<=un.DEBUG&&Do("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Dl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function hf(e,t){return new df(e,t)}class ff{constructor(){this.changes=new td(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,uu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Dl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Od(n.mutation,e,kc.empty(),kl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,hd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hd();const r=od();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=sd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=od();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,hd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=rd();const s=cd(),a=cd();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof zd)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Od(a.mutation,t,a.mutation.getFieldMask(),kl.now())):s.set(t.key,kc.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new mf(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=cd();let r=new yc((e,t)=>e-t),i=hd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||kc.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||hd()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=ld();l.forEach(e=>{if(!i.has(e)){const r=Md(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Dl.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return dl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Dl.resolve(od());let a=Sl,o=i;return s.next(t=>Dl.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Dl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,hd())).next(e=>({batchId:a,changes:ad(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dl(t)).next(e=>{let t=sd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=sd();return this.indexManager.getCollectionParents(e,i).next(a=>Dl.forEach(a,a=>{const o=function(e,t){return new Fu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,uu.newInvalidDocument(r)))});let n=sd();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Od(s.mutation,r,kc.empty(),kl.now()),$u(t,r)&&(n=n.insert(e,r))}),n})}}class gf{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Dl.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:_h(e.createTime)}}(t)),Dl.resolve()}getNamedQuery(e,t){return Dl.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:$h(e.bundledQuery),readTime:_h(e.readTime)}}(t)),Dl.resolve()}}class yf{constructor(){this.overlays=new yc(dl.comparator),this.qr=new Map}getOverlay(e,t){return Dl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=od();return Dl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Dl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Dl.resolve()}getOverlaysForCollection(e,t,n){const r=od(),i=t.length+1,s=new dl(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Dl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new yc((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=od(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=od(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Dl.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xd(t,n));let i=this.qr.get(t);void 0===i&&(i=hd(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class vf{constructor(){this.sessionToken=Sc.EMPTY_BYTE_STRING}getSessionToken(e){return Dl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Dl.resolve()}}class xf{constructor(){this.Qr=new bc(bf.$r),this.Ur=new bc(bf.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new bf(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new bf(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new dl(new ll([])),n=new bf(t,e),r=new bf(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new dl(new ll([])),n=new bf(t,e),r=new bf(t,e+1);let i=hd();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new bf(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class bf{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return dl.comparator(e.key,t.key)||el(e.Yr,t.Yr)}static Kr(e,t){return el(e.Yr,t.Yr)||dl.comparator(e.key,t.key)}}class wf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bc(bf.$r)}checkEmpty(e){return Dl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Gd(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new bf(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Dl.resolve(s)}lookupMutationBatch(e,t){return Dl.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Dl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Dl.resolve(0===this.mutationQueue.length?Ol:this.tr-1)}getAllMutationBatches(e){return Dl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bf(t,0),r=new bf(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Dl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new bc(el);return t.forEach(e=>{const t=new bf(e,0),r=new bf(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Dl.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;dl.isDocumentKey(i)||(i=i.child(""));const s=new bf(new dl(i),0);let a=new bc(el);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),Dl.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Vo(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Dl.forEach(t.mutations,r=>{const i=new bf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new bf(t,0),r=this.Zr.firstAfterOrEqual(n);return Dl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Dl.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kf{constructor(e){this.ri=e,this.docs=new yc(dl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Dl.resolve(n?n.document.mutableCopy():uu.newInvalidDocument(t))}getEntries(e,t){let n=rd();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():uu.newInvalidDocument(e))}),Dl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=rd();const s=t.path,a=new dl(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Tl(El(a),n)<=0||(r.has(a.key)||$u(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Dl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Oo(9500)}ii(e,t){return Dl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Nf(this)}getSize(e){return Dl.resolve(this.size)}}class Nf extends ff{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Dl.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Sf{constructor(e){this.persistence=e,this.si=new td(e=>Mu(e),Lu),this.lastRemoteSnapshotVersion=Nl.min(),this.highestTargetId=0,this.oi=0,this._i=new xf,this.targetCount=0,this.ai=sf.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Dl.resolve()}getLastRemoteSnapshotVersion(e){return Dl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Dl.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Dl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Dl.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new sf(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Dl.resolve()}updateTargetData(e,t){return this.Pr(t),Dl.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Dl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Dl.waitFor(i).next(()=>r)}getTargetCount(e){return Dl.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Dl.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Dl.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Dl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Dl.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Dl.resolve(n)}containsKey(e,t){return Dl.resolve(this._i.containsKey(t))}}class _f{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ll(0),this.li=!1,this.li=!0,this.hi=new vf,this.referenceDelegate=e(this),this.Pi=new Sf(this),this.indexManager=new Zh,this.remoteDocumentCache=function(e){return new kf(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Qh(t),this.Ii=new gf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new wf(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Do("MemoryPersistence","Starting transaction:",e);const r=new jf(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Dl.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class jf extends Al{constructor(e){super(),this.currentSequenceNumber=e}}class Ef{constructor(e){this.persistence=e,this.Ri=new xf,this.Vi=null}static mi(e){return new Ef(e)}get fi(){if(this.Vi)return this.Vi;throw Oo(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Dl.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Dl.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Dl.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dl.forEach(this.fi,n=>{const r=dl.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Nl.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Dl.or([()=>Dl.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Cf{constructor(e,t){this.persistence=e,this.pi=new td(e=>Bl(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=hf(this,t)}static mi(e,t){return new Cf(e,t)}Ei(){}di(e){return Dl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Dl.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Dl.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Nl.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Dl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Dl.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Dl.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Dl.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jc(e.data.value)),t}br(e,t,n){return Dl.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Dl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Tf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=hd(),r=hd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Tf(e,t.fromCache,n,r)}}class Pf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Af{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=qt()?8:Rl(Wt())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Pf;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Io()<=un.DEBUG&&Do("QueryEngine","SDK will not create cache indexes for query:",Qu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Dl.resolve()):(Io()<=un.DEBUG&&Do("QueryEngine","Query:",Qu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Io()<=un.DEBUG&&Do("QueryEngine","The SDK decides to create cache indexes for query:",Qu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hu(t))):Dl.resolve())}ys(e,t){if(zu(t))return Dl.resolve(null);let n=Hu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Gu(t,null,"F"),n=Hu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=hd(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Gu(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return zu(t)||r.isEqual(Nl.min())?Dl.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Dl.resolve(null):(Io()<=un.DEBUG&&Do("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qu(t)),this.vs(e,s,t,jl(r,Sl)).next(e=>e))})}Ds(e,t){let n=new bc(Zu(e));return t.forEach((t,r)=>{$u(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Io()<=un.DEBUG&&Do("QueryEngine","Using full collection scan to execute query:",Qu(t)),this.ps.getDocumentsMatchingQuery(e,t,Cl.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const If="LocalStore";class Df{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new yc(el),this.xs=new td(e=>Mu(e),Lu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pf(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Rf(e,t,n,r){return new Df(e,t,n,r)}async function Mf(e,t){const n=Uo(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=hd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Lf(e){const t=Uo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Of(e,t,n){let r=hd(),i=hd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=rd();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Nl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Do(If,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Ff(e,t){const n=Uo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ol),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Vf(e,t){const n=Uo(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Dl.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Xh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Uf(e,t,n){const r=Uo(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ml(e))throw e;Do(If,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function zf(e,t,n){const r=Uo(e);let i=Nl.min(),s=hd();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Uo(e),i=r.xs.get(n);return void 0!==i?Dl.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Hu(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Nl.min(),n?s:hd())).next(e=>(Bf(r,Ju(t),e),{documents:e,Qs:s})))}function Bf(e,t,n){let r=e.Os.get(t)||Nl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Wf{constructor(){this.activeTargetIds=md()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hf{constructor(){this.Mo=new Wf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qf{Oo(e){}shutdown(){}}const Kf="ConnectivityMonitor";class Gf{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Do(Kf,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Do(Kf,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Yf=null;function Xf(){return null===Yf?Yf=268435456+Math.round(2147483648*Math.random()):Yf++,"0x"+Yf.toString(16)}const Qf="RestConnection",$f={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jf{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Oc?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Xf(),a=this.zo(e,t.toUriEncodedString());Do(Qf,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),c=Ot(l);return this.Jo(e,a,o,n,c).then(t=>(Do(Qf,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Mo(Qf,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Po,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=$f[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Zf{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const em="WebChannelConnection";class tm extends Jf{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Xf();return new Promise((i,a)=>{const o=new yo;o.setWithCredentials(!0),o.listenOnce(xo.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case bo.NO_ERROR:const n=o.getResponseJson();Do(em,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case bo.TIMEOUT:Do(em,"RPC '".concat(e,"' ").concat(s," timed out")),a(new Bo(zo.DEADLINE_EXCEEDED,"Request time out"));break;case bo.HTTP_ERROR:const r=o.getStatus();if(Do(em,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(zo).indexOf(t)>=0?t:zo.UNKNOWN}(n.status);a(new Bo(e,n.message))}else a(new Bo(zo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Bo(zo.UNAVAILABLE,"Connection failed."));break;default:Oo(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Do(em,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Do(em,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Xf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=So(),a=No(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Do(em,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new Zf({Yo:t=>{h?Do(em,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Do(em,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Do(em,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,vo.EventType.OPEN,()=>{h||(Do(em,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),m(u,vo.EventType.CLOSE,()=>{h||(h=!0,Do(em,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),m(u,vo.EventType.ERROR,t=>{h||(h=!0,Mo(em,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Bo(zo.UNAVAILABLE,"The operation could not be completed")))}),m(u,vo.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];Vo(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Do(em,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=$d[e];if(void 0!==t)return eh(t)}(t),i=a.message;void 0===n&&(n=zo.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new Bo(n,i)),u.close()}else Do(em,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),m(a,ko.STAT_EVENT,t=>{t.stat===wo.PROXY?Do(em,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===wo.NOPROXY&&Do(em,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function nm(){return"undefined"!=typeof document?document:null}function rm(e){return new bh(e,!0)}class im{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Do("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const sm="PersistentStream";class am{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new im(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===zo.RESOURCE_EXHAUSTED?(Ro(t.toString()),Ro("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===zo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Bo(zo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Do(sm,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Do(sm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class om extends am{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Oo(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Vo(void 0===t||"string"==typeof t,58123),Sc.fromBase64String(t||"")):(Vo(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Sc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?zo.UNKNOWN:eh(e.code);return new Bo(t,e.message||"")}(a);n=new hh(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ph(e,r.document.name),s=_h(r.document.updateTime),a=r.document.createTime?_h(r.document.createTime):Nl.min(),o=new lu({mapValue:{fields:r.document.fields}}),l=uu.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new uh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ph(e,r.document),s=r.readTime?_h(r.readTime):Nl.min(),a=uu.newNoDocument(i,s),o=r.removedTargetIds||[];n=new uh([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ph(e,r.document),s=r.removedTargetIds||[];n=new uh([],s,i,null)}else{if(!("filter"in t))return Oo(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Qd(r,i),a=e.targetId;n=new dh(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Nl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Nl.min():t.readTime?_h(t.readTime):Nl.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Dh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ou(r)?{documents:Oh(e,r)}:{query:Fh(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Nh(e,t.resumeToken);const r=wh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Nl.min())>0){n.readTime=kh(e,t.snapshotVersion.toTimestamp());const r=wh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oo(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Dh(this.serializer),t.removeTarget=e,this.q_(t)}}class lm extends am{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Vo(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vo(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Vo(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Vo(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?_h(e.updateTime):_h(t);return n.isEqual(Nl.min())&&(n=_h(t)),new Ad(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=_h(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Dh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Lh(this.serializer,e))};this.q_(t)}}class cm{}class um extends cm{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Bo(zo.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,Eh(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===zo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bo(zo.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,Eh(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===zo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bo(zo.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class dm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Ro(t),this.aa=!1):Do("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const hm="RemoteStore";class fm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{km(this)&&(Do(hm,"Restarting streams for network reachability change."),await async function(e){const t=Uo(e);t.Ea.add(4),await pm(t),t.Ra.set("Unknown"),t.Ea.delete(4),await mm(t)}(this))})}),this.Ra=new dm(n,r)}}async function mm(e){if(km(e))for(const t of e.da)await t(!0)}async function pm(e){for(const t of e.da)await t(!1)}function gm(e,t){const n=Uo(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),wm(n)?bm(n):zm(n).O_()&&vm(n,t))}function ym(e,t){const n=Uo(e),r=zm(n);n.Ia.delete(t),r.O_()&&xm(n,t),0===n.Ia.size&&(r.O_()?r.L_():km(n)&&n.Ra.set("Unknown"))}function vm(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Nl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zm(e).Y_(t)}function xm(e,t){e.Va.Ue(t),zm(e).Z_(t)}function bm(e){e.Va=new mh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),zm(e).start(),e.Ra.ua()}function wm(e){return km(e)&&!zm(e).x_()&&e.Ia.size>0}function km(e){return 0===Uo(e).Ea.size}function Nm(e){e.Va=void 0}async function Sm(e){e.Ra.set("Online")}async function _m(e){e.Ia.forEach((t,n)=>{vm(e,t)})}async function jm(e,t){Nm(e),wm(e)?(e.Ra.ha(t),bm(e)):e.Ra.set("Unknown")}async function Em(e,t,n){if(e.Ra.set("Online"),t instanceof hh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Do(hm,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Cm(e,n)}else if(t instanceof uh?e.Va.Ze(t):t instanceof dh?e.Va.st(t):e.Va.tt(t),!n.isEqual(Nl.min()))try{const t=await Lf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Sc.EMPTY_BYTE_STRING,r.snapshotVersion)),xm(e,t);const i=new Xh(r.target,t,n,r.sequenceNumber);vm(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Do(hm,"Failed to raise snapshot:",t),await Cm(e,t)}}async function Cm(e,t,n){if(!Ml(t))throw t;e.Ea.add(1),await pm(e),e.Ra.set("Offline"),n||(n=()=>Lf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Do(hm,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await mm(e)})}function Tm(e,t){return t().catch(n=>Cm(e,n,t))}async function Pm(e){const t=Uo(e),n=Bm(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ol;for(;Am(t);)try{const e=await Ff(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Im(t,e)}catch(e){await Cm(t,e)}Dm(t)&&Rm(t)}function Am(e){return km(e)&&e.Ta.length<10}function Im(e,t){e.Ta.push(t);const n=Bm(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Dm(e){return km(e)&&!Bm(e).x_()&&e.Ta.length>0}function Rm(e){Bm(e).start()}async function Mm(e){Bm(e).ra()}async function Lm(e){const t=Bm(e);for(const n of e.Ta)t.ea(n.mutations)}async function Om(e,t,n){const r=e.Ta.shift(),i=Yd.from(r,t,n);await Tm(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Pm(e)}async function Fm(e,t){t&&Bm(e).X_&&await async function(e,t){if(function(e){return Zd(e)&&e!==zo.ABORTED}(t.code)){const n=e.Ta.shift();Bm(e).B_(),await Tm(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Pm(e)}}(e,t),Dm(e)&&Rm(e)}async function Vm(e,t){const n=Uo(e);n.asyncQueue.verifyOperationInProgress(),Do(hm,"RemoteStore received new credentials");const r=km(n);n.Ea.add(3),await pm(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await mm(n)}async function Um(e,t){const n=Uo(e);t?(n.Ea.delete(2),await mm(n)):t||(n.Ea.add(2),await pm(n),n.Ra.set("Unknown"))}function zm(e){return e.ma||(e.ma=function(e,t,n){const r=Uo(e);return r.sa(),new om(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Sm.bind(null,e),t_:_m.bind(null,e),r_:jm.bind(null,e),H_:Em.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),wm(e)?bm(e):e.Ra.set("Unknown")):(await e.ma.stop(),Nm(e))})),e.ma}function Bm(e){return e.fa||(e.fa=function(e,t,n){const r=Uo(e);return r.sa(),new lm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Mm.bind(null,e),r_:Fm.bind(null,e),ta:Lm.bind(null,e),na:Om.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Pm(e)):(await e.fa.stop(),e.Ta.length>0&&(Do(hm,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Wm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Wm(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bo(zo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(e,t){if(Ro("AsyncQueue","".concat(t,": ").concat(e)),Ml(e))return new Bo(zo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class qm{static emptySet(e){return new qm(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||dl.comparator(t.key,n.key):(e,t)=>dl.comparator(e.key,t.key),this.keyedMap=sd(),this.sortedSet=new yc(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Km{constructor(){this.ga=new yc(dl.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Oo(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Gm{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Gm(e,t,qm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ym{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Xm{constructor(){this.queries=Qm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Uo(e),r=n.queries;n.queries=Qm(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Bo(zo.ABORTED,"Firestore shutting down"))}}function Qm(){return new td(e=>Xu(e),Yu)}async function $m(e,t){const n=Uo(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Ym,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Hm(e,"Initialization of query '".concat(Qu(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&tp(n)}async function Jm(e,t){const n=Uo(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Zm(e,t){const n=Uo(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&tp(n)}function ep(e,t,n){const r=Uo(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function tp(e){e.Ca.forEach(e=>{e.next()})}var np,rp;(rp=np||(np={})).Ma="default",rp.Cache="cache";class ip{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Gm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Gm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==np.Cache}}class sp{constructor(e){this.key=e}}class ap{constructor(e){this.key=e}}class op{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=hd(),this.mutatedKeys=hd(),this.eu=Zu(e),this.tu=new qm(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Km,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=$u(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oo(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new Gm(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Km,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=hd(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new ap(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new sp(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=hd();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const lp="SyncEngine";class cp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class up{constructor(e){this.key=e,this.hu=!1}}class dp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new td(e=>Xu(e),Yu),this.Iu=new Map,this.Eu=new Set,this.du=new yc(dl.comparator),this.Au=new Map,this.Ru=new xf,this.Vu={},this.mu=new Map,this.fu=sf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function hp(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Dp(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await mp(r,t,n,!0),i}async function fp(e,t){const n=Dp(e);await mp(n,t,!0,!1)}async function mp(e,t,n,r){const i=await Vf(e.localStore,Hu(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await pp(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&gm(e.remoteStore,i),o}async function pp(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await zf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Ep(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await zf(e.localStore,t,!0),a=new op(t,s.Qs),o=a.ru(s.documents),l=ch.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);Ep(e,n,c.au);const u=new cp(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function gp(e,t,n){const r=Uo(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Yu(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Uf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ym(r.remoteStore,i.targetId),_p(r,i.targetId)}).catch(Il)):(_p(r,i.targetId),await Uf(r.localStore,i.targetId,!0))}async function yp(e,t){const n=Uo(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ym(n.remoteStore,r.targetId))}async function vp(e,t){const n=Uo(e);try{const e=await function(e,t){const n=Uo(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Sc.EMPTY_BYTE_STRING,Nl.min()).withLastLimboFreeSnapshotVersion(Nl.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=rd(),l=hd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Of(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Nl.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Dl.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Vo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Vo(r.hu,14607):e.removedDocuments.size>0&&(Vo(r.hu,42227),r.hu=!1))}),await Pp(n,e,t)}catch(e){await Il(e)}}function xp(e,t,n){const r=Uo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Uo(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&tp(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function bp(e,t,n){const r=Uo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new yc(dl.comparator);e=e.insert(s,uu.newNoDocument(s,Nl.min()));const n=hd().add(s),i=new lh(Nl.min(),new Map,new yc(el),e,n);await vp(r,i),r.du=r.du.remove(s),r.Au.delete(t),Tp(r)}else await Uf(r.localStore,t,!1).then(()=>_p(r,t,n)).catch(Il)}async function wp(e,t){const n=Uo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Uo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Dl.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Vo(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=hd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Sp(n,r,null),Np(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pp(n,e)}catch(e){await Il(e)}}async function kp(e,t,n){const r=Uo(e);try{const e=await function(e,t){const n=Uo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Vo(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Sp(r,t,n),Np(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Pp(r,e)}catch(n){await Il(n)}}function Np(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Sp(e,t,n){const r=Uo(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function _p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||jp(e,t)})}function jp(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ym(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Tp(e))}function Ep(e,t,n){for(const r of n)r instanceof sp?(e.Ru.addReference(r.key,t),Cp(e,r)):r instanceof ap?(Do(lp,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||jp(e,r.key)):Oo(19791,{wu:r})}function Cp(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Do(lp,"New document in limbo: "+n),e.Eu.add(r),Tp(e))}function Tp(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new dl(ll.fromString(t)),r=e.fu.next();e.Au.set(r,new up(n)),e.du=e.du.insert(n,r),gm(e.remoteStore,new Xh(Hu(Uu(n.path)),r,"TargetPurposeLimboResolution",Ll.ce))}}async function Pp(e,t,n){const r=Uo(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Tf.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=Uo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Dl.forEach(t,t=>Dl.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Dl.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ml(e))throw e;Do(If,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Ap(e,t){const n=Uo(e);if(!n.currentUser.isEqual(t)){Do(lp,"User change. New user:",t.toKey());const e=await Mf(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Bo(zo.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Pp(n,e.Ls)}}function Ip(e,t){const n=Uo(e),r=n.Au.get(t);if(r&&r.hu)return hd().add(r.key);{let e=hd();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Dp(e){const t=Uo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ip.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bp.bind(null,t),t.Pu.H_=Zm.bind(null,t.eventManager),t.Pu.yu=ep.bind(null,t.eventManager),t}function Rp(e){const t=Uo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kp.bind(null,t),t}class Mp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Rf(this.persistence,new Af,e.initialUser,this.serializer)}Cu(e){return new _f(Ef.mi,this.serializer)}Du(e){return new Hf}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mp.provider={build:()=>new Mp};class Lp extends Mp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Vo(this.persistence.referenceDelegate instanceof Cf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new uf(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?rf.withCacheSize(this.cacheSizeBytes):rf.DEFAULT;return new _f(e=>Cf.mi(e,t),this.serializer)}}class Op{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>xp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ap.bind(null,this.syncEngine),await Um(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Xm}createDatastore(e){const t=rm(e.databaseInfo.databaseId),n=function(e){return new tm(e)}(e.databaseInfo);return function(e,t,n,r){return new um(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new fm(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>xp(this.syncEngine,e,0),Gf.v()?new Gf:new qf)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new dp(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Uo(e);Do(hm,"RemoteStore shutting down."),t.Ea.add(5),await pm(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Op.provider={build:()=>new Op};class Fp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ro("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Vp="FirestoreClient";class Up{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=To.UNAUTHENTICATED,this.clientId=Zo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Do(Vp,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Do(Vp,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Hm(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function zp(e,t){e.asyncQueue.verifyOperationInProgress(),Do(Vp,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Mf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Bp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Wp(e);Do(Vp,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Vm(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Vm(t.remoteStore,n)),e._onlineComponents=t}async function Wp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Do(Vp,"Using user provided OfflineComponentProvider");try{await zp(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===zo.FAILED_PRECONDITION||e.code===zo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Mo("Error using user provided cache. Falling back to memory cache: "+n),await zp(e,new Mp)}}else Do(Vp,"Using default OfflineComponentProvider"),await zp(e,new Lp(void 0));return e._offlineComponents}async function Hp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Do(Vp,"Using user provided OnlineComponentProvider"),await Bp(e,e._uninitializedComponentsProvider._online)):(Do(Vp,"Using default OnlineComponentProvider"),await Bp(e,new Op))),e._onlineComponents}function qp(e){return Hp(e).then(e=>e.syncEngine)}async function Kp(e){const t=await Hp(e),n=t.eventManager;return n.onListen=hp.bind(null,t.syncEngine),n.onUnlisten=gp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=fp.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=yp.bind(null,t.syncEngine),n}function Gp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Fp({next:o=>{s.Nu(),t.enqueueAndForget(()=>Jm(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Bo(zo.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Bo(zo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new ip(Uu(n.path),s,{includeMetadataChanges:!0,qa:!0});return $m(e,a)}(await Kp(e),e.asyncQueue,t,n,r)),r.promise}function Yp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Fp({next:n=>{s.Nu(),t.enqueueAndForget(()=>Jm(e,a)),n.fromCache&&"server"===r.source?i.reject(new Bo(zo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new ip(n,s,{includeMetadataChanges:!0,qa:!0});return $m(e,a)}(await Kp(e),e.asyncQueue,t,n,r)),r.promise}function Xp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Qp=new Map,$p="firestore.googleapis.com",Jp=!0;class Zp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Bo(zo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$p,this.ssl=Jp}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Jp;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=nf;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<of)throw new Bo(zo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Bo(zo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Bo(zo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Bo(zo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Bo(zo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Bo(zo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Bo(zo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zp(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new qo;switch(e.type){case"firstParty":return new Xo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Bo(zo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Qp.get(e);t&&(Do("ComponentProvider","Removing Datastore"),Qp.delete(e),t.terminate())}(this),Promise.resolve()}}class tg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new tg(this.firestore,e,this._query)}}class ng{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ng(this.firestore,e,this._key)}toJSON(){return{type:ng._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(xl(t,ng._jsonSchema))return new ng(e,n||null,new dl(ll.fromString(t.referencePath)))}}ng._jsonSchemaVersion="firestore/documentReference/1.0",ng._jsonSchema={type:vl("string",ng._jsonSchemaVersion),referencePath:vl("string")};class rg extends tg{constructor(e,t,n){super(e,t,Uu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ng(this.firestore,null,new dl(e))}withConverter(e){return new rg(this.firestore,e,this._path)}}function ig(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rn(e),hl("collection","path",t),e instanceof eg){const n=ll.fromString(t,...r);return ml(n),new rg(e,null,n)}{if(!(e instanceof ng||e instanceof rg))throw new Bo(zo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ll.fromString(t,...r));return ml(n),new rg(e.firestore,null,n)}}function sg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rn(e),1===arguments.length&&(t=Zo.newId()),hl("doc","path",t),e instanceof eg){const n=ll.fromString(t,...r);return fl(n),new ng(e,null,new dl(n))}{if(!(e instanceof ng||e instanceof rg))throw new Bo(zo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ll.fromString(t,...r));return fl(n),new ng(e.firestore,e instanceof rg?e.converter:null,new dl(n))}}const ag="AsyncQueue";class og{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new im(this,"async_queue_retry"),this._c=()=>{const e=nm();e&&Do(ag,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=nm();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=nm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Wo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(MF){if(!Ml(MF))throw MF;Do(ag,"Operation failed with retryable error: "+MF)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Ro("INTERNAL UNHANDLED ERROR: ",lg(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Wm.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Oo(47125,{Pc:lg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function lg(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class cg extends eg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new og,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new og(e),this._firestoreClient=void 0,await e}}}function ug(e){if(e._terminated)throw new Bo(zo.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||dg(e),e._firestoreClient}function dg(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Lc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Xp(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Up(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class hg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hg(Sc.fromBase64String(e))}catch(e){throw new Bo(zo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new hg(Sc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hg._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xl(e,hg._jsonSchema))return hg.fromBase64String(e.bytes)}}hg._jsonSchemaVersion="firestore/bytes/1.0",hg._jsonSchema={type:vl("string",hg._jsonSchemaVersion),bytes:vl("string")};class fg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Bo(zo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ul(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mg{constructor(e){this._methodName=e}}class pg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Bo(zo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Bo(zo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return el(this._lat,e._lat)||el(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pg._jsonSchemaVersion}}static fromJSON(e){if(xl(e,pg._jsonSchema))return new pg(e.latitude,e.longitude)}}pg._jsonSchemaVersion="firestore/geoPoint/1.0",pg._jsonSchema={type:vl("string",pg._jsonSchemaVersion),latitude:vl("number"),longitude:vl("number")};class gg{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gg._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xl(e,gg._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new gg(e.vectorValues);throw new Bo(zo.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gg._jsonSchemaVersion="firestore/vectorValue/1.0",gg._jsonSchema={type:vl("string",gg._jsonSchemaVersion),vectorValues:vl("object")};const yg=/^__.*__$/;class vg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new zd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ud(e,this.data,t,this.fieldTransforms)}}class xg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new zd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oo(40011,{Ac:e})}}class wg{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wg(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Og(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(bg(this.Ac)&&yg.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||rm(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new wg({Ac:e,methodName:t,Dc:n,path:ul.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ng(e){const t=e._freezeSettings(),n=rm(e._databaseId);return new kg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sg(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Dg("Data must be an object, but it was:",a,r);const o=Ag(r,a);let l,c;if(s.merge)l=new kc(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Rg(t,r,n);if(!a.contains(i))throw new Bo(zo.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Fg(e,i)||e.push(i)}l=new kc(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new vg(new lu(o),l,c)}class _g extends mg{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _g}}class jg extends mg{_toFieldTransform(e){return new Pd(e.path,new kd)}isEqual(e){return e instanceof jg}}function Eg(e,t,n,r){const i=e.Cc(1,t,n);Dg("Data must be an object, but it was:",i,r);const s=[],a=lu.empty();pc(r,(e,r)=>{const o=Lg(t,e,n);r=rn(r);const l=i.yc(o);if(r instanceof _g)s.push(o);else{const e=Pg(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new kc(s);return new xg(a,o,i.fieldTransforms)}function Cg(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[Rg(t,r,n)],l=[i];if(s.length%2!=0)throw new Bo(zo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)o.push(Rg(t,s[h])),l.push(s[h+1]);const c=[],u=lu.empty();for(let h=o.length-1;h>=0;--h)if(!Fg(c,o[h])){const e=o[h];let t=l[h];t=rn(t);const n=a.yc(e);if(t instanceof _g)c.push(e);else{const r=Pg(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new kc(c);return new xg(u,d,a.fieldTransforms)}function Tg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Pg(n,e.Cc(r?4:3,t))}function Pg(e,t){if(Ig(e=rn(e)))return Dg("Unsupported field value:",t,e),Ag(e,t);if(e instanceof mg)return function(e,t){if(!bg(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Pg(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=rn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=kl.fromDate(e);return{timestampValue:kh(t.serializer,n)}}if(e instanceof kl){const n=new kl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:kh(t.serializer,n)}}if(e instanceof pg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hg)return{bytesValue:Nh(t.serializer,e._byteString)};if(e instanceof ng){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:jh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof gg)return function(e,t){return{mapValue:{fields:{[Vc]:{stringValue:Bc},[Wc]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return pd(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(gl(e)))}(e,t)}function Ag(e,t){const n={};return gc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pc(e,(e,r)=>{const i=Pg(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ig(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof kl||e instanceof pg||e instanceof hg||e instanceof ng||e instanceof mg||e instanceof gg)}function Dg(e,t,n){if(!Ig(n)||!pl(n)){const r=gl(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Rg(e,t,n){if((t=rn(t))instanceof fg)return t._internalPath;if("string"==typeof t)return Lg(e,t);throw Og("Field path arguments must be of type string or ",e,!1,void 0,n)}const Mg=new RegExp("[~\\*/\\[\\]]");function Lg(e,t,n){if(t.search(Mg)>=0)throw Og("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new fg(...t.split("."))._internalPath}catch(r){throw Og("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Og(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Bo(zo.INVALID_ARGUMENT,o+e+l)}function Fg(e,t){return e.some(e=>e.isEqual(t))}class Vg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ng(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ug(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ug extends Vg{data(){return super.data()}}function zg(e,t){return"string"==typeof t?Lg(e,t):t instanceof fg?t._internalPath:t._delegate._internalPath}function Bg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Bo(zo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wg{}class Hg extends Wg{}function qg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Wg&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Yg).length,n=e.filter(e=>e instanceof Kg).length;if(t>1||t>0&&n>0)throw new Bo(zo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Kg extends Hg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Kg(e,t,n)}_apply(e){const t=this._parse(e);return $g(e._query,t),new tg(e.firestore,e.converter,Ku(e._query,t))}_parse(e){const t=Ng(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Bo(zo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Qg(a,s);const t=[];for(const n of a)t.push(Xg(r,e,n));o={arrayValue:{values:t}}}else o=Xg(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Qg(a,s),o=Tg(n,t,a,"in"===s||"not-in"===s);return yu.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Gg(e,t,n){const r=t,i=zg("where",e);return Kg._create(i,r,n)}class Yg extends Wg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yg(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:vu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)$g(n,i),n=Ku(n,i)}(e._query,t),new tg(e.firestore,e.converter,Ku(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Xg(e,t,n){if("string"==typeof(n=rn(n))){if(""===n)throw new Bo(zo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bu(t)&&-1!==n.indexOf("/"))throw new Bo(zo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ll.fromString(n));if(!dl.isDocumentKey(r))throw new Bo(zo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Zc(e,new dl(r))}if(n instanceof ng)return Zc(e,n._key);throw new Bo(zo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gl(n),"."))}function Qg(e,t){if(!Array.isArray(e)||0===e.length)throw new Bo(zo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function $g(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Bo(zo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Bo(zo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Jg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ec(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oo(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return pc(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Wc].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Ec(e.doubleValue));return new gg(n)}convertGeoPoint(e){return new pg(Ec(e.latitude),Ec(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Rc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const t=jc(e);return new kl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ll.fromString(e);Vo(Yh(n),9688,{name:e});const r=new Fc(n.get(1),n.get(3)),i=new dl(n.popFirst(5));return r.isEqual(t)||Ro("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Zg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ey{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ty extends Vg{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ny(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(zg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Bo(zo.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ty._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}ty._jsonSchemaVersion="firestore/documentSnapshot/1.0",ty._jsonSchema={type:vl("string",ty._jsonSchemaVersion),bundleSource:vl("string","DocumentSnapshot"),bundleName:vl("string"),bundle:vl("string")};class ny extends ty{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ry{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ey(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ny(this._firestore,this._userDataWriter,n.key,n,new ey(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Bo(zo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new ny(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ey(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new ny(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ey(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:iy(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Bo(zo.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ry._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oo(61501,{type:e})}}function sy(e){e=yl(e,ng);const t=yl(e.firestore,cg);return Gp(ug(t),e._key).then(n=>hy(t,e,n))}ry._jsonSchemaVersion="firestore/querySnapshot/1.0",ry._jsonSchema={type:vl("string",ry._jsonSchemaVersion),bundleSource:vl("string","QuerySnapshot"),bundleName:vl("string"),bundle:vl("string")};class ay extends Jg{constructor(e){super(),this.firestore=e}convertBytes(e){return new hg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ng(this.firestore,null,t)}}function oy(e){e=yl(e,tg);const t=yl(e.firestore,cg),n=ug(t),r=new ay(t);return Bg(e._query),Yp(n,e._query).then(n=>new ry(t,r,e,n))}function ly(e,t,n){e=yl(e,ng);const r=yl(e.firestore,cg),i=Zg(e.converter,t,n);return dy(r,[Sg(Ng(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Id.none())])}function cy(e,t,n){e=yl(e,ng);const r=yl(e.firestore,cg),i=Ng(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=rn(t))||t instanceof fg?Cg(i,"updateDoc",e._key,t,n,o):Eg(i,"updateDoc",e._key,t),dy(r,[s.toMutation(e._key,Id.exists(!0))])}function uy(e,t){const n=yl(e.firestore,cg),r=sg(e),i=Zg(e.converter,t);return dy(n,[Sg(Ng(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Id.exists(!1))]).then(()=>r)}function dy(e,t){return function(e,t){const n=new Wo;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Rp(e);try{const e=await function(e,t){const n=Uo(e),r=kl.now(),i=t.reduce((e,t)=>e.add(t.key),hd());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=rd(),l=hd();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Fd(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new zd(e.key,t,cu(t.value.mapValue),Id.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:ad(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new yc(el)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Pp(r,e.changes),await Pm(r.remoteStore)}catch(e){const t=Hm(e,"Failed to persist write");n.reject(t)}}(await qp(e),t,n)),n.promise}(ug(e),t)}function hy(e,t,n){const r=n.docs.get(t._key),i=new ay(e);return new ty(e,i,t._key,r,new ey(n.hasPendingWrites,n.fromCache),t.converter)}function fy(){return new jg("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Po=e}(xr),mr(new sn("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new cg(new Go(e.getProvider("auth-internal")),new $o(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Bo(zo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(e.options.projectId,t)}(s,r),s);return i=c({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),kr(Eo,Co,e),kr(Eo,Co,"esm2020")}();kr("firebase","12.1.0","app");const my="firebasestorage.googleapis.com",py="storageBucket";class gy extends Gt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(xy(e),"Firebase Storage: ".concat(t," (").concat(xy(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gy.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var yy,vy;function xy(e){return"storage/"+e}function by(){return new gy(yy.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function wy(){return new gy(yy.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ky(){return new gy(yy.CANCELED,"User canceled the upload/download.")}function Ny(e){return new gy(yy.INVALID_ARGUMENT,e)}function Sy(){return new gy(yy.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(yy||(yy={}));class _y{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=_y.makeFromUrl(e,t)}catch(MF){return new _y(e,"")}if(""===n.path)return n;throw r=e,new gy(yy.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===my?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new _y(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new gy(yy.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class jy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ey(e,t,n,r){if(r<t)throw Ny("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Ny("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Cy(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Ty(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(vy||(vy={}));class Py{constructor(e,t,n,r,i,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Ay(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===vy.NO_ERROR,i=n.getStatus();if(!t||Ty(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===vy.ABORT;return void e(!1,new Ay(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Ay(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(MF){r(MF)}else if(null!==i){const e=by();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Sy():ky())}else{r(wy())}};this.canceled_?t(0,new Ay(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),d(s)}let m=!1;function p(e){m||(m=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,p(!0)},n),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ay{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Iy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Dy{constructor(e,t){this._service=e,this._location=t instanceof _y?t:_y.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Dy(e,t)}get root(){const e=new _y(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Iy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new _y(this._location.bucket,e);return new Dy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new gy(yy.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Ry(e,t){const n=null===t||void 0===t?void 0:t[py];return null==n?null:_y.makeFromBucketSpec(n,e)}class My{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=my,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?_y.makeFromBucketSpec(r,this._host):Ry(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=_y.makeFromBucketSpec(this._url,e):this._bucket=Ry(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ey("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ey("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dy(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new jy(Sy());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=Cy(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Py(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a,o)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Ly="@firebase/storage",Oy="0.14.0",Fy="storage";function Vy(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new My(r,i,s,n,xr)}mr(new sn(Fy,Vy,"PUBLIC").setMultipleInstances(!0)),kr(Ly,Oy,""),kr(Ly,Oy,"esm2020");const Uy=br({apiKey:"AIzaSyBMjKssyRSZJ16EhSdVOFd2XjIkj8_BT-E",authDomain:"twitterclone-47ebf.firebaseapp.com",databaseURL:"https://twitterclone-47ebf-default-rtdb.firebaseio.com",projectId:"twitterclone-47ebf",storageBucket:"twitterclone-47ebf.appspot.com",messagingSenderId:"700556014223",appId:"1:700556014223:web:a0646158ade0b1e55ab6fa",measurementId:"G-0WGJF9H0EL"}),zy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr();const t=pr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=pr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Qt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;zr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:io,persistence:[ma,Ys,Zs]}),r=Mt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>lo)return;const r=null===t||void 0===t?void 0:t.token;co!==r&&(co=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){rn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){rn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=It("auth");return s&&cs(n,"http://".concat(s)),n}(Uy),By=function(e,t){const n="object"==typeof e?e:wr(),r="string"==typeof e?e:t||Oc,i=pr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Dt("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=yl(e,eg);const i=Ot(t),s=e._getSettings(),a=c(c({},s),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);i&&(Ft("https://".concat(o)),Bt("Firestore",!0)),s.host!==$p&&s.host!==o&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},s),{},{host:o,ssl:i,emulatorOptions:r});if(!Qt(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=To.MOCK_USER;else{var u;t=Vt(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Bo(zo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new To(i)}e._authCredentials=new Ko(new Ho(t,n))}}(i,...e)}return i}(Uy);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr(),t=arguments.length>1?arguments[1]:void 0;e=rn(e);const n=pr(e,Fy).getImmediate({identifier:t}),r=Dt("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=Ot(t);i&&(Ft("https://".concat(e.host,"/b")),Bt("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:Vt(s,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(Uy);var Wy=n(579);const Hy=(0,t.createContext)();function qy(){return(0,t.useContext)(Hy)}function Ky(e){let{children:n}=e;const[r,i]=(0,t.useState)(null),[s,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(!0);async function c(e){try{const t=await sy(sg(By,"users",e));return t.exists()?(a(t.data()),t.data()):null}catch(t){return console.error("Error fetching user profile:",t),null}}(0,t.useEffect)(()=>{const e=function(e,t,n,r){return rn(e).onAuthStateChanged(t,n,r)}(zy,async e=>{if(i(e),e){if(e.emailVerified){const t=await sy(sg(By,"users",e.uid));t.exists()&&!1===t.data().emailVerified&&await ly(sg(By,"users",e.uid),{emailVerified:!0},{merge:!0})}await c(e.uid)}else a(null);l(!1)});return e},[]);const u={currentUser:r,userProfile:s,register:async function(e,t,n){try{const r=await async function(e,t,n){if(gr(e.app))return Promise.reject(Hr(e));const r=$i(e),i=os(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",As,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&zs(e),t}),a=await Is._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(zy,e,t),i=r.user;return await Ws(i,{displayName:n}),await Bs(i),await ly(sg(By,"users",i.uid),{uid:i.uid,email:e,displayName:n,createdAt:fy(),role:"owner",emailVerified:!1,isVerified:!1,verificationStatus:"pending",verificationSubmitted:!1}),i}catch(r){throw r}},login:async function(e,t){const n=await function(e,t,n){return gr(e.app)?Promise.reject(Hr(e)):Vs(rn(e),Ss.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&zs(e),t})}(zy,e,t);return n},loginWithGoogle:async function(){try{const e=new Cs,t=await async function(e,t,n){if(gr(e.app))return Promise.reject(Br(e,"operation-not-supported-in-this-environment"));const r=$i(e);qr(e,t,_s);const i=ba(r,n);return new Ea(r,"signInViaPopup",t,i).executeNotNull()}(zy,e),n=t.user,r=await sy(sg(By,"users",n.uid));r.exists()||await ly(sg(By,"users",n.uid),{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,createdAt:fy(),role:"owner",emailVerified:n.emailVerified,isVerified:!1,verificationStatus:"pending",verificationSubmitted:!1});const i=await c(n.uid);return{user:n,isNewUser:!r.exists(),needsVerification:!(null!==i&&void 0!==i&&i.isVerified)&&!(null!==i&&void 0!==i&&i.verificationSubmitted)}}catch(e){throw e}},logout:function(){return function(e){return rn(e).signOut()}(zy)},resetPassword:function(e){return async function(e,t,n){const r=$i(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Us(r,i,n),await os(r,i,"getOobCode",gs,"EMAIL_PASSWORD_PROVIDER")}(zy,e,{url:window.location.origin+"/login",handleCodeInApp:!1})},sendVerificationEmail:function(){return Bs(zy.currentUser,{url:window.location.origin+"/login",handleCodeInApp:!1})},updateEmailVerificationStatus:async function(){if(r&&r.emailVerified)try{return await ly(sg(By,"users",r.uid),{emailVerified:!0},{merge:!0}),await c(r.uid),!0}catch(e){return console.error("Error updating email verification status:",e),!1}return!1},fetchUserProfile:c};return(0,Wy.jsx)(Hy.Provider,{value:u,children:!o&&n})}const Gy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yy=(()=>new Set(Gy))(),Xy=e=>180*e/Math.PI,Qy=e=>{const t=Xy(Math.atan2(e[1],e[0]));return Jy(t)},$y={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Qy,rotateZ:Qy,skewX:e=>Xy(Math.atan(e[1])),skewY:e=>Xy(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Jy=e=>((e%=360)<0&&(e+=360),e),Zy=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ev=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),tv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Zy,scaleY:ev,scale:e=>(Zy(e)+ev(e))/2,rotateX:e=>Jy(Xy(Math.atan2(e[6],e[5]))),rotateY:e=>Jy(Xy(Math.atan2(-e[2],e[0]))),rotateZ:Qy,rotate:Qy,skewX:e=>Xy(Math.atan(e[4])),skewY:e=>Xy(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function nv(e){return e.includes("scale")?1:0}function rv(e,t){if(!e||"none"===e)return nv(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,i;if(n)r=tv,i=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=$y,i=t}if(!i)return nv(t);const s=r[t],a=i[1].split(",").map(iv);return"function"===typeof s?s(a):a[s]}function iv(e){return parseFloat(e.trim())}const sv=e=>t=>"string"===typeof t&&t.startsWith(e),av=sv("--"),ov=sv("var(--"),lv=e=>!!ov(e)&&cv.test(e.split("/*")[0].trim()),cv=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function uv(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}const dv=(e,t,n)=>e+(t-e)*n;function hv(e){return void 0===e||1===e}function fv(e){let{scale:t,scaleX:n,scaleY:r}=e;return!hv(t)||!hv(n)||!hv(r)}function mv(e){return fv(e)||pv(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function pv(e){return gv(e.x)||gv(e.y)}function gv(e){return e&&"0%"!==e}function yv(e,t,n){return n+t*(e-n)}function vv(e,t,n,r,i){return void 0!==i&&(e=yv(e,i,r)),yv(e,n,r)+t}function xv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=vv(e.min,t,n,r,i),e.max=vv(e.max,t,n,r,i)}function bv(e,t){let{x:n,y:r}=t;xv(e.x,n.translate,n.scale,n.originPoint),xv(e.y,r.translate,r.scale,r.originPoint)}const wv=.999999999999,kv=1.0000000000001;function Nv(e,t){e.min=e.min+t,e.max=e.max+t}function Sv(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;xv(e,t,n,dv(e.min,e.max,i),r)}function _v(e,t){Sv(e.x,t.x,t.scaleX,t.scale,t.originX),Sv(e.y,t.y,t.scaleY,t.scale,t.originY)}function jv(e,t){return uv(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Ev=new Set(["width","height","top","left","right","bottom",...Gy]),Cv=(e,t,n)=>n>t?t:n<e?e:n,Tv={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Pv=c(c({},Tv),{},{transform:e=>Cv(0,1,e)}),Av=c(c({},Tv),{},{default:1}),Iv=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Dv=Iv("deg"),Rv=Iv("%"),Mv=Iv("px"),Lv=Iv("vh"),Ov=Iv("vw"),Fv=(()=>c(c({},Rv),{},{parse:e=>Rv.parse(e)/100,transform:e=>Rv.transform(100*e)}))(),Vv=e=>t=>t.test(e),Uv=[Tv,Mv,Rv,Dv,Ov,Lv,{test:e=>"auto"===e,parse:e=>e}],zv=e=>Uv.find(Vv(e));const Bv=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),Wv=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function Hv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[r,i]=function(e){const t=Wv.exec(e);if(!t)return[,];const[,n,r,i]=t;return["--".concat(null!==n&&void 0!==n?n:r),i]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return Bv(e)?parseFloat(e):e}return lv(i)?Hv(i,t,n+1):i}const qv=e=>e===Tv||e===Mv,Kv=new Set(["x","y","z"]),Gv=Gy.filter(e=>!Kv.has(e));const Yv={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return rv(n,"x")},y:(e,t)=>{let{transform:n}=t;return rv(n,"y")}};Yv.translateX=Yv.x,Yv.translateY=Yv.y;const Xv=e=>e,Qv={},$v=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Jv={value:null,addProjectionMetrics:null};function Zv(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=$v.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){a.has(t)&&(u.schedule(t),e()),l++,t(o)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),a.delete(e)},process:e=>{o=e,i?s=!0:(i=!0,[n,r]=[r,n],n.forEach(c),t&&Jv.value&&Jv.value.frameloop[t].push(l),l=0,n.clear(),i=!1,s&&(s=!1,u.process(e)))}};return u}(s,t?n:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:f,postRender:m}=a,p=()=>{const s=Qv.useManualTiming?i.timestamp:performance.now();n=!1,Qv.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1)),i.timestamp=s,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),f.process(i),m.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(p))},g=$v.reduce((t,s)=>{const o=a[s];return t[s]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(p)),o.schedule(t,s,a)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<$v.length;t++)a[$v[t]].cancel(e)},state:i,steps:a}}const{schedule:ex,cancel:tx,state:nx,steps:rx}=Zv("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Xv,!0),ix=new Set;let sx=!1,ax=!1,ox=!1;function lx(){if(ax){const e=Array.from(ix).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return Gv.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{var n;let[r,i]=t;null===(n=e.getValue(r))||void 0===n||n.set(i)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}ax=!1,sx=!1,ix.forEach(e=>e.complete(ox)),ix.clear()}function cx(){ix.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ax=!0)})}class ux{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(ix.add(this),sx||(sx=!0,ex.read(cx),ex.resolveKeyframes(lx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const i=null===r||void 0===r?void 0:r.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,s);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===i&&r.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ix.delete(this)}cancel(){"scheduled"===this.state&&(ix.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const dx=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function hx(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||dx(e))}const fx=e=>Math.round(1e5*e)/1e5,mx=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const px=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,gx=(e,t)=>n=>Boolean("string"===typeof n&&px.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),yx=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[i,s,a,o]=r.match(mx);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},vx=c(c({},Tv),{},{transform:e=>Math.round((e=>Cv(0,255,e))(e))}),xx={test:gx("rgb","red"),parse:yx("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+vx.transform(t)+", "+vx.transform(n)+", "+vx.transform(r)+", "+fx(Pv.transform(i))+")"}};const bx={test:gx("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:xx.transform},wx={test:gx("hsl","hue"),parse:yx("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+Rv.transform(fx(n))+", "+Rv.transform(fx(r))+", "+fx(Pv.transform(i))+")"}},kx={test:e=>xx.test(e)||bx.test(e)||wx.test(e),parse:e=>xx.test(e)?xx.parse(e):wx.test(e)?wx.parse(e):bx.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?xx.transform(e):wx.transform(e),getAnimatableNone:e=>{const t=kx.parse(e);return t.alpha=0,kx.transform(t)}},Nx=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const Sx="number",_x="color",jx=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Ex(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(jx,e=>(kx.test(e)?(r.color.push(s),i.push(_x),n.push(kx.parse(e))):e.startsWith("var(")?(r.var.push(s),i.push("var"),n.push(e)):(r.number.push(s),i.push(Sx),n.push(parseFloat(e))),++s,"${}")).split("${}");return{values:n,split:a,indexes:r,types:i}}function Cx(e){return Ex(e).values}function Tx(e){const{split:t,types:n}=Ex(e),r=t.length;return e=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],void 0!==e[s]){const t=n[s];i+=t===Sx?fx(e[s]):t===_x?kx.transform(e[s]):e[s]}return i}}const Px=e=>"number"===typeof e?0:kx.test(e)?kx.getAnimatableNone(e):e;const Ax={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(mx))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Nx))||void 0===n?void 0:n.length)||0)>0},parse:Cx,createTransformer:Tx,getAnimatableNone:function(e){const t=Cx(e);return Tx(e)(t.map(Px))}},Ix=new Set(["brightness","contrast","saturate","opacity"]);function Dx(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(mx)||[];if(!r)return e;const i=n.replace(r,"");let s=Ix.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Rx=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,Mx=c(c({},Ax),{},{getAnimatableNone:e=>{const t=e.match(Rx);return t?t.map(Dx).join(" "):e}}),Lx=c(c({},Tv),{},{transform:Math.round}),Ox=c(c({borderWidth:Mv,borderTopWidth:Mv,borderRightWidth:Mv,borderBottomWidth:Mv,borderLeftWidth:Mv,borderRadius:Mv,radius:Mv,borderTopLeftRadius:Mv,borderTopRightRadius:Mv,borderBottomRightRadius:Mv,borderBottomLeftRadius:Mv,width:Mv,maxWidth:Mv,height:Mv,maxHeight:Mv,top:Mv,right:Mv,bottom:Mv,left:Mv,padding:Mv,paddingTop:Mv,paddingRight:Mv,paddingBottom:Mv,paddingLeft:Mv,margin:Mv,marginTop:Mv,marginRight:Mv,marginBottom:Mv,marginLeft:Mv,backgroundPositionX:Mv,backgroundPositionY:Mv},{rotate:Dv,rotateX:Dv,rotateY:Dv,rotateZ:Dv,scale:Av,scaleX:Av,scaleY:Av,scaleZ:Av,skew:Dv,skewX:Dv,skewY:Dv,distance:Mv,translateX:Mv,translateY:Mv,translateZ:Mv,x:Mv,y:Mv,z:Mv,perspective:Mv,transformPerspective:Mv,opacity:Pv,originX:Fv,originY:Fv,originZ:Mv}),{},{zIndex:Lx,fillOpacity:Pv,strokeOpacity:Pv,numOctaves:Lx}),Fx=c(c({},Ox),{},{color:kx,backgroundColor:kx,outlineColor:kx,fill:kx,stroke:kx,borderColor:kx,borderTopColor:kx,borderRightColor:kx,borderBottomColor:kx,borderLeftColor:kx,filter:Mx,WebkitFilter:Mx}),Vx=e=>Fx[e];function Ux(e,t){let n=Vx(e);return n!==Mx&&(n=Ax),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const zx=new Set(["auto","none","0"]);class Bx extends ux{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"===typeof n&&(n=n.trim(),lv(n))){const r=Hv(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Ev.has(n)||2!==e.length)return;const[r,i]=e,s=zv(r),a=zv(i);if(s!==a)if(qv(s)&&qv(a))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else Yv[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||hx(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"===typeof t&&!zx.has(t)&&Ex(t).values.length&&(r=e[i]),i++}if(r&&n)for(const s of t)e[s]=Ux(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yv[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=Yv[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[n,r]=e;t.getValue(n).set(r)}),this.resolveNoneKeyframes()}}const Wx=e=>Boolean(e&&e.getVelocity);let Hx;function qx(){Hx=void 0}const Kx={now:()=>(void 0===Hx&&Kx.set(nx.isProcessing||Qv.useManualTiming?nx.timestamp:performance.now()),Hx),set:e=>{Hx=e,queueMicrotask(qx)}};function Gx(e,t){-1===e.indexOf(t)&&e.push(t)}function Yx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Xx{constructor(){this.subscriptions=[]}add(e){return Gx(this.subscriptions,e),()=>Yx(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Qx(e,t){return t?e*(1e3/t):0}const $x={current:void 0};class Jx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=Kx.now();var n;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(n=this.events.change)||void 0===n||n.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Kx.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Xx);const n=this.events[e].add(t);return"change"===e?()=>{n(),ex.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return $x.current&&$x.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Kx.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Qx(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zx(e,t){return new Jx(e,t)}const eb=[...Uv,kx,Ax],{schedule:tb,cancel:nb}=Zv(queueMicrotask,!1),rb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ib={};for(const n in rb)ib[n]={isEnabled:e=>rb[n].some(t=>!!e[t])};const sb=()=>({x:{min:0,max:0},y:{min:0,max:0}}),ab="undefined"!==typeof window,ob={current:null},lb={current:!1};const cb=new WeakMap;function ub(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function db(e){return"string"===typeof e||Array.isArray(e)}const hb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fb=["initial",...hb];function mb(e){return ub(e.animate)||fb.some(t=>db(e[t]))}function pb(e){return Boolean(mb(e)||e.variants)}function gb(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function yb(e,t,n,r){if("function"===typeof t){const[i,s]=gb(r);t=t(void 0!==n?n:e.custom,i,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[i,s]=gb(r);t=t(void 0!==n?n:e.custom,i,s)}return t}const vb=["willChange"],xb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bb{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:o}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ux,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Kx.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,ex.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget=c({},u),this.initialValues=n.initial?c({},u):{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=mb(n),this.isVariantNode=pb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const h=this.scrapeMotionValuesFromProps(n,{},this),{willChange:f}=h,m=i(h,vb);for(const i in m){const e=m[i];void 0!==u[i]&&Wx(e)&&e.set(u[i])}}mount(e){var t;this.current=e,cb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),lb.current||function(){if(lb.current=!0,ab)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ob.current=e.matches;e.addEventListener("change",t),t()}else ob.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ob.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),tx(this.notifyUpdate),tx(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Yy.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&ex.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in ib){const t=ib[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<xb.length;n++){const t=xb[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Wx(i))e.addValue(r,i);else if(Wx(s))e.addValue(r,Zx(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,Zx(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Zx(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var i;return void 0!==r&&null!==r&&("string"===typeof r&&(Bv(r)||dx(r))?r=parseFloat(r):(i=r,!eb.find(Vv(i))&&Ax.test(t)&&(r=Ux(e,t))),this.setBaseTarget(e,Wx(r)?r.get():r)),Wx(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var r;const i=yb(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);i&&(n=i[e])}if(t&&void 0!==n)return n;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||Wx(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new Xx),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}scheduleRenderMicrotask(){tb.render(this.render)}}class wb extends bb{constructor(){super(...arguments),this.KeyframeResolver=Bx}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Wx(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}const kb=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Nb={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Sb=Gy.length;function _b(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const e=t[l];if(Yy.has(l))a=!0;else if(av(l))i[l]=e;else{const t=kb(e,Ox[l]);l.startsWith("origin")?(o=!0,s[l]=t):r[l]=t}}if(t.transform||(a||n?r.transform=function(e,t,n){let r="",i=!0;for(let s=0;s<Sb;s++){const a=Gy[s],o=e[a];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=kb(o,Ox[a]);l||(i=!1,r+="".concat(Nb[a]||a,"(").concat(e,") ")),n&&(t[a]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=s;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}function jb(e,t,n,r){let{style:i,vars:s}=t;const a=e.style;let o;for(o in i)a[o]=i[o];for(o in null===r||void 0===r||r.applyProjectionStyles(a,n),s)a.setProperty(o,s[o])}const Eb={};function Cb(e,t){let{layout:n,layoutId:r}=t;return Yy.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Eb[e]||"opacity"===e)}function Tb(e,t,n){const{style:r}=e,i={};for(const a in r){var s;(Wx(r[a])||t.style&&Wx(t.style[a])||Cb(a,e)||void 0!==(null===n||void 0===n||null===(s=n.getValue(a))||void 0===s?void 0:s.liveStyle))&&(i[a]=r[a])}return i}class Pb extends wb{constructor(){super(...arguments),this.type="html",this.renderInstance=jb}readValueFromInstance(e,t){var n,r;if(Yy.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?nv(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return rv(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),i=(av(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof i?i.trim():i}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return jv(e,n)}build(e,t,n){_b(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Tb(e,t,n)}}const Ab=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Ib={offset:"stroke-dashoffset",array:"stroke-dasharray"},Db={offset:"strokeDashoffset",array:"strokeDasharray"};const Rb=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function Mb(e,t,n,r,s){let{attrX:a,attrY:o,attrScale:l,pathLength:c,pathSpacing:u=1,pathOffset:d=0}=t;if(_b(e,i(t,Rb),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;var m,p;(h.transform&&(f.transform=h.transform,delete h.transform),f.transform||h.transformOrigin)&&(f.transformOrigin=null!==(m=h.transformOrigin)&&void 0!==m?m:"50% 50%",delete h.transformOrigin);f.transform&&(f.transformBox=null!==(p=null===s||void 0===s?void 0:s.transformBox)&&void 0!==p?p:"fill-box",delete h.transformBox);void 0!==a&&(h.x=a),void 0!==o&&(h.y=o),void 0!==l&&(h.scale=l),void 0!==c&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=i?Ib:Db;e[s.offset]=Mv.transform(-r);const a=Mv.transform(t),o=Mv.transform(n);e[s.array]="".concat(a," ").concat(o)}(h,c,u,d,!1)}const Lb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Ob=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Fb(e,t,n){const r=Tb(e,t,n);for(const i in e)if(Wx(e[i])||Wx(t[i])){r[-1!==Gy.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}class Vb extends wb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=sb}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Yy.has(t)){const e=Vx(t);return e&&e.default||0}return t=Lb.has(t)?t:Ab(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Fb(e,t,n)}build(e,t,n){Mb(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){jb(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(Lb.has(i)?i:Ab(i),t.attrs[i])}(e,t,0,r)}mount(e){this.isSVGTag=Ob(e.tagName),super.mount(e)}}const Ub=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zb(e){return"string"===typeof e&&!e.includes("-")&&!!(Ub.indexOf(e)>-1||/[A-Z]/.test(e))}const Bb=(e,n)=>zb(e)?new Vb(n):new Pb(n,{allowProjection:e!==t.Fragment}),Wb=(0,t.createContext)({}),Hb=(0,t.createContext)({strict:!1}),qb=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Kb=(0,t.createContext)({});function Gb(e){const{initial:n,animate:r}=function(e,t){if(mb(e)){const{initial:t,animate:n}=e;return{initial:!1===t||db(t)?t:void 0,animate:db(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Kb));return(0,t.useMemo)(()=>({initial:n,animate:r}),[Yb(n),Yb(r)])}function Yb(e){return Array.isArray(e)?e.join(" "):e}const Xb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Qb(e,t,n){for(const r in t)Wx(t[r])||Cb(r,n)||(e[r]=t[r])}function $b(e,n){const r={};return Qb(r,e.style||{},e),Object.assign(r,function(e,n){let{transformTemplate:r}=e;return(0,t.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return _b(e,n,r),Object.assign({},e.vars,e.style)},[n])}(e,n)),r}function Jb(e,t){const n={},r=$b(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Zb=()=>c(c({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function ew(e,n,r,i){const s=(0,t.useMemo)(()=>{const t=Zb();return Mb(t,n,Ob(i),e.transformTemplate,e.style),c(c({},t.attrs),{},{style:c({},t.style)})},[n]);if(e.style){const t={};Qb(t,e.style,e),s.style=c(c({},t),s.style)}return s}const tw=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nw(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||tw.has(e)}let rw=e=>!nw(e);try{"function"===typeof(iw=require("@emotion/is-prop-valid").default)&&(rw=e=>e.startsWith("on")?!nw(e):iw(e))}catch(LF){}var iw;function sw(e,n,r,i,s){let{latestValues:a}=i,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(zb(e)?ew:Jb)(n,a,s,e),u=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(rw(i)||!0===n&&nw(i)||!t&&!nw(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof e,o),d=e!==t.Fragment?c(c(c({},u),l),{},{ref:r}):{},{children:h}=n,f=(0,t.useMemo)(()=>Wx(h)?h.get():h,[h]);return(0,t.createElement)(e,c(c({},d),{},{children:f}))}const aw=(0,t.createContext)(null);function ow(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}function lw(e){return Wx(e)?e.get():e}const cw=["transitionEnd","transition"];function uw(e,t,n,r){const s={},a=r(e,{});for(const i in a)s[i]=lw(a[i]);let{initial:o,animate:l}=e;const c=mb(e),u=pb(e);t&&u&&!c&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===l&&(l=t.animate));let d=!!n&&!1===n.initial;d=d||!1===o;const h=d?l:o;if(h&&"boolean"!==typeof h&&!ub(h)){const t=Array.isArray(h)?h:[h];for(let n=0;n<t.length;n++){const r=yb(e,t[n]);if(r){const{transitionEnd:e,transition:t}=r,n=i(r,cw);for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}const dw=e=>(n,r)=>{const i=(0,t.useContext)(Kb),s=(0,t.useContext)(aw),a=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:s}=e;return{latestValues:uw(t,n,r,i),renderState:s()}}(e,n,i,s);return r?a():ow(a)},hw=dw({scrapeMotionValuesFromProps:Tb,createRenderState:Xb}),fw=dw({scrapeMotionValuesFromProps:Fb,createRenderState:Zb});const mw=Symbol.for("motionComponentSymbol");function pw(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function gw(e,n,r){return(0,t.useCallback)(t=>{t&&e.onMount&&e.onMount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):pw(r)&&(r.current=t))},[n])}const yw="data-"+Ab("framerAppearId"),vw=(0,t.createContext)({}),xw=ab?t.useLayoutEffect:t.useEffect;function bw(e,n,r,i,s){var a,o,l,c;const{visualElement:u}=(0,t.useContext)(Kb),d=(0,t.useContext)(Hb),h=(0,t.useContext)(aw),f=(0,t.useContext)(qb).reducedMotion,m=(0,t.useRef)(null);i=i||d.renderer,!m.current&&i&&(m.current=i(e,{visualState:n,parent:u,props:r,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:f}));const p=m.current,g=(0,t.useContext)(vw);!p||p.projection||!s||"html"!==p.type&&"svg"!==p.type||function(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:ww(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(a)||o&&pw(o),visualElement:e,animationType:"string"===typeof s?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(m.current,r,s,g);const y=(0,t.useRef)(!1);(0,t.useInsertionEffect)(()=>{p&&y.current&&p.update(r,h)});const v=r[yw],x=(0,t.useRef)(Boolean(v)&&!(null!==(a=(o=window).MotionHandoffIsComplete)&&void 0!==a&&a.call(o,v))&&(null===(l=(c=window).MotionHasOptimisedAnimation)||void 0===l?void 0:l.call(c,v)));return xw(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),x.current&&p.animationState&&p.animationState.animateChanges())}),(0,t.useEffect)(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,v)}),x.current=!1),p.enteringChildren=void 0)}),p}function ww(e){if(e)return!1!==e.options.allowProjection?e.projection:ww(e.parent)}function kw(e){var n,r;let{forwardMotionProps:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;s&&function(e){for(const t in e)ib[t]=c(c({},ib[t]),e[t])}(s);const o=zb(e)?fw:hw;function l(n,r){let s;const l=c(c(c({},(0,t.useContext)(qb)),n),{},{layoutId:Nw(n)}),{isStatic:u}=l,d=Gb(n),h=o(n,u);if(!u&&ab){!function(){(0,t.useContext)(Hb).strict;0}();const n=function(e){const{drag:t,layout:n}=ib;if(!t&&!n)return{};const r=c(c({},t),n);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==n&&void 0!==n&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);s=n.MeasureLayout,d.visualElement=bw(e,h,l,a,n.ProjectionNode)}return(0,Wy.jsxs)(Kb.Provider,{value:d,children:[s&&d.visualElement?(0,Wy.jsx)(s,c({visualElement:d.visualElement},l)):null,sw(e,n,gw(h,d.visualElement,r),h,u,i)]})}l.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(n=null!==(r=e.displayName)&&void 0!==r?r:e.name)&&void 0!==n?n:"",")"));const u=(0,t.forwardRef)(l);return u[mw]=e,u}function Nw(e){let{layoutId:n}=e;const r=(0,t.useContext)(Wb).id;return r&&void 0!==n?r+"-"+n:n}function Sw(e,t){if("undefined"===typeof Proxy)return kw;const n=new Map,r=(n,r)=>kw(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,s)=>"create"===s?r:(n.has(s)||n.set(s,kw(s,void 0,e,t)),n.get(s))})}function _w(e,t,n){const r=e.getProps();return yb(r,t,void 0!==n?n:r.custom,e)}function jw(e,t){var n,r;return null!==(n=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const Ew=e=>Array.isArray(e),Cw=["transitionEnd","transition"];function Tw(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Zx(n))}function Pw(e){return Ew(e)?e[e.length-1]||0:e}function Aw(e,t){const n=e.getValue("willChange");if(r=n,Boolean(Wx(r)&&r.add))return n.add(t);if(!n&&Qv.WillChange){const n=new Qv.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function Iw(e){return e.props[yw]}function Dw(e){e.duration=0,e.type}const Rw=(e,t)=>n=>t(e(n)),Mw=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Rw)},Lw=e=>1e3*e,Ow=e=>e/1e3,Fw={layout:0,mainThread:0,waapi:0};function Vw(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Uw(e,t){return n=>n>0?t:e}const zw=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},Bw=[bx,xx,wx];function Ww(e){const t=(n=e,Bw.find(e=>e.test(n)));var n;if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let r=t.parse(e);return t===wx&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let s=0,a=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;s=Vw(i,e,t+1/3),a=Vw(i,e,t),o=Vw(i,e,t-1/3)}else s=a=o=r;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*o),alpha:i}}(r)),r}const Hw=(e,t)=>{const n=Ww(e),r=Ww(t);if(!n||!r)return Uw(e,t);const i=c({},n);return e=>(i.red=zw(n.red,r.red,e),i.green=zw(n.green,r.green,e),i.blue=zw(n.blue,r.blue,e),i.alpha=dv(n.alpha,r.alpha,e),xx.transform(i))},qw=new Set(["none","hidden"]);function Kw(e,t){return n=>dv(e,t,n)}function Gw(e){return"number"===typeof e?Kw:"string"===typeof e?lv(e)?Uw:kx.test(e)?Hw:Qw:Array.isArray(e)?Yw:"object"===typeof e?kx.test(e)?Hw:Xw:Uw}function Yw(e,t){const n=[...e],r=n.length,i=e.map((e,n)=>Gw(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function Xw(e,t){const n=c(c({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Gw(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const Qw=(e,t)=>{const n=Ax.createTransformer(t),r=Ex(e),i=Ex(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?qw.has(e)&&!i.values.length||qw.has(t)&&!r.values.length?function(e,t){return qw.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Mw(Yw(function(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){var i;const a=t.types[s],o=e.indexes[a][r[a]],l=null!==(i=e.values[o])&&void 0!==i?i:0;n[s]=l,r[a]++}return n}(r,i),i.values),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),Uw(e,t))};function $w(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return dv(e,t,n);return Gw(e)(e,t)}const Jw=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return ex.update(t,e)},stop:()=>tx(t),now:()=>nx.isProcessing?nx.timestamp:Kx.now()}},Zw=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(1e4*e(s/(i-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")},ek=2e4;function tk(e){let t=0;let n=e.next(t);for(;!n.done&&t<ek;)t+=50,n=e.next(t);return t>=ek?1/0:t}function nk(e,t,n){const r=Math.max(t-5,0);return Qx(n-e(r),t-r)}const rk={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ik=.001;function sk(e){let t,n,{duration:r=rk.duration,bounce:i=rk.bounce,velocity:s=rk.velocity,mass:a=rk.mass}=e;Lw(rk.maxDuration);let o=1-i;o=Cv(rk.minDamping,rk.maxDamping,o),r=Cv(rk.minDuration,rk.maxDuration,Ow(r)),o<1?(t=e=>{const t=e*o,n=t*r,i=t-s,a=ok(e,o),l=Math.exp(-n);return ik-i/a*l},n=e=>{const n=e*o*r,i=n*s+s,a=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=ok(Math.pow(e,2),o);return(-t(e)+ik>0?-1:1)*((i-a)*l)/c}):(t=e=>Math.exp(-e*r)*((e-s)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(s-e)));const l=function(e,t,n){let r=n;for(let i=1;i<ak;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=Lw(r),isNaN(l))return{stiffness:rk.stiffness,damping:rk.damping,duration:r};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*o*Math.sqrt(a*e),duration:r}}}const ak=12;function ok(e,t){return e*Math.sqrt(1-t*t)}const lk=["duration","bounce"],ck=["stiffness","damping","mass"];function uk(e,t){return t.some(t=>void 0!==e[t])}function dk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rk.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rk.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=function(e){let t=c({velocity:rk.velocity,stiffness:rk.stiffness,damping:rk.damping,mass:rk.mass,isResolvedFromDuration:!1},e);if(!uk(e,ck)&&uk(e,lk))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,s=2*Cv(.05,1,1-(e.bounce||0))*Math.sqrt(i);t=c(c({},t),{},{mass:rk.mass,stiffness:i,damping:s})}else{const n=sk(e);t=c(c(c({},t),n),{},{mass:rk.mass}),t.isResolvedFromDuration=!0}return t}(c(c({},n),{},{velocity:-Ow(n.velocity||0)})),p=f||0,g=u/(2*Math.sqrt(l*d)),y=a-s,v=Ow(Math.sqrt(l/d)),x=Math.abs(y)<5;let b;if(r||(r=x?rk.restSpeed.granular:rk.restSpeed.default),i||(i=x?rk.restDelta.granular:rk.restDelta.default),g<1){const e=ok(v,g);b=t=>{const n=Math.exp(-g*v*t);return a-n*((p+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}}else if(1===g)b=e=>a-Math.exp(-v*e)*(y+(p+v*y)*e);else{const e=v*Math.sqrt(g*g-1);b=t=>{const n=Math.exp(-g*v*t),r=Math.min(e*t,300);return a-n*((p+g*v*y)*Math.sinh(r)+e*y*Math.cosh(r))/e}}const w={calculatedDuration:m&&h||null,next:e=>{const t=b(e);if(m)o.done=e>=h;else{let n=0===e?p:0;g<1&&(n=0===e?Lw(p):nk(b,e,t));const s=Math.abs(n)<=r,l=Math.abs(a-t)<=i;o.done=s&&l}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(tk(w),ek),t=Zw(t=>w.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return w}function hk(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},m=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let p=r*n;const g=h+p,y=void 0===o?g:o(g);y!==g&&(p=y-h);const v=e=>-p*Math.exp(-e/i),x=e=>y+v(e),b=e=>{const t=v(e),n=x(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let w,k;const N=e=>{var t;(t=f.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,k=dk({keyframes:[f.value,m(f.value)],velocity:nk(x,e,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return k||void 0!==w||(t=!0,b(e),N(e)),void 0!==w&&e>=w?k.next(e-w):(!t&&b(e),f)}}}dk.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(c(c({},e),{},{keyframes:[0,t]})),r=Math.min(tk(n),ek);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:Ow(r)}}(e,100,dk);return e.ease=t.ease,e.duration=Lw(t.duration),e.type="keyframes",e};const fk=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function mk(e,t,n,r){if(e===t&&n===r)return Xv;const i=t=>function(e,t,n,r,i){let s,a,o=0;do{a=t+(n-t)/2,s=fk(a,r,i)-e,s>0?n=a:t=a}while(Math.abs(s)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:fk(i(e),t,r)}const pk=mk(.42,0,1,1),gk=mk(0,0,.58,1),yk=mk(.42,0,.58,1),vk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xk=e=>t=>1-e(1-t),bk=mk(.33,1.53,.69,.99),wk=xk(bk),kk=vk(wk),Nk=e=>(e*=2)<1?.5*wk(e):.5*(2-Math.pow(2,-10*(e-1))),Sk=e=>1-Math.sin(Math.acos(e)),_k=xk(Sk),jk=vk(Sk),Ek=e=>Array.isArray(e)&&"number"===typeof e[0],Ck={linear:Xv,easeIn:pk,easeInOut:yk,easeOut:gk,circIn:Sk,circInOut:jk,circOut:_k,backIn:wk,backInOut:kk,backOut:bk,anticipate:Nk},Tk=e=>{if(Ek(e)){e.length;const[t,n,r,i]=e;return mk(t,n,r,i)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),Ck[e]):e},Pk=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function Ak(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(t.length,1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],i=n||Qv.mix||$w,s=e.length-1;for(let a=0;a<s;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||Xv:t;n=Mw(e,n)}r.push(n)}return r}(t,r,i),l=o.length,c=n=>{if(a&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=Pk(e[r],e[r+1],n);return o[r](i)};return n?t=>c(Cv(e[0],e[s-1],t)):c}function Ik(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Pk(0,t,r);e.push(dv(n,1,i))}}(t,e.length-1),t}function Dk(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(Tk):Tk(i),a={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:Ik(n),t),l=Ak(o,n,{ease:Array.isArray(s)?s:(c=n,u=s,c.map(()=>u||yk).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(a.value=l(e),a.done=e>=t,a)}}const Rk=e=>null!==e;function Mk(e,t,n){let{repeat:r,repeatType:i="loop"}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=e.filter(Rk),o=s<0||r&&"loop"!==i&&r%2===1?0:a.length-1;return o&&void 0!==n?n:a[o]}const Lk={decay:hk,inertia:hk,tween:Dk,keyframes:Dk,spring:dk};function Ok(e){"string"===typeof e.type&&(e.type=Lk[e.type])}class Fk{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Vk=e=>e/100;class Uk extends Fk{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==Kx.now()&&this.tick(Kx.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},Fw.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Ok(e);const{type:t=Dk,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:s=0}=e;let{keyframes:a}=e;const o=t||Dk;o!==Dk&&"number"!==typeof a[0]&&(this.mixKeyframes=Mw(Vk,$w(a[0],a[1])),a=[0,100]);const l=o(c(c({},e),{},{keyframes:a}));"mirror"===i&&(this.mirroredGenerator=o(c(c({},e),{},{keyframes:[...a].reverse(),velocity:-s}))),null===l.calculatedDuration&&(l.calculatedDuration=tk(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:f,onUpdate:m,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,x=n;if(u){const e=Math.min(this.currentTime,r)/a;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/a)):"mirror"===d&&(x=s)),v=Cv(0,1,n)*a}const b=y?{done:!1,value:c[0]}:x.next(v);i&&(b.value=i(b.value));let{done:w}=b;y||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&f!==hk&&(b.value=Mk(c,this.options,p,this.speed)),m&&m(b.value),k&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return Ow(this.calculatedDuration)}get time(){return Ow(this.currentTime)}set time(e){var t;e=Lw(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Kx.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ow(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=Jw,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const i=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=i):null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:i),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kx.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,Fw.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function zk(e){let t;return()=>(void 0===t&&(t=e()),t)}const Bk=zk(()=>void 0!==window.ScrollTimeline),Wk={};function Hk(e,t){const n=zk(e);return()=>{var e;return null!==(e=Wk[t])&&void 0!==e?e:n()}}const qk=Hk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(MF){return!1}return!0},"linearEasing"),Kk=e=>{let[t,n,r,i]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(i,")")},Gk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kk([0,.65,.55,1]),circOut:Kk([.55,0,1,.45]),backIn:Kk([.31,.01,.66,-.59]),backOut:Kk([.33,1.53,.69,.99])};function Yk(e,t){return e?"function"===typeof e?qk()?Zw(e,t):"ease-out":Ek(e)?Kk(e):Array.isArray(e)?e.map(e=>Yk(e,t)||Gk.easeOut):Gk[e]:void 0}function Xk(e,t,n){let{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u={[t]:n};l&&(u.offset=l);const d=Yk(o,i);Array.isArray(d)&&(u.easing=d),Jv.value&&Fw.waapi++;const h={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"};c&&(h.pseudoElement=c);const f=e.animate(u,h);return Jv.value&&f.finished.finally(()=>{Fw.waapi--}),f}function Qk(e){return"function"===typeof e&&"applyToOptions"in e}const $k=["type"];class Jk extends Fk{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=a,this.options=e,e.type;const c=function(e){let{type:t}=e,n=i(e,$k);return Qk(t)&&qk()?t.applyToOptions(n):(null!==(r=n.duration)&&void 0!==r||(n.duration=300),null!==(s=n.ease)&&void 0!==s||(n.ease="easeOut"),n);var r,s}(e);this.animation=Xk(t,n,r,c,s),!1===c.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=Mk(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===l||void 0===l||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(MF){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return Ow(Number(n))}get time(){return Ow(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Lw(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&Bk()?(this.animation.timeline=t,Xv):n(this)}}const Zk={anticipate:Nk,backInOut:kk,circInOut:jk};function eN(e){"string"===typeof e.ease&&e.ease in Zk&&(e.ease=Zk[e.ease])}const tN=["motionValue","onUpdate","onComplete","element"];class nN extends Jk{constructor(e){eN(e),Ok(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const n=this.options,{motionValue:r,onUpdate:s,onComplete:a,element:o}=n,l=i(n,tN);if(!r)return;if(void 0!==e)return void r.set(e);const u=new Uk(c(c({},l),{},{autoplay:!1})),d=Lw(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);r.setWithVelocity(u.sample(d-10).value,u.sample(d).value,10),u.stop()}}const rN=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Ax.test(e)&&"0"!==e||e.startsWith("url(")));const iN=new Set(["opacity","clipPath","filter","transform"]),sN=zk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const aN=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class oN extends Fk{constructor(e){var t;let{autoplay:n=!0,delay:r=0,type:s="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:d,motionValue:h,element:f}=e,m=i(e,aN);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=Kx.now();const p=c({autoplay:n,delay:r,type:s,repeat:a,repeatDelay:o,repeatType:l,name:d,motionValue:h,element:f},m),g=(null===f||void 0===f?void 0:f.KeyframeResolver)||ux;this.keyframeResolver=new g(u,(e,t,n)=>this.onKeyframesResolved(e,t,p,!n),d,h,f),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:i,type:s,velocity:a,delay:o,isHandoff:l,onUpdate:u}=n;this.resolvedAt=Kx.now(),function(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],a=rN(i,t),o=rN(s,t);return"You are trying to animate ".concat(t,' from "').concat(i,'" to "').concat(s,'". "').concat(a?s:i,'" is not an animatable value.'),!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Qk(n))&&r)}(e,i,s,a)||(!Qv.instantAnimations&&o||null===u||void 0===u||u(Mk(e,n,t)),e[0]=e[e.length-1],Dw(n),n.repeat=0);const d=c(c({startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),h=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!((null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return sN()&&r&&iN.has(r)&&("transform"!==r||!c)&&!l&&!i&&"mirror"!==s&&0!==a&&"inertia"!==o}(d)?new nN(c(c({},d),{},{element:d.motionValue.owner.current})):new Uk(d);h.finished.then(()=>this.notifyFinished()).catch(Xv),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),ox=!0,cx(),lx(),ox=!1);return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const lN=e=>null!==e;const cN={type:"spring",stiffness:500,damping:25,restSpeed:10},uN={type:"keyframes",duration:.8},dN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hN=(e,t)=>{let{keyframes:n}=t;return n.length>2?uN:Yy.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:cN:dN},fN=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const mN=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return o=>{const l=jw(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d-=Lw(u);const h=c(c({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},l),{},{delay:-d,onUpdate:e=>{t.set(e),l.onUpdate&&l.onUpdate(e)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:s});(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:a,repeat:o,repeatType:l,repeatDelay:c,from:u,elapsed:d}=e,h=i(e,fN);return!!Object.keys(h).length})(l)||Object.assign(h,hN(e,h)),h.duration&&(h.duration=Lw(h.duration)),h.repeatDelay&&(h.repeatDelay=Lw(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let f=!1;if((!1===h.type||0===h.duration&&!h.repeatDelay)&&(Dw(h),0===h.delay&&(f=!0)),(Qv.instantAnimations||Qv.skipAnimations)&&(f=!0,Dw(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,f&&!a&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:i="loop"}=t;const s=e.filter(lN),a=r&&"loop"!==i&&r%2===1?0:s.length-1;return a&&void 0!==n?n:s[a]}(h.keyframes,l);if(void 0!==e)return void ex.update(()=>{h.onUpdate(e),h.onComplete()})}return l.isSync?new Uk(h):new oN(h)}},pN=["transition","transitionEnd"];function gN(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function yN(e,t){let{delay:n=0,transitionOverride:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:a=e.getDefaultTransition(),transitionEnd:o}=t,l=i(t,pN);r&&(a=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const i in l){var h;const t=e.getValue(i,null!==(h=e.latestValues[i])&&void 0!==h?h:null),r=l[i];if(void 0===r||d&&gN(d,i))continue;const s=c({delay:n},jw(a||{},i)),o=t.get();if(void 0!==o&&!t.isAnimating&&!Array.isArray(r)&&r===o&&!s.velocity)continue;let f=!1;if(window.MotionHandoffAnimation){const t=Iw(e);if(t){const e=window.MotionHandoffAnimation(t,i,ex);null!==e&&(s.startTime=e,f=!0)}}Aw(e,i),t.start(mN(i,t,r,e.shouldReduceMotion&&Ev.has(i)?{type:!1}:s,e,f));const m=t.animation;m&&u.push(m)}return o&&Promise.all(u).then(()=>{ex.update(()=>{o&&function(e,t){let n=_w(e,t)||{},{transitionEnd:r={},transition:s={}}=n,a=i(n,Cw);a=c(c({},a),r);for(const i in a)Tw(e,i,Pw(a[i]))}(e,o)})}),u}function vN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*r;return"function"===typeof n?n(s,a):1===i?s*r:o-s*r}function xN(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=_w(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const a=i?()=>Promise.all(yN(e,i,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0;const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(xN(l,t,c(c({},a),{},{delay:n+("function"===typeof r?0:r)+vN(e.variantChildren,l,r,i,s)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,n,i,a,o,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[a,o]:[o,a];return e().then(()=>t())}return Promise.all([a(),o(r.delay)])}function bN(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const wN=fb.length;function kN(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&kN(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<wN;n++){const r=fb[n],i=e.props[r];(db(i)||!1===i)&&(t[r]=i)}return t}const NN=["transition","transitionEnd"],SN=[...hb].reverse(),_N=hb.length;function jN(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>xN(e,t,r));n=Promise.all(i)}else if("string"===typeof t)n=xN(e,t,r);else{const i="function"===typeof t?_w(e,t,r.custom):t;n=Promise.all(yN(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,r)}))}function EN(e){let t=jN(e),n=PN(),r=!0;const s=t=>(n,r)=>{var s;const a=_w(e,r,"exit"===t?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);if(a){const{transition:e,transitionEnd:t}=a,r=i(a,NN);n=c(c(c({},n),r),t)}return n};function a(i){const{props:a}=e,o=kN(e.parent)||{},l=[],u=new Set;let d={},h=1/0;for(let t=0;t<_N;t++){const f=SN[t],m=n[f],p=void 0!==a[f]?a[f]:o[f],g=db(p),y=f===i?m.isActive:null;!1===y&&(h=t);let v=p===o[f]&&p!==a[f]&&g;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),m.protectedKeys=c({},d),!m.isActive&&null===y||!p&&!m.prevProp||ub(p)||"boolean"===typeof p)continue;const x=CN(m.prevProp,p);let b=x||f===i&&m.isActive&&!v&&g||t>h&&g,w=!1;const k=Array.isArray(p)?p:[p];let N=k.reduce(s(f),{});!1===y&&(N={});const{prevResolvedValues:S={}}=m,_=c(c({},S),N),j=t=>{b=!0,u.has(t)&&(w=!0,u.delete(t)),m.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in _){const t=N[e],n=S[e];if(d.hasOwnProperty(e))continue;let r=!1;r=Ew(t)&&Ew(n)?!bN(t,n):t!==n,r?void 0!==t&&null!==t?j(e):u.add(e):void 0!==t&&u.has(e)?j(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=N,m.isActive&&(d=c(c({},d),N)),r&&e.blockInitialAnimation&&(b=!1);const E=v&&x;b&&(!E||w)&&l.push(...k.map(t=>{const n={type:f};if("string"===typeof t&&r&&!E&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,i=_w(r,t);if(r.enteringChildren&&i){const{delayChildren:t}=i.transition||{};n.delay=vN(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(u.size){const t={};if("boolean"!==typeof a.initial){const n=_w(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}u.forEach(n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null}),l.push({animation:t})}let f=Boolean(l.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const s=a(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=PN(),r=!0}}}function CN(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!bN(t,e)}function TN(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PN(){return{animate:TN(!0),whileInView:TN(),whileHover:TN(),whileTap:TN(),whileDrag:TN(),whileFocus:TN(),exit:TN()}}class AN{constructor(e){this.isMounted=!1,this.node=e}update(){}}let IN=0;const DN={animation:{Feature:class extends AN{constructor(e){super(e),e.animationState||(e.animationState=EN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ub(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends AN{constructor(){super(...arguments),this.id=IN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},RN={x:!1,y:!1};function MN(){return RN.x||RN.y}function LN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const ON=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function FN(e){return{point:{x:e.pageX,y:e.pageY}}}function VN(e,t,n,r){return LN(e,t,(e=>t=>ON(t)&&e(t,FN(t)))(n),r)}function UN(e){return e.max-e.min}function zN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=dv(t.min,t.max,e.origin),e.scale=UN(n)/UN(t),e.translate=dv(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function BN(e,t,n,r){zN(e.x,t.x,n.x,r?r.originX:void 0),zN(e.y,t.y,n.y,r?r.originY:void 0)}function WN(e,t,n){e.min=n.min+t.min,e.max=e.min+UN(t)}function HN(e,t,n){e.min=t.min-n.min,e.max=e.min+UN(t)}function qN(e,t,n){HN(e.x,t.x,n.x),HN(e.y,t.y,n.y)}function KN(e){return[e("x"),e("y")]}const GN=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},YN=(e,t)=>Math.abs(e-t);class XN{constructor(e,t){let{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=JN(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=YN(e.x,t.x),r=YN(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=nx;this.history.push(c(c({},r),{},{timestamp:i}));const{onStart:s,onMove:a}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=QN(t,this.transformPagePoint),ex.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=JN("pointercancel"===e.type?this.lastMoveEventInfo:QN(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!ON(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=r||window;const a=QN(FN(e),this.transformPagePoint),{point:o}=a,{timestamp:l}=nx;this.history=[c(c({},o),{},{timestamp:l})];const{onSessionStart:u}=t;u&&u(e,JN(a,this.history)),this.removeListeners=Mw(VN(this.contextWindow,"pointermove",this.handlePointerMove),VN(this.contextWindow,"pointerup",this.handlePointerUp),VN(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),tx(this.updatePoint)}}function QN(e,t){return t?{point:t(e.point)}:e}function $N(e,t){return{x:e.x-t.x,y:e.y-t.y}}function JN(e,t){let{point:n}=e;return{point:n,delta:$N(n,eS(t)),offset:$N(n,ZN(t)),velocity:tS(t,.1)}}function ZN(e){return e[0]}function eS(e){return e[e.length-1]}function tS(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=eS(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Lw(t)));)n--;if(!r)return{x:0,y:0};const s=Ow(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function nS(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function rS(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const iS=.35;function sS(e,t,n){return{min:aS(e,t),max:aS(e,n)}}function aS(e,t){return"number"===typeof e?e:e[t]||0}const oS=new WeakMap;class lS{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new XN(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(FN(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?RN[s]?null:(RN[s]=!0,()=>{RN[s]=!1}):RN.x||RN.y?null:(RN.x=RN.y=!0,()=>{RN.x=RN.y=!1}),!this.openDragLock))return;var s;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),KN(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Rv.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=UN(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&ex.postRender(()=>i(e,t)),Aw(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>KN(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,distanceThreshold:n,contextWindow:GN(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&ex.postRender(()=>a(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!cS(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?dv(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?dv(i,e,n.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&pw(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:i,right:s}=t;return{x:nS(e.x,r,s),y:nS(e.y,n,i)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iS;return!1===e?e=0:!0===e&&(e=iS),{x:sS(e,"left","right"),y:sS(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&KN(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!pw(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=jv(e,n),{scroll:i}=t;return i&&(Nv(r.x,i.offset.x),Nv(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:rS(e.x,t.x),y:rS(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=uv(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=KN(a=>{if(!cS(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});const u=r?200:1e6,d=r?40:1e7,h=c(c({type:"inertia",velocity:n?e[a]:0,bounceStiffness:u,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},i),l);return this.startAxisValueAnimation(a,h)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Aw(this.visualElement,e),n.start(mN(e,n,0,t,this.visualElement,!1))}stopAnimation(){KN(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){KN(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){KN(t=>{const{drag:n}=this.getProps();if(!cS(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-dv(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!pw(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};KN(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=UN(e),i=UN(t);return i>r?n=Pk(t.min,t.max-r,e.min):r>i&&(n=Pk(e.min,e.max-i,t.min)),Cv(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),KN(t=>{if(!cS(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(dv(i,s,r[t]))})}addListeners(){if(!this.visualElement.current)return;oS.set(this.visualElement,this);const e=VN(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();pw(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ex.read(t);const i=LN(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(KN(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=iS,dragMomentum:a=!0}=e;return c(c({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:a})}}function cS(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const uS=e=>(t,n)=>{e&&ex.postRender(()=>e(t,n))};function dS(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(aw);if(null===n)return[!0,null];const{isPresent:r,onExitComplete:i,register:s}=n,a=(0,t.useId)();(0,t.useEffect)(()=>{if(e)return s(a)},[e]);const o=(0,t.useCallback)(()=>e&&i&&i(a),[a,i,e]);return!r&&i?[!1,o]:[!0]}const hS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const mS={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Mv.test(e))return e;e=parseFloat(e)}const n=fS(e,t.target.x),r=fS(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},pS={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,s=Ax.parse(e);if(s.length>5)return i;const a=Ax.createTransformer(e),o="number"!==typeof s[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;s[0+o]/=l,s[1+o]/=c;const u=dv(l,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=u),"number"===typeof s[3+o]&&(s[3+o]/=u),a(s)}};let gS=!1;class yS extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)Eb[t]=e[t],av(t)&&(Eb[t].isCSSVariable=!0)}(xS),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),gS&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions(c(c({},i.options),{},{onExitComplete:()=>this.safeToRemove()}))),hS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:s}=n;return s?(s.isPresent=i,gS=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==i?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||ex.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;gS=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vS(e){const[n,r]=dS(),i=(0,t.useContext)(Wb);return(0,Wy.jsx)(yS,c(c({},e),{},{layoutGroup:i,switchLayoutGroup:(0,t.useContext)(vw),isPresent:n,safeToRemove:r}))}const xS={borderRadius:c(c({},mS),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:mS,borderTopRightRadius:mS,borderBottomLeftRadius:mS,borderBottomRightRadius:mS,boxShadow:pS};function bS(e){return"object"===typeof e&&null!==e}function wS(e){return bS(e)&&"ownerSVGElement"in e}const kS=(e,t)=>e.depth-t.depth;class NS{constructor(){this.children=[],this.isDirty=!1}add(e){Gx(this.children,e),this.isDirty=!0}remove(e){Yx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kS),this.isDirty=!1,this.children.forEach(e)}}function SS(e,t){const n=Kx.now(),r=i=>{let{timestamp:s}=i;const a=s-n;a>=t&&(tx(r),e(a-t))};return ex.setup(r,!0),()=>tx(r)}const _S=["TopLeft","TopRight","BottomLeft","BottomRight"],jS=_S.length,ES=e=>"string"===typeof e?parseFloat(e):e,CS=e=>"number"===typeof e||Mv.test(e);function TS(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const PS=IS(0,.5,_k),AS=IS(.5,.95,Xv);function IS(e,t,n){return r=>r<e?0:r>t?1:n(Pk(e,t,r))}function DS(e,t){e.min=t.min,e.max=t.max}function RS(e,t){DS(e.x,t.x),DS(e.y,t.y)}function MS(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function LS(e,t,n,r,i){return e=yv(e-=t,1/n,r),void 0!==i&&(e=yv(e,1/i,r)),e}function OS(e,t,n,r,i){let[s,a,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Rv.test(t)&&(t=parseFloat(t),t=dv(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let o=dv(s.min,s.max,r);e===s&&(o-=t),e.min=LS(e.min,t,n,o,i),e.max=LS(e.max,t,n,o,i)}(e,t[s],t[a],t[o],t.scale,r,i)}const FS=["x","scaleX","originX"],VS=["y","scaleY","originY"];function US(e,t,n,r){OS(e.x,t,FS,n?n.x:void 0,r?r.x:void 0),OS(e.y,t,VS,n?n.y:void 0,r?r.y:void 0)}function zS(e){return 0===e.translate&&1===e.scale}function BS(e){return zS(e.x)&&zS(e.y)}function WS(e,t){return e.min===t.min&&e.max===t.max}function HS(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function qS(e,t){return HS(e.x,t.x)&&HS(e.y,t.y)}function KS(e){return UN(e.x)/UN(e.y)}function GS(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class YS{constructor(){this.members=[]}add(e){Gx(this.members,e),e.scheduleRender()}remove(e){if(Yx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const XS={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},QS=["","X","Y","Z"];let $S=0;function JS(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ZS(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Iw(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ex,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ZS(r)}function e_(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=$S++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jv.value&&(XS.nodes=XS.calculatedTargetDeltas=XS.calculatedProjections=0),this.nodes.forEach(r_),this.nodes.forEach(u_),this.nodes.forEach(d_),this.nodes.forEach(i_),Jv.addProjectionMetrics&&Jv.addProjectionMetrics(XS)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new NS)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Xx),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=wS(e)&&!(wS(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),t){let n,r=0;const i=()=>this.root.updateBlockedByResize=!1;ex.read(()=>{r=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=SS(i,250),hS.hasAnimatedSinceResize&&(hS.hasAnimatedSinceResize=!1,this.nodes.forEach(c_)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||s.getDefaultTransition()||y_,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=s.getProps(),u=!this.targetLayout||!qS(this.targetLayout,i),d=!n&&r;if(this.options.layoutRoot||this.resumeFrom||d||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=c(c({},jw(a,"layout")),{},{onPlay:o,onComplete:l});(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else n||c_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),tx(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(h_),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ZS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(a_);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(o_);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(l_),this.nodes.forEach(t_),this.nodes.forEach(n_)):this.nodes.forEach(o_),this.clearAllSnapshots();const e=Kx.now();nx.delta=Cv(0,1e3/60,e-nx.timestamp),nx.timestamp=e,nx.isProcessing=!0,rx.update.process(nx),rx.preRender.process(nx),rx.render.process(nx),nx.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(s_),this.sharedNodes.forEach(f_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ex.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ex.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||UN(this.snapshot.measuredBox.x)||UN(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!BS(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||mv(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),b_((r=n).x),b_(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(k_))){const{scroll:e}=this.root;e&&(Nv(n.x,e.offset.x),Nv(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(RS(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:i,options:s}=t;t!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&RS(n,e),Nv(n.x,i.offset.x),Nv(n.y,i.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};RS(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&_v(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),mv(e.latestValues)&&_v(n,e.latestValues)}return mv(this.latestValues)&&_v(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};RS(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!mv(e.latestValues))continue;fv(e.latestValues)&&e.updateSnapshot();const r=sb();RS(r,e.measurePageBox()),US(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return mv(this.latestValues)&&US(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=c(c(c({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nx.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=nx.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},qN(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),RS(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,WN(a.x,o.x,l.x),WN(a.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):RS(this.target,this.layout.layoutBox),bv(this.target,this.targetDelta)):RS(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},qN(this.relativeTargetOrigin,this.target,e.target),RS(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jv.value&&XS.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!fv(this.parent.latestValues)&&!pv(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===nx.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;RS(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let s,a;t.x=t.y=1;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:i}=s.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&_v(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,bv(e,a)),r&&mv(s.latestValues)&&_v(e,s.latestValues))}t.x<kv&&t.x>wv&&(t.x=1),t.y<kv&&t.y>wv&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(MS(this.prevProjectionDelta.x,this.projectionDelta.x),MS(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),BN(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===o&&GS(this.projectionDelta.x,this.prevProjectionDelta.x)&&GS(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Jv.value&&XS.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i=c({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,d=Boolean(o&&!u&&!0===this.options.crossfade&&!this.path.some(g_));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,c;m_(s.x,e.x,n),m_(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qN(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){p_(e.x,t.x,n.x,r),p_(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),h&&(l=this.relativeTarget,c=h,WS(l.x,c.x)&&WS(l.y,c.y))&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),RS(h,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,n,r,i,s){var a,o;if(i)e.opacity=dv(0,null!==(a=n.opacity)&&void 0!==a?a:1,PS(r)),e.opacityExit=dv(null!==(o=t.opacity)&&void 0!==o?o:1,0,AS(r));else if(s){var l,c;e.opacity=dv(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,r)}for(let u=0;u<jS;u++){const i="border".concat(_S[u],"Radius");let s=TS(t,i),a=TS(n,i);void 0===s&&void 0===a||(s||(s=0),a||(a=0),0===s||0===a||CS(s)===CS(a)?(e[i]=Math.max(dv(ES(s),ES(a),r),0),(Rv.test(a)||Rv.test(s))&&(e[i]+="%")):e[i]=a)}(t.rotate||n.rotate)&&(e.rotate=dv(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,d,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(tx(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ex.update(()=>{hS.hasAnimatedSinceResize=!0,Fw.layout++,this.motionValue||(this.motionValue=Zx(0)),this.currentAnimation=function(e,t,n){const r=Wx(e)?e:Zx(e);return r.start(mN("",r,t,n)),r.animation}(this.motionValue,[0,1e3],c(c({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{Fw.layout--},onComplete:()=>{Fw.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&w_(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=UN(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=UN(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}RS(t,n),_v(t,i),BN(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new YS);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&JS("z",e,r,this.animationValues);for(let i=0;i<QS.length;i++)JS("rotate".concat(QS[i]),e,r,this.animationValues),JS("skew".concat(QS[i]),e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=lw(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=lw(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!mv(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let s=function(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(null===n||void 0===n?void 0:n.z)||0;if((i||s||a)&&(r="translate3d(".concat(i,"px, ").concat(s,"px, ").concat(a,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:a,skewY:o}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),i&&(r+="rotateX(".concat(i,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) ")),a&&(r+="skewX(".concat(a,"deg) ")),o&&(r+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+="scale(".concat(o,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);n&&(s=n(i,s)),e.transform=s;const{x:a,y:o}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*a.origin,"% ").concat(100*o.origin,"% 0"),r.animationValues)?e.opacity=r===this?null!==(l=null!==(c=i.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const u in Eb){if(void 0===i[u])continue;const{correct:t,applyTo:n,isCSSVariable:a}=Eb[u],o="none"===s?i[u]:t(i[u],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=o}else a?this.options.visualElement.renderState.vars[u]=o:e[u]=o}this.options.layoutId&&(e.pointerEvents=r===this?lw(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(a_),this.root.sharedNodes.clear()}}}function t_(e){e.updateLayout()}function n_(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,s=n.source!==e.layout.source;"size"===i?KN(e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],i=UN(r);r.min=t[e].min,r.max=r.min+i}):w_(i,n.layoutBox,t)&&KN(r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],a=UN(t[r]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};BN(a,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?BN(o,e.applyTransform(r,!0),n.measuredBox):BN(o,t,n.layoutBox);const l=!BS(a);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const a={x:{min:0,max:0},y:{min:0,max:0}};qN(a,n.layoutBox,i.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};qN(o,t,s.layoutBox),qS(a,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function r_(e){Jv.value&&XS.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function i_(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function s_(e){e.clearSnapshot()}function a_(e){e.clearMeasurements()}function o_(e){e.isLayoutDirty=!1}function l_(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function c_(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function u_(e){e.resolveTargetDelta()}function d_(e){e.calcProjection()}function h_(e){e.resetSkewAndRotation()}function f_(e){e.removeLeadSnapshot()}function m_(e,t,n){e.translate=dv(t.translate,0,n),e.scale=dv(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function p_(e,t,n,r){e.min=dv(t.min,n.min,r),e.max=dv(t.max,n.max,r)}function g_(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const y_={duration:.45,ease:[.4,0,.1,1]},v_=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),x_=v_("applewebkit/")&&!v_("chrome/")?Math.round:Xv;function b_(e){e.min=x_(e.min),e.max=x_(e.max)}function w_(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=KS(t),i=KS(n),s=.2,!(Math.abs(r-i)<=s));var r,i,s}function k_(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const N_=e_({attachResizeListener:(e,t)=>LN(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),S_={current:void 0},__=e_({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!S_.current){const e=new N_({});e.mount(window),e.setOptions({layoutScroll:!0}),S_.current=e}return S_.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),j_={pan:{Feature:class extends AN{constructor(){super(...arguments),this.removePointerDownListener=Xv}onPointerDown(e){this.session=new XN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:uS(e),onStart:uS(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&ex.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=VN(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends AN{constructor(e){super(e),this.removeGroupControls=Xv,this.removeListeners=Xv,this.controls=new lS(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xv}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:__,MeasureLayout:vS}};function E_(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let i=document;t&&(i=t.current);const s=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),r=new AbortController;return[n,c(c({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function C_(e){return!("touch"===e.pointerType||MN())}function T_(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&ex.postRender(()=>i(t,FN(t)))}function P_(e){return bS(e)&&"offsetHeight"in e}const A_=(e,t)=>!!t&&(e===t||A_(e,t.parentElement)),I_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const D_=new WeakSet;function R_(e){return t=>{"Enter"===t.key&&e(t)}}function M_(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function L_(e){return ON(e)&&!MN()}function O_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=E_(e,n),a=e=>{const r=e.currentTarget;if(!L_(e))return;D_.add(r);const s=t(r,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),D_.has(r)&&D_.delete(r),L_(e)&&"function"===typeof s&&s(e,{success:t})},o=e=>{a(e,r===window||r===document||n.useGlobalTarget||A_(r,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),P_(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=R_(()=>{if(D_.has(n))return;M_(n,"down");const e=R_(()=>{M_(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>M_(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,i)),t=e,I_.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}function F_(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&ex.postRender(()=>i(t,FN(t)))}const V_=["root"],U_=new WeakMap,z_=new WeakMap,B_=e=>{const t=U_.get(e.target);t&&t(e)},W_=e=>{e.forEach(B_)};function H_(e,t,n){const r=function(e){let{root:t}=e,n=i(e,V_);const r=t||document;z_.has(r)||z_.set(r,{});const s=z_.get(r),a=JSON.stringify(n);return s[a]||(s[a]=new IntersectionObserver(W_,c({root:t},n))),s[a]}(t);return U_.set(e,n),r.observe(e),()=>{U_.delete(e),r.unobserve(e)}}const q_={some:0,all:1};const K_={inView:{Feature:class extends AN{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:q_[r]};return H_(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends AN{mount(){const{current:e}=this.node;e&&(this.unmount=O_(e,(e,t)=>(F_(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return F_(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends AN{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(MF){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mw(LN(this.node.current,"focus",()=>this.onFocus()),LN(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends AN{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=E_(e,n),a=e=>{if(!C_(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const s=e=>{C_(e)&&(r(e),n.removeEventListener("pointerleave",s))};n.addEventListener("pointerleave",s,i)};return r.forEach(e=>{e.addEventListener("pointerenter",a,i)}),s}(e,(e,t)=>(T_(this.node,t,"Start"),e=>T_(this.node,e,"End"))))}unmount(){}}}},G_={layout:{ProjectionNode:__,MeasureLayout:vS}},Y_=Sw(c(c(c(c({},DN),K_),j_),G_),Bb);var X_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Q_=t.createContext&&t.createContext(X_),$_=["attr","size","title"];function J_(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z_(){return Z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z_.apply(this,arguments)}function ej(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ej(Object(n),!0).forEach(function(t){nj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ej(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rj(e){return e&&e.map((e,n)=>t.createElement(e.tag,tj({key:n},e.attr),rj(e.child)))}function ij(e){return n=>t.createElement(sj,Z_({attr:tj({},e.attr)},n),rj(e.child))}function sj(e){var n=n=>{var r,{attr:i,size:s,title:a}=e,o=J_(e,$_),l=s||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Z_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:r,style:tj(tj({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&t.createElement("title",null,a),e.children)};return void 0!==Q_?t.createElement(Q_.Consumer,null,e=>n(e)):n(X_)}function aj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function oj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function lj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function cj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function uj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function dj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function hj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function fj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function mj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function pj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function gj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function yj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function vj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(e)}function xj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(e)}function bj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function wj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function kj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function Nj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function Sj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"},child:[]}]})(e)}function _j(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function jj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function Ej(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function Cj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function Tj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"},child:[]},{tag:"path",attr:{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"},child:[]},{tag:"line",attr:{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"},child:[]}]})(e)}function Pj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(e)}function Aj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(e)}function Ij(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"},child:[]},{tag:"rect",attr:{x:"2",y:"9",width:"4",height:"12"},child:[]},{tag:"circle",attr:{cx:"4",cy:"4",r:"2"},child:[]}]})(e)}function Dj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(e)}function Rj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function Mj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"},child:[]},{tag:"polyline",attr:{points:"10 17 15 12 10 7"},child:[]},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"},child:[]}]})(e)}function Lj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(e)}function Oj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Fj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function Vj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Uj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function zj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(e)}function Bj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function Wj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function Hj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function qj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function Kj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"5",width:"22",height:"14",rx:"7",ry:"7"},child:[]},{tag:"circle",attr:{cx:"8",cy:"12",r:"3"},child:[]}]})(e)}function Gj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"5",width:"22",height:"14",rx:"7",ry:"7"},child:[]},{tag:"circle",attr:{cx:"16",cy:"12",r:"3"},child:[]}]})(e)}function Yj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function Xj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Qj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"},child:[]}]})(e)}function $j(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function Jj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function Zj(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function eE(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function tE(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function nE(e){return ij({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}class rE extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=P_(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function iE(e){let{children:n,isPresent:r,anchorX:i,root:s}=e;const a=(0,t.useId)(),o=(0,t.useRef)(null),l=(0,t.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,t.useContext)(qb);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:u,right:d}=l.current;if(r||!o.current||!e||!t)return;const h="left"===i?"left: ".concat(u):"right: ".concat(d);o.current.dataset.motionPopId=a;const f=document.createElement("style");c&&(f.nonce=c);const m=null!==s&&void 0!==s?s:document.head;return m.appendChild(f),f.sheet&&f.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(h,"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{m.contains(f)&&m.removeChild(f)}},[r]),(0,Wy.jsx)(rE,{isPresent:r,childRef:o,sizeRef:l,children:t.cloneElement(n,{ref:o})})}const sE=e=>{let{children:n,initial:r,isPresent:i,onExitComplete:s,custom:a,presenceAffectsLayout:o,mode:l,anchorX:u,root:d}=e;const h=ow(aE),f=(0,t.useId)();let m=!0,p=(0,t.useMemo)(()=>(m=!1,{id:f,initial:r,isPresent:i,custom:a,onExitComplete:e=>{h.set(e,!0);for(const t of h.values())if(!t)return;s&&s()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[i,h,s]);return o&&m&&(p=c({},p)),(0,t.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[i]),t.useEffect(()=>{!i&&!h.size&&s&&s()},[i]),"popLayout"===l&&(n=(0,Wy.jsx)(iE,{isPresent:i,anchorX:u,root:d,children:n})),(0,Wy.jsx)(aw.Provider,{value:p,children:n})};function aE(){return new Map}const oE=e=>e.key||"";function lE(e){const n=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&n.push(e)}),n}const cE=e=>{let{children:n,custom:r,initial:i=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:u}=e;const[d,h]=dS(l),f=(0,t.useMemo)(()=>lE(n),[n]),m=l&&!d?[]:f.map(oE),p=(0,t.useRef)(!0),g=(0,t.useRef)(f),y=ow(()=>new Map),[v,x]=(0,t.useState)(f),[b,w]=(0,t.useState)(f);xw(()=>{p.current=!1,g.current=f;for(let e=0;e<b.length;e++){const t=oE(b[e]);m.includes(t)?y.delete(t):!0!==y.get(t)&&y.set(t,!1)}},[b,m.length,m.join("-")]);const k=[];if(f!==v){let e=[...f];for(let t=0;t<b.length;t++){const n=b[t],r=oE(n);m.includes(r)||(e.splice(t,0,n),k.push(n))}return"wait"===o&&k.length&&(e=k),w(lE(e)),x(f),null}const{forceRender:N}=(0,t.useContext)(Wb);return(0,Wy.jsx)(Wy.Fragment,{children:b.map(e=>{const t=oE(e),n=!(l&&!d)&&(f===b||m.includes(t));return(0,Wy.jsx)(sE,{isPresent:n,initial:!(p.current&&!i)&&void 0,custom:r,presenceAffectsLayout:a,mode:o,root:u,onExitComplete:n?void 0:()=>{if(!y.has(t))return;y.set(t,!0);let e=!0;y.forEach(t=>{t||(e=!1)}),e&&(null===N||void 0===N||N(),w(g.current),l&&(null===h||void 0===h||h()),s&&s())},anchorX:c,children:e},t)})})},uE=["children","type","variant","size","className","disabled","isLoading","onClick","fullWidth"],dE={primary:"bg-primary-600 hover:bg-primary-700 text-white",secondary:"bg-secondary-600 hover:bg-secondary-700 text-white",accent:"bg-accent-500 hover:bg-accent-600 text-white",outline:"bg-transparent border border-primary-600 text-primary-600 hover:bg-primary-50",ghost:"bg-transparent hover:bg-gray-100 text-gray-800",danger:"bg-red-600 hover:bg-red-700 text-white"},hE={sm:"py-1 px-3 text-sm",md:"py-2 px-4 text-base",lg:"py-3 px-6 text-lg"};const fE=function(e){let{children:t,type:n="button",variant:r="primary",size:s="md",className:a="",disabled:o=!1,isLoading:l=!1,onClick:u,fullWidth:d=!1}=e,h=i(e,uE);return(0,Wy.jsx)(Y_.button,c(c({type:n,className:"\n        ".concat(dE[r]," \n        ").concat(hE[s]," \n        ").concat(d?"w-full":""," \n        rounded-md font-medium transition-colors duration-200 \n        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\n        disabled:opacity-50 disabled:cursor-not-allowed\n        flex items-center justify-center\n        ").concat(a,"\n      "),disabled:o||l,onClick:u,whileTap:{scale:.98},whileHover:{scale:1.01}},h),{},{children:l?(0,Wy.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Wy.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Wy.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Wy.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):t}))};const mE=function(){const[e,n]=(0,t.useState)(!1),{currentUser:r,logout:i}=qy(),s=me(),a=async()=>{try{await i(),s("/")}catch(e){console.error("Failed to log out",e)}};return(0,Wy.jsxs)("nav",{className:"bg-white shadow-sm",children:[(0,Wy.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Wy.jsxs)("div",{className:"flex justify-between h-16",children:[(0,Wy.jsx)("div",{className:"flex items-center",children:(0,Wy.jsx)(yt,{to:"/",className:"flex-shrink-0 flex items-center",children:(0,Wy.jsx)(Y_.div,{whileHover:{scale:1.05},className:"text-primary-600 font-display font-bold text-2xl",children:"PayNow"})})}),(0,Wy.jsx)("div",{className:"hidden md:flex md:items-center md:space-x-4",children:r?(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsxs)(yt,{to:"/dashboard",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 flex items-center",children:[(0,Wy.jsx)(Ej,{className:"mr-1.5 w-4 h-4"})," Dashboard"]}),(0,Wy.jsxs)(yt,{to:"/dashboard/links",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 flex items-center",children:[(0,Wy.jsx)(Aj,{className:"mr-1.5 w-4 h-4"})," Payment Links"]}),(0,Wy.jsxs)(yt,{to:"/dashboard/transactions",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 flex items-center",children:[(0,Wy.jsx)(bj,{className:"mr-1.5 w-4 h-4"})," Transactions"]}),(0,Wy.jsx)("div",{className:"ml-4 flex items-center",children:(0,Wy.jsxs)("button",{onClick:a,className:"flex items-center px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50",children:[(0,Wy.jsx)(Lj,{className:"mr-1"})," Logout"]})})]}):(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsxs)(yt,{to:"/login",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 flex items-center",children:[(0,Wy.jsx)(Mj,{className:"mr-1.5 w-4 h-4"})," Login"]}),(0,Wy.jsx)(yt,{to:"/register",children:(0,Wy.jsxs)(fE,{variant:"primary",size:"sm",children:[(0,Wy.jsx)($j,{className:"mr-1.5 w-4 h-4"})," Sign Up"]})})]})}),(0,Wy.jsx)("div",{className:"flex items-center md:hidden",children:(0,Wy.jsx)("button",{onClick:()=>n(!e),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-primary-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",children:e?(0,Wy.jsx)(nE,{className:"h-6 w-6"}):(0,Wy.jsx)(Fj,{className:"h-6 w-6"})})})]})}),(0,Wy.jsx)(cE,{children:e&&(0,Wy.jsx)(Y_.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden",children:(0,Wy.jsx)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:r?(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsxs)(yt,{to:"/dashboard",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 flex items-center",onClick:()=>n(!1),children:[(0,Wy.jsx)(Ej,{className:"mr-2 w-5 h-5"})," Dashboard"]}),(0,Wy.jsxs)(yt,{to:"/dashboard/links",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 flex items-center",onClick:()=>n(!1),children:[(0,Wy.jsx)(Aj,{className:"mr-2 w-5 h-5"})," Payment Links"]}),(0,Wy.jsxs)(yt,{to:"/dashboard/transactions",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 flex items-center",onClick:()=>n(!1),children:[(0,Wy.jsx)(bj,{className:"mr-2 w-5 h-5"})," Transactions"]}),(0,Wy.jsxs)("button",{onClick:()=>{a(),n(!1)},className:"w-full text-left flex items-center px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50",children:[(0,Wy.jsx)(Lj,{className:"mr-2"})," Logout"]})]}):(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsxs)(yt,{to:"/login",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 flex items-center",onClick:()=>n(!1),children:[(0,Wy.jsx)(Mj,{className:"mr-2 w-5 h-5"})," Login"]}),(0,Wy.jsxs)(yt,{to:"/register",className:"block px-3 py-2 rounded-md text-base font-medium text-primary-600 hover:text-primary-700 hover:bg-gray-50 flex items-center",onClick:()=>n(!1),children:[(0,Wy.jsx)($j,{className:"mr-2 w-5 h-5"})," Sign Up"]})]})})})})]})};const pE=function(){const e=(new Date).getFullYear();return(0,Wy.jsx)("footer",{className:"bg-white border-t",children:(0,Wy.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,Wy.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:(0,Wy.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,Wy.jsx)(yt,{to:"/",className:"text-primary-600 font-display font-bold text-2xl",children:"PayNow"}),(0,Wy.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"The easiest way to create Biashara-Pesa payment links for your business or personal needs. Accept payments quickly and securely with our simple payment solution."})]})}),(0,Wy.jsxs)("div",{className:"mt-8 border-t border-gray-200 pt-8 md:flex md:items-center md:justify-between",children:[(0,Wy.jsxs)("div",{className:"flex space-x-6 md:order-2",children:[(0,Wy.jsxs)("a",{href:"https://twitter.com",className:"text-gray-400 hover:text-primary-600",children:[(0,Wy.jsx)("span",{className:"sr-only",children:"Twitter"}),(0,Wy.jsx)(Qj,{className:"h-6 w-6"})]}),(0,Wy.jsxs)("a",{href:"https://facebook.com",className:"text-gray-400 hover:text-primary-600",children:[(0,Wy.jsx)("span",{className:"sr-only",children:"Facebook"}),(0,Wy.jsx)(Sj,{className:"h-6 w-6"})]}),(0,Wy.jsxs)("a",{href:"https://instagram.com",className:"text-gray-400 hover:text-primary-600",children:[(0,Wy.jsx)("span",{className:"sr-only",children:"Instagram"}),(0,Wy.jsx)(Tj,{className:"h-6 w-6"})]}),(0,Wy.jsxs)("a",{href:"https://linkedin.com",className:"text-gray-400 hover:text-primary-600",children:[(0,Wy.jsx)("span",{className:"sr-only",children:"LinkedIn"}),(0,Wy.jsx)(Ij,{className:"h-6 w-6"})]})]}),(0,Wy.jsxs)("p",{className:"mt-8 text-base text-gray-400 md:mt-0 md:order-1",children:["\xa9 ",e," PayNow. All rights reserved."]})]})]})})};const gE=function(){return(0,Wy.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,Wy.jsx)(mE,{}),(0,Wy.jsx)("section",{className:"bg-gradient-to-br from-primary-50 to-secondary-50 py-20",children:(0,Wy.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row items-center",children:[(0,Wy.jsx)("div",{className:"md:w-1/2 md:pr-12",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,Wy.jsxs)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-display font-bold text-gray-900 leading-tight",children:["Simplify Biashara-Pesa ",(0,Wy.jsx)("span",{className:"text-primary-600",children:"Payments"})," for Your Business"]}),(0,Wy.jsx)("p",{className:"mt-6 text-lg text-gray-600 max-w-2xl",children:"Create custom payment links in seconds. Share them with your customers and get paid instantly through M-Pesa. No technical skills required."}),(0,Wy.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[(0,Wy.jsx)(yt,{to:"/register",children:(0,Wy.jsxs)(fE,{variant:"primary",size:"lg",children:[(0,Wy.jsx)("span",{children:"Get Started Free"})," ",(0,Wy.jsx)(cj,{className:"ml-2"})]})}),(0,Wy.jsx)(yt,{to:"/features",children:(0,Wy.jsx)(fE,{variant:"outline",size:"lg",children:"Learn More"})})]})]})}),(0,Wy.jsx)("div",{className:"md:w-1/2 mt-12 md:mt-0",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"relative",children:[(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden border border-gray-200",children:(0,Wy.jsx)("img",{src:"/image1.jpg",alt:"M-Pesa Payment in Kenya",className:"w-full h-auto"})}),(0,Wy.jsx)("div",{className:"absolute -bottom-6 -right-6 bg-white rounded-lg shadow-lg p-4 border border-gray-200",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,Wy.jsx)(fj,{className:"w-6 h-6 text-green-600"})}),(0,Wy.jsxs)("div",{className:"ml-4",children:[(0,Wy.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Payment Successful"}),(0,Wy.jsx)("p",{className:"text-xs text-gray-500",children:"KES 2,500 received"})]})]})})]})})]})})}),(0,Wy.jsx)("section",{className:"py-20 bg-white",children:(0,Wy.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Wy.jsxs)("div",{className:"text-center",children:[(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 sm:text-4xl",children:"Everything You Need to Accept Biashara-Pesa Payments"}),(0,Wy.jsx)("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto",children:"Our platform provides all the tools you need to create, manage, and track M-Pesa payments for your business."})]}),(0,Wy.jsxs)("div",{className:"mt-16 grid gap-8 md:grid-cols-3",children:[(0,Wy.jsxs)(Y_.div,{whileHover:{y:-5},className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:[(0,Wy.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,Wy.jsx)(Aj,{className:"w-6 h-6 text-primary-600"})}),(0,Wy.jsx)("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Custom Payment Links"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Create branded payment links with custom amounts, descriptions, and expiry dates in seconds."})]}),(0,Wy.jsxs)(Y_.div,{whileHover:{y:-5},className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:[(0,Wy.jsx)("div",{className:"w-12 h-12 bg-secondary-100 rounded-lg flex items-center justify-center",children:(0,Wy.jsx)(Xj,{className:"w-6 h-6 text-secondary-600"})}),(0,Wy.jsx)("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Real-time Dashboard"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Track all your payments in real-time with detailed analytics and transaction history."})]}),(0,Wy.jsxs)(Y_.div,{whileHover:{y:-5},className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:[(0,Wy.jsx)("div",{className:"w-12 h-12 bg-accent-100 rounded-lg flex items-center justify-center",children:(0,Wy.jsx)(qj,{className:"w-6 h-6 text-accent-600"})}),(0,Wy.jsx)("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Secure & Reliable"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Bank-level security with encrypted transactions and automatic payment verification."})]})]})]})}),(0,Wy.jsx)("section",{className:"py-20 bg-gray-50",children:(0,Wy.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Wy.jsxs)("div",{className:"text-center",children:[(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 sm:text-4xl",children:"How It Works"}),(0,Wy.jsx)("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto",children:"Get started in minutes with our simple three-step process."})]}),(0,Wy.jsxs)("div",{className:"mt-16 grid gap-8 md:grid-cols-3",children:[(0,Wy.jsxs)("div",{className:"relative",children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100 relative z-10",children:[(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-600 text-white flex items-center justify-center font-bold",children:"1"}),(0,Wy.jsx)("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Create a Payment Link"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Enter the payment details including amount, description, and optional settings."})]}),(0,Wy.jsx)("div",{className:"hidden md:block absolute top-1/2 left-full w-16 h-0.5 bg-gray-300 -translate-y-1/2 z-0"})]}),(0,Wy.jsxs)("div",{className:"relative",children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100 relative z-10",children:[(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-600 text-white flex items-center justify-center font-bold",children:"2"}),(0,Wy.jsx)("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Share Your Link"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Share the generated link with your customers via SMS, WhatsApp, email, or social media."})]}),(0,Wy.jsx)("div",{className:"hidden md:block absolute top-1/2 left-full w-16 h-0.5 bg-gray-300 -translate-y-1/2 z-0"})]}),(0,Wy.jsx)("div",{children:(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:[(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-600 text-white flex items-center justify-center font-bold",children:"3"}),(0,Wy.jsx)("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Get Paid Instantly"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Customers complete the payment via M-Pesa and you receive real-time notifications."})]})})]}),(0,Wy.jsx)("div",{className:"mt-12 text-center",children:(0,Wy.jsx)(yt,{to:"/register",children:(0,Wy.jsx)(fE,{variant:"primary",size:"lg",children:"Start Creating Payment Links"})})})]})}),(0,Wy.jsx)("section",{className:"py-20 bg-white",children:(0,Wy.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Wy.jsxs)("div",{className:"text-center",children:[(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 sm:text-4xl",children:"Trusted by Kenyan Businesses"}),(0,Wy.jsx)("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto",children:"See what our customers are saying about our payment solution."})]}),(0,Wy.jsxs)("div",{className:"mt-16 grid gap-8 md:grid-cols-3",children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("img",{src:"/image3.jpg",alt:"Customer",className:"w-12 h-12 rounded-full object-cover"}),(0,Wy.jsxs)("div",{className:"ml-4",children:[(0,Wy.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Jane Muthoni"}),(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Fashion Boutique Owner"})]})]}),(0,Wy.jsx)("p",{className:"mt-4 text-gray-600",children:'"PayNow has transformed how I collect payments from my customers. The custom payment links are so easy to create and share!"'})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("img",{src:"/image1.jpg",alt:"Customer",className:"w-12 h-12 rounded-full object-cover"}),(0,Wy.jsxs)("div",{className:"ml-4",children:[(0,Wy.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"John Kamau"}),(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Restaurant Owner"})]})]}),(0,Wy.jsx)("p",{className:"mt-4 text-gray-600",children:'"We\'ve increased our takeaway orders by 40% since using PayNow. Customers love the simple payment process."'})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("img",{src:"/image2.jpg",alt:"Customer",className:"w-12 h-12 rounded-full object-cover"}),(0,Wy.jsxs)("div",{className:"ml-4",children:[(0,Wy.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Sarah Wanjiku"}),(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Event Planner"})]})]}),(0,Wy.jsx)("p",{className:"mt-4 text-gray-600",children:'"Collecting event deposits used to be a headache. With PayNow, I create payment links for each client and track everything in one place."'})]})]})]})}),(0,Wy.jsx)("section",{className:"py-20 bg-gray-50",children:(0,Wy.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Wy.jsxs)("div",{className:"text-center",children:[(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 sm:text-4xl",children:"Empowering African Businesses"}),(0,Wy.jsx)("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto",children:"Join thousands of businesses across Kenya and East Africa that are streamlining their payment processes."})]}),(0,Wy.jsxs)("div",{className:"mt-16 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[(0,Wy.jsx)("div",{children:(0,Wy.jsx)("img",{src:"/image2.jpg",alt:"African marketplace",className:"rounded-lg shadow-md"})}),(0,Wy.jsxs)("div",{className:"space-y-6",children:[(0,Wy.jsx)("h3",{className:"text-2xl font-display font-bold text-gray-900",children:"Built for the African Market"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:"Our platform is specifically designed for the unique needs of African businesses, with deep integration into local payment systems like M-Pesa."}),(0,Wy.jsxs)("ul",{className:"space-y-4",children:[(0,Wy.jsxs)("li",{className:"flex items-start",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Wy.jsx)("svg",{className:"h-4 w-4 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Wy.jsx)("p",{className:"ml-3 text-gray-600",children:"Zero setup fees and affordable transaction rates"})]}),(0,Wy.jsxs)("li",{className:"flex items-start",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Wy.jsx)("svg",{className:"h-4 w-4 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Wy.jsx)("p",{className:"ml-3 text-gray-600",children:"Support for multiple currencies and payment methods"})]}),(0,Wy.jsxs)("li",{className:"flex items-start",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Wy.jsx)("svg",{className:"h-4 w-4 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Wy.jsx)("p",{className:"ml-3 text-gray-600",children:"Local customer support in Swahili and English"})]})]}),(0,Wy.jsx)("div",{className:"pt-4",children:(0,Wy.jsx)(yt,{to:"/register",children:(0,Wy.jsxs)(fE,{variant:"primary",children:[(0,Wy.jsx)("span",{children:"Join African Businesses"})," ",(0,Wy.jsx)(cj,{className:"ml-2"})]})})})]})]})]})}),(0,Wy.jsx)("section",{className:"py-20 bg-white",children:(0,Wy.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Wy.jsxs)("div",{className:"text-center",children:[(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 sm:text-4xl",children:"Success Stories"}),(0,Wy.jsx)("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto",children:"See how businesses across Kenya are thriving with PayNow."})]}),(0,Wy.jsxs)("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,Wy.jsx)("img",{src:"/image3.jpg",alt:"Nairobi coffee shop",className:"w-full h-48 object-cover"}),(0,Wy.jsxs)("div",{className:"p-6",children:[(0,Wy.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Kahawa Coffee House"}),(0,Wy.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Nairobi, Kenya"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:'"Since implementing PayNow, our coffee shop has seen a 35% increase in pre-orders and a significant reduction in payment processing time."'}),(0,Wy.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,Wy.jsx)("span",{className:"text-sm font-medium text-primary-600",children:"Read full story"}),(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"3 min read"})]})]})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,Wy.jsx)("img",{src:"/image1.jpg",alt:"Kenyan artisan shop",className:"w-full h-48 object-cover"}),(0,Wy.jsxs)("div",{className:"p-6",children:[(0,Wy.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Sanaa Crafts"}),(0,Wy.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Mombasa, Kenya"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:'"Our artisan business now sells to customers worldwide. PayNow\'s payment links have made international transactions seamless."'}),(0,Wy.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,Wy.jsx)("span",{className:"text-sm font-medium text-primary-600",children:"Read full story"}),(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"4 min read"})]})]})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,Wy.jsx)("img",{src:"/image2.jpg",alt:"Kenyan tech startup",className:"w-full h-48 object-cover"}),(0,Wy.jsxs)("div",{className:"p-6",children:[(0,Wy.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"TechHub Nairobi"}),(0,Wy.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Nairobi, Kenya"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:'"As a tech education center, we needed a simple way to collect course fees. PayNow has streamlined our entire payment process."'}),(0,Wy.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,Wy.jsx)("span",{className:"text-sm font-medium text-primary-600",children:"Read full story"}),(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"5 min read"})]})]})]})]})]})}),(0,Wy.jsx)("section",{className:"py-20 bg-primary-600",children:(0,Wy.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-white sm:text-4xl",children:"Ready to Simplify Your Biashara-Pesa Payments?"}),(0,Wy.jsx)("p",{className:"mt-4 text-lg text-primary-100 max-w-2xl mx-auto",children:"Join thousands of businesses using PayNow to create custom payment links and get paid faster."}),(0,Wy.jsxs)("div",{className:"mt-8",children:[(0,Wy.jsx)(yt,{to:"/register",children:(0,Wy.jsx)(fE,{variant:"accent",size:"lg",children:"Sign Up for Free"})}),(0,Wy.jsx)("p",{className:"mt-4 text-sm text-primary-100",children:"No credit card required. Get started in minutes."})]})]})}),(0,Wy.jsx)(pE,{})]})};function yE(e){return ij({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r\n\tc0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r\n\tc0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r\n\tC34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r\n\tc-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"},child:[]},{tag:"path",attr:{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r\n\tc0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"},child:[]}]})(e)}const vE=["label","type","id","name","placeholder","error","className","required","icon"],xE=(0,t.forwardRef)((e,t)=>{let{label:n,type:r="text",id:s,name:a,placeholder:o,error:l,className:u="",required:d=!1,icon:h}=e,f=i(e,vE);return(0,Wy.jsxs)("div",{className:"mb-4",children:[n&&(0,Wy.jsxs)("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:[n," ",d&&(0,Wy.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Wy.jsxs)("div",{className:"relative",children:[h&&(0,Wy.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h}),(0,Wy.jsx)("input",c({type:r,id:s,name:a,placeholder:o,ref:t,className:"\n            w-full px-4 py-2 rounded-md border \n            ".concat(l?"border-red-500":"border-gray-300"," \n            focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\n            ").concat(h?"pl-10":"","\n            ").concat(u,"\n          "),required:d},f))]}),l&&(0,Wy.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]})});xE.displayName="Input";const bE=xE;const wE=function(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1),{login:c,loginWithGoogle:u,fetchUserProfile:d}=qy(),h=me();return(0,Wy.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,Wy.jsx)(mE,{}),(0,Wy.jsxs)("div",{className:"flex-1 flex",children:[(0,Wy.jsx)("div",{className:"hidden lg:block lg:w-1/2 bg-cover bg-center",style:{backgroundImage:"url('/image1.jpg')"},children:(0,Wy.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-primary-900/70 to-primary-800/50 flex items-center justify-center p-12",children:(0,Wy.jsxs)("div",{className:"text-white max-w-md",children:[(0,Wy.jsx)(Y_.h2,{className:"text-3xl font-display font-bold mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Welcome back to PayNow"}),(0,Wy.jsx)(Y_.p,{className:"text-lg text-white/80",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:"The easiest way to create M-Pesa payment links for your business."}),(0,Wy.jsxs)(Y_.div,{className:"mt-8 bg-white/10 p-6 rounded-lg backdrop-blur-sm",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,Wy.jsx)("p",{className:"text-white/90 italic",children:'"PayNow has revolutionized how we collect payments. No more chasing clients for M-Pesa screenshots!"'}),(0,Wy.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-500 flex items-center justify-center text-white font-bold",children:"JM"}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsx)("p",{className:"text-white font-medium",children:"James Mwangi"}),(0,Wy.jsx)("p",{className:"text-white/70 text-sm",children:"Business Owner"})]})]})]})]})})}),(0,Wy.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 md:p-12",children:(0,Wy.jsxs)(Y_.div,{className:"w-full max-w-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 mb-2",children:"Sign in"}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-8",children:"Welcome back! Please enter your details."}),s&&(0,Wy.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-start",children:[(0,Wy.jsx)(oj,{className:"text-red-500 mt-0.5 mr-2 flex-shrink-0"}),(0,Wy.jsx)("span",{className:"text-red-800 text-sm",children:s})]}),(0,Wy.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a("");try{l(!0);if(!(await c(e,r)).user.emailVerified)return void h("/verify-email");const t=await d();t&&"admin"===t.role?h("/admin"):h("/dashboard")}catch(n){a("Failed to sign in. Please check your credentials."),console.error(n)}finally{l(!1)}},children:[(0,Wy.jsx)(bE,{label:"Email",type:"email",id:"email",placeholder:"Enter your email",value:e,onChange:e=>n(e.target.value),required:!0,icon:(0,Wy.jsx)(Oj,{className:"text-gray-400"})}),(0,Wy.jsx)(bE,{label:"Password",type:"password",id:"password",placeholder:"Enter your password",value:r,onChange:e=>i(e.target.value),required:!0,icon:(0,Wy.jsx)(Rj,{className:"text-gray-400"})}),(0,Wy.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,Wy.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,Wy.jsx)(yt,{to:"/reset-password",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"Forgot password?"})]}),(0,Wy.jsx)(fE,{type:"submit",variant:"primary",fullWidth:!0,isLoading:o,children:"Sign in"}),(0,Wy.jsx)("div",{className:"mt-4 text-center",children:(0,Wy.jsxs)("span",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",(0,Wy.jsx)(yt,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up"})]})})]}),(0,Wy.jsxs)("div",{className:"mt-6",children:[(0,Wy.jsxs)("div",{className:"relative",children:[(0,Wy.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Wy.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,Wy.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Wy.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,Wy.jsx)("div",{className:"mt-6",children:(0,Wy.jsxs)(fE,{type:"button",variant:"ghost",fullWidth:!0,className:"border border-gray-300",onClick:async()=>{try{l(!0);const e=await u();if(!e.user.emailVerified)return void h("/verify-email");const t=await d(e.user.uid);if(t&&"admin"===t.role)return void h("/admin");e.needsVerification?h("/dashboard/verification"):h("/dashboard")}catch(e){a("Failed to sign in with Google."),console.error(e)}finally{l(!1)}},disabled:o,children:[(0,Wy.jsx)(yE,{className:"w-5 h-5 mr-2"}),"Sign in with Google"]})})]})]})})]}),(0,Wy.jsx)(pE,{})]})};const kE=function(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(!1),{register:f,loginWithGoogle:m}=qy(),p=me();return(0,Wy.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,Wy.jsx)(mE,{}),(0,Wy.jsxs)("div",{className:"flex-1 flex",children:[(0,Wy.jsx)("div",{className:"hidden lg:block lg:w-1/2 bg-cover bg-center",style:{backgroundImage:"url('/image2.jpg')"},children:(0,Wy.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-primary-900/70 to-primary-800/50 flex items-center justify-center p-12",children:(0,Wy.jsxs)("div",{className:"text-white max-w-md",children:[(0,Wy.jsx)(Y_.h2,{className:"text-3xl font-display font-bold mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Join PayNow Today"}),(0,Wy.jsx)(Y_.p,{className:"text-lg text-white/80",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:"Create custom M-Pesa payment links for your business in seconds."}),(0,Wy.jsxs)(Y_.div,{className:"mt-8 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0",children:(0,Wy.jsx)("svg",{className:"h-6 w-6 text-accent-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Wy.jsx)("p",{className:"ml-3 text-white/90",children:"Create unlimited payment links"})]}),(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0",children:(0,Wy.jsx)("svg",{className:"h-6 w-6 text-accent-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Wy.jsx)("p",{className:"ml-3 text-white/90",children:"Real-time payment notifications"})]}),(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0",children:(0,Wy.jsx)("svg",{className:"h-6 w-6 text-accent-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Wy.jsx)("p",{className:"ml-3 text-white/90",children:"Detailed transaction analytics"})]})]})]})})}),(0,Wy.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 md:p-12",children:(0,Wy.jsxs)(Y_.div,{className:"w-full max-w-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 mb-2",children:"Create an account"}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-8",children:"Start accepting M-Pesa payments in minutes."}),c&&(0,Wy.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-start",children:[(0,Wy.jsx)(oj,{className:"text-red-500 mt-0.5 mr-2 flex-shrink-0"}),(0,Wy.jsx)("span",{className:"text-red-800 text-sm",children:c})]}),(0,Wy.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),u(""),s!==o?(u("Passwords do not match"),0):!(s.length<6)||(u("Password must be at least 6 characters"),0))try{h(!0),await f(r,s,e),p("/verify-email")}catch(n){"auth/email-already-in-use"===n.code?u("Email already in use. Please use a different email or sign in."):u("Failed to create an account. Please try again."),console.error(n)}finally{h(!1)}},children:[(0,Wy.jsx)(bE,{label:"Full Name",type:"text",id:"name",placeholder:"Enter your full name",value:e,onChange:e=>n(e.target.value),required:!0,icon:(0,Wy.jsx)(Zj,{className:"text-gray-400"})}),(0,Wy.jsx)(bE,{label:"Email",type:"email",id:"email",placeholder:"Enter your email",value:r,onChange:e=>i(e.target.value),required:!0,icon:(0,Wy.jsx)(Oj,{className:"text-gray-400"})}),(0,Wy.jsx)(bE,{label:"Password",type:"password",id:"password",placeholder:"Create a password",value:s,onChange:e=>a(e.target.value),required:!0,icon:(0,Wy.jsx)(Rj,{className:"text-gray-400"})}),(0,Wy.jsx)(bE,{label:"Confirm Password",type:"password",id:"confirmPassword",placeholder:"Confirm your password",value:o,onChange:e=>l(e.target.value),required:!0,icon:(0,Wy.jsx)(Rj,{className:"text-gray-400"})}),(0,Wy.jsx)("div",{className:"mb-6",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,Wy.jsxs)("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:["I agree to the"," ",(0,Wy.jsx)(yt,{to:"/terms",className:"font-medium text-primary-600 hover:text-primary-500",children:"Terms of Service"})," ","and"," ",(0,Wy.jsx)(yt,{to:"/privacy",className:"font-medium text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})]})}),(0,Wy.jsx)(fE,{type:"submit",variant:"primary",fullWidth:!0,isLoading:d,children:"Create account"}),(0,Wy.jsx)("div",{className:"mt-4 text-center",children:(0,Wy.jsxs)("span",{className:"text-sm text-gray-500",children:["Already have an account?"," ",(0,Wy.jsx)(yt,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in"})]})})]}),(0,Wy.jsxs)("div",{className:"mt-6",children:[(0,Wy.jsxs)("div",{className:"relative",children:[(0,Wy.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Wy.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,Wy.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Wy.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,Wy.jsx)("div",{className:"mt-6",children:(0,Wy.jsxs)(fE,{type:"button",variant:"ghost",fullWidth:!0,className:"border border-gray-300",onClick:async()=>{try{h(!0);(await m()).needsVerification?p("/dashboard/verification"):p("/dashboard")}catch(e){u("Failed to sign in with Google."),console.error(e)}finally{h(!1)}},disabled:d,children:[(0,Wy.jsx)(yE,{className:"w-5 h-5 mr-2"}),"Sign up with Google"]})})]})]})})]}),(0,Wy.jsx)(pE,{})]})};const NE=function(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1),{resetPassword:c}=qy();return(0,Wy.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,Wy.jsx)(mE,{}),(0,Wy.jsxs)("div",{className:"flex-1 flex",children:[(0,Wy.jsx)("div",{className:"hidden lg:block lg:w-1/2 bg-cover bg-center",style:{backgroundImage:"url('/image3.jpg')"},children:(0,Wy.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-primary-900/70 to-primary-800/50 flex items-center justify-center p-12",children:(0,Wy.jsxs)("div",{className:"text-white max-w-md",children:[(0,Wy.jsx)(Y_.h2,{className:"text-3xl font-display font-bold mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Reset Your Password"}),(0,Wy.jsx)(Y_.p,{className:"text-lg text-white/80",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:"We'll send you instructions to reset your password and get you back to managing your payments."}),(0,Wy.jsxs)(Y_.div,{className:"mt-8 bg-white/10 p-6 rounded-lg backdrop-blur-sm",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,Wy.jsx)("p",{className:"text-white/90 italic",children:'"PayNow\'s customer support is excellent. I was able to reset my password and get back to business in minutes."'}),(0,Wy.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-500 flex items-center justify-center text-white font-bold",children:"SW"}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsx)("p",{className:"text-white font-medium",children:"Sarah Wanjiku"}),(0,Wy.jsx)("p",{className:"text-white/70 text-sm",children:"Event Planner"})]})]})]})]})})}),(0,Wy.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 md:p-12",children:(0,Wy.jsxs)(Y_.div,{className:"w-full max-w-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 mb-2",children:"Reset Password"}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-8",children:"Enter your email address and we'll send you instructions to reset your password."}),r&&(0,Wy.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-start",children:[(0,Wy.jsx)(oj,{className:"text-red-500 mt-0.5 mr-2 flex-shrink-0"}),(0,Wy.jsx)("span",{className:"text-red-800 text-sm",children:r})]}),s&&(0,Wy.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md flex items-start",children:[(0,Wy.jsx)(fj,{className:"text-green-500 mt-0.5 mr-2 flex-shrink-0"}),(0,Wy.jsx)("span",{className:"text-green-800 text-sm",children:s})]}),(0,Wy.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(""),a("");try{l(!0),await c(e),a("Password reset instructions have been sent to your email.")}catch(n){"auth/user-not-found"===n.code?i("No account found with this email address."):i("Failed to send password reset email. Please try again."),console.error(n)}finally{l(!1)}},children:[(0,Wy.jsx)(bE,{label:"Email",type:"email",id:"email",placeholder:"Enter your email",value:e,onChange:e=>n(e.target.value),required:!0,icon:(0,Wy.jsx)(Oj,{className:"text-gray-400"})}),(0,Wy.jsx)(fE,{type:"submit",variant:"primary",fullWidth:!0,isLoading:o,className:"mt-6",children:"Send Reset Instructions"}),(0,Wy.jsx)("div",{className:"mt-4 text-center",children:(0,Wy.jsxs)("span",{className:"text-sm text-gray-500",children:["Remember your password?"," ",(0,Wy.jsx)(yt,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in"})]})})]})]})})]}),(0,Wy.jsx)(pE,{})]})};const SE=function(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(0),{currentUser:d,sendVerificationEmail:h,updateEmailVerificationStatus:f}=qy(),m=me();return(0,t.useEffect)(()=>{let e;return null!==d&&void 0!==d&&d.emailVerified&&(f(),m("/dashboard")),c>0?e=setTimeout(()=>u(c-1),1e3):0===c&&o&&l(!1),()=>clearTimeout(e)},[d,m,f,c,o]),(0,Wy.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,Wy.jsx)("div",{className:"h-16 bg-white shadow-sm",children:(0,Wy.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Wy.jsx)("div",{className:"flex justify-between h-16",children:(0,Wy.jsx)("div",{className:"flex items-center",children:(0,Wy.jsx)(yt,{to:"/",className:"flex-shrink-0 flex items-center",children:(0,Wy.jsx)(Y_.div,{whileHover:{scale:1.05},className:"text-primary-600 font-display font-bold text-2xl",children:"PayNow"})})})})})}),(0,Wy.jsxs)("div",{className:"flex-1 flex",children:[(0,Wy.jsx)("div",{className:"hidden lg:block lg:w-1/2 bg-cover bg-center",style:{backgroundImage:"url('/image2.jpg')"},children:(0,Wy.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-primary-900/70 to-primary-800/50 flex items-center justify-center p-12",children:(0,Wy.jsxs)("div",{className:"text-white max-w-md",children:[(0,Wy.jsx)(Y_.h2,{className:"text-3xl font-display font-bold mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Verify Your Email"}),(0,Wy.jsx)(Y_.p,{className:"text-lg text-white/80",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:"We've sent a verification link to your email. Please verify your email address to continue."}),(0,Wy.jsxs)(Y_.div,{className:"mt-8 bg-white/10 p-6 rounded-lg backdrop-blur-sm",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,Wy.jsx)("p",{className:"text-white/90",children:"Email verification helps us:"}),(0,Wy.jsxs)("ul",{className:"mt-2 space-y-2 text-white/80",children:[(0,Wy.jsxs)("li",{className:"flex items-start",children:[(0,Wy.jsx)("svg",{className:"h-5 w-5 text-accent-400 mr-2 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Wy.jsx)("span",{children:"Protect your account"})]}),(0,Wy.jsxs)("li",{className:"flex items-start",children:[(0,Wy.jsx)("svg",{className:"h-5 w-5 text-accent-400 mr-2 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Wy.jsx)("span",{children:"Ensure secure communications"})]}),(0,Wy.jsxs)("li",{className:"flex items-start",children:[(0,Wy.jsx)("svg",{className:"h-5 w-5 text-accent-400 mr-2 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Wy.jsx)("span",{children:"Prevent unauthorized access"})]})]})]})]})})}),(0,Wy.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 md:p-12",children:(0,Wy.jsxs)(Y_.div,{className:"w-full max-w-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,Wy.jsxs)("div",{className:"text-center mb-8",children:[(0,Wy.jsx)("div",{className:"mx-auto w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mb-4",children:(0,Wy.jsx)(Oj,{className:"w-10 h-10 text-primary-600"})}),(0,Wy.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 mb-2",children:"Check Your Email"}),(0,Wy.jsxs)("p",{className:"text-gray-600",children:["We've sent a verification link to ",(0,Wy.jsx)("strong",{children:null===d||void 0===d?void 0:d.email})]})]}),e&&(0,Wy.jsxs)("div",{className:"mb-6 p-3 bg-red-50 border border-red-200 rounded-md flex items-start",children:[(0,Wy.jsx)(oj,{className:"text-red-500 mt-0.5 mr-2 flex-shrink-0"}),(0,Wy.jsx)("span",{className:"text-red-800 text-sm",children:e})]}),r&&(0,Wy.jsxs)("div",{className:"mb-6 p-3 bg-green-50 border border-green-200 rounded-md flex items-start",children:[(0,Wy.jsx)(fj,{className:"text-green-500 mt-0.5 mr-2 flex-shrink-0"}),(0,Wy.jsx)("span",{className:"text-green-800 text-sm",children:r})]}),(0,Wy.jsxs)("div",{className:"space-y-4",children:[(0,Wy.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[(0,Wy.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Next Steps:"}),(0,Wy.jsxs)("ol",{className:"list-decimal pl-5 space-y-2 text-gray-700",children:[(0,Wy.jsx)("li",{children:"Open the email from PayNow"}),(0,Wy.jsx)("li",{children:"Click the verification link"}),(0,Wy.jsx)("li",{children:'Return to this page and click "I\'ve verified my email"'})]})]}),(0,Wy.jsx)(fE,{type:"button",variant:"primary",fullWidth:!0,onClick:async()=>{n(""),i("");try{a(!0),await d.reload(),d.emailVerified?(await f(),i("Email verified successfully! Redirecting to dashboard..."),setTimeout(()=>m("/dashboard"),2e3)):n("Email not verified yet. Please check your inbox and click the verification link.")}catch(e){n("Failed to check verification status. Please try again."),console.error(e)}finally{a(!1)}},isLoading:s,children:"I've verified my email"}),(0,Wy.jsxs)("div",{className:"text-center",children:[(0,Wy.jsx)("p",{className:"text-gray-600 mb-2",children:"Didn't receive the email?"}),(0,Wy.jsx)(fE,{type:"button",variant:"outline",onClick:async()=>{n(""),i("");try{a(!0),await h(),i("Verification email sent! Please check your inbox."),l(!0),u(60)}catch(e){n("Failed to send verification email. Please try again."),console.error(e)}finally{a(!1)}},disabled:o||s,children:o?"Resend in ".concat(c,"s"):"Resend verification email"})]}),(0,Wy.jsx)("div",{className:"mt-6 text-center",children:(0,Wy.jsx)(yt,{to:"/login",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"Back to Sign in"})})]})]})})]}),(0,Wy.jsx)(pE,{})]})};const _E=function(){var e;const[n,r]=(0,t.useState)(!1),{pathname:i}=de(),{userProfile:s,logout:a}=qy(),o=me(),l=[{name:"Dashboard",path:"/dashboard",icon:(0,Wy.jsx)(Ej,{className:"w-5 h-5"})},{name:"Payment Links",path:"/dashboard/links",icon:(0,Wy.jsx)(Aj,{className:"w-5 h-5"})},{name:"Transactions",path:"/dashboard/transactions",icon:(0,Wy.jsx)(xj,{className:"w-5 h-5"})},{name:"Customers",path:"/dashboard/customers",icon:(0,Wy.jsx)(eE,{className:"w-5 h-5"})},{name:"Payment Settings",path:"/dashboard/payment-settings",icon:(0,Wy.jsx)(Hj,{className:"w-5 h-5"})},{name:"Verification",path:"/dashboard/verification",icon:(0,Wy.jsx)(qj,{className:"w-5 h-5"})}],c=async()=>{try{await a(),o("/")}catch(e){console.error("Failed to log out",e)}};return(0,Wy.jsxs)(Y_.div,{className:"bg-white shadow-md h-screen ".concat(n?"w-16":"w-64"," transition-width duration-300 ease-in-out flex flex-col hidden md:flex"),initial:!1,animate:{width:n?64:256},children:[(0,Wy.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[!n&&(0,Wy.jsx)(yt,{to:"/dashboard",className:"font-display font-bold text-xl text-primary-600",children:"PayNow"}),(0,Wy.jsx)("button",{onClick:()=>r(!n),className:"p-1 rounded-md hover:bg-gray-100 ".concat(n?"mx-auto":""),children:n?(0,Wy.jsx)(gj,{}):(0,Wy.jsx)(pj,{})})]}),(0,Wy.jsxs)("div",{className:"flex-1 overflow-y-auto py-4",children:[(0,Wy.jsx)("div",{className:"px-4 mb-6",children:(0,Wy.jsxs)(yt,{to:"/dashboard/create",className:"\n              flex items-center justify-center bg-primary-600 hover:bg-primary-700 \n              text-white rounded-md py-2 px-4 transition-colors duration-200\n              ".concat(n?"w-8 h-8 mx-auto p-0":"w-full","\n            "),children:[(0,Wy.jsx)(Uj,{className:"w-5 h-5"}),!n&&(0,Wy.jsx)("span",{className:"ml-2",children:"New Payment Link"})]})}),(0,Wy.jsx)("nav",{children:(0,Wy.jsx)("ul",{className:"space-y-1",children:l.map(e=>(0,Wy.jsx)("li",{children:(0,Wy.jsxs)(yt,{to:e.path,className:"\n                    flex items-center px-4 py-3 text-sm font-medium rounded-md transition-colors duration-200\n                    ".concat(i===e.path?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-gray-100","\n                    ").concat(n?"justify-center":"","\n                  "),children:[e.icon,!n&&(0,Wy.jsx)("span",{className:"ml-3",children:e.name})]})},e.name))})})]}),(0,Wy.jsx)("div",{className:"border-t",children:n?(0,Wy.jsx)("div",{className:"p-4 flex justify-center",children:(0,Wy.jsx)("button",{onClick:c,className:"p-2 rounded-md text-gray-500 hover:text-primary-600 hover:bg-gray-100",title:"Logout",children:(0,Wy.jsx)(Lj,{className:"w-5 h-5"})})}):(0,Wy.jsx)("div",{className:"p-4",children:(0,Wy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-gray-600",children:(null===s||void 0===s||null===(e=s.displayName)||void 0===e?void 0:e.charAt(0))||"U"}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("p",{className:"text-sm font-medium text-gray-700",children:(null===s||void 0===s?void 0:s.displayName)||"User"}),(null===s||void 0===s?void 0:s.isVerified)&&(0,Wy.jsxs)("span",{className:"ml-1 bg-green-100 text-green-800 text-xs px-1.5 py-0.5 rounded-full flex items-center",children:[(0,Wy.jsx)(qj,{className:"w-3 h-3 mr-0.5"}),"Verified"]})]}),(0,Wy.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null===s||void 0===s?void 0:s.email})]})]}),(0,Wy.jsx)("button",{onClick:c,className:"p-2 rounded-md text-gray-500 hover:text-primary-600 hover:bg-gray-100",title:"Logout",children:(0,Wy.jsx)(Lj,{className:"w-5 h-5"})})]})})})]})};const jE=function(e){let{children:t}=e;return(0,Wy.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,Wy.jsx)(_E,{}),(0,Wy.jsx)("div",{className:"flex-1 overflow-auto",children:(0,Wy.jsx)("main",{className:"p-6 dashboard-container",children:t})})]})};const EE=function(){const{currentUser:e,userProfile:n}=qy(),[r,i]=(0,t.useState)({totalLinks:0,totalTransactions:0,totalAmount:0,successRate:0}),[s,a]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[u,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{if(e)try{d(!0);const t=qg(ig(By,"paymentLinks"),Gg("ownerUid","==",e.uid)),n=await oy(t);let r=n.docs.map(e=>c({id:e.id},e.data()));r.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.seconds-e.createdAt.seconds:0),a(r.slice(0,5));const s=qg(ig(By,"transactions"),Gg("ownerUid","==",e.uid)),o=await oy(s);let u=o.docs.map(e=>c({id:e.id},e.data()));u.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.seconds-e.createdAt.seconds:0),l(u.slice(0,5));const h=o.size,f=o.docs.filter(e=>"success"===e.data().status).length;let m=0;const p={mpesa:{count:0,amount:0},card:{count:0,amount:0},paystack:{count:0,amount:0},other:{count:0,amount:0}};o.docs.forEach(e=>{const t=e.data();if("success"===t.status){const e=t.amount||0;m+=e;const n=t.paymentProcessor||"other";p[n]?(p[n].count+=1,p[n].amount+=e):(p.other.count+=1,p.other.amount+=e)}});const g=n.size;i({totalLinks:g||0,totalTransactions:h||0,totalAmount:m||0,successRate:h>0?f/h*100:0,paymentMethods:p})}catch(t){console.error("Error fetching dashboard data:",t),i({totalLinks:0,totalTransactions:0,totalAmount:0,successRate:0,paymentMethods:{mpesa:{count:0,amount:0},card:{count:0,amount:0},paystack:{count:0,amount:0},other:{count:0,amount:0}}})}finally{d(!1)}})()},[e]);const h=e=>{if(!e)return"";return new Date(1e3*e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})};return(0,Wy.jsxs)(jE,{children:[(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("h1",{className:"text-2xl font-display font-bold text-gray-900",children:"Dashboard"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:"Welcome back! Here's an overview of your payment activity."})]}),!u&&n&&!n.isVerified&&!n.verificationSubmitted&&(0,Wy.jsx)(Y_.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-md",children:(0,Wy.jsxs)("div",{className:"flex",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0",children:(0,Wy.jsx)(qj,{className:"h-5 w-5 text-blue-600"})}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Verify your account"}),(0,Wy.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,Wy.jsx)("p",{children:"Get verified to unlock all features and build trust with your customers."})}),(0,Wy.jsx)("div",{className:"mt-3",children:(0,Wy.jsx)(yt,{to:"/dashboard/verification",children:(0,Wy.jsx)(fE,{size:"sm",children:"Verify Now"})})})]})]})}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,Wy.jsx)(Y_.div,{whileHover:{y:-5},className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:(0,Wy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Links"}),(0,Wy.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.totalLinks})]}),(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Wy.jsx)(Aj,{className:"w-5 h-5 text-primary-600"})})]})}),(0,Wy.jsx)(Y_.div,{whileHover:{y:-5},className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:(0,Wy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Transactions"}),(0,Wy.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.totalTransactions})]}),(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-secondary-100 flex items-center justify-center",children:(0,Wy.jsx)(xj,{className:"w-5 h-5 text-secondary-600"})})]})}),(0,Wy.jsx)(Y_.div,{whileHover:{y:-5},className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:(0,Wy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Amount"}),(0,Wy.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:["KES ",r.totalAmount.toLocaleString()]}),r.paymentMethods&&(0,Wy.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[r.paymentMethods.mpesa.count>0&&(0,Wy.jsxs)("span",{className:"text-xs bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded",children:["M-Pesa: ",r.paymentMethods.mpesa.count]}),r.paymentMethods.card.count>0&&(0,Wy.jsxs)("span",{className:"text-xs bg-purple-50 text-purple-700 px-1.5 py-0.5 rounded",children:["Card: ",r.paymentMethods.card.count]}),r.paymentMethods.paystack.count>0&&(0,Wy.jsxs)("span",{className:"text-xs bg-green-50 text-green-700 px-1.5 py-0.5 rounded",children:["Paystack: ",r.paymentMethods.paystack.count]})]})]}),(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-accent-100 flex items-center justify-center",children:(0,Wy.jsx)(Xj,{className:"w-5 h-5 text-accent-600"})})]})}),(0,Wy.jsx)(Y_.div,{whileHover:{y:-5},className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:(0,Wy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Success Rate"}),(0,Wy.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:[r.successRate.toFixed(1),"%"]})]}),(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,Wy.jsx)(aj,{className:"w-5 h-5 text-green-600"})})]})})]}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Wy.jsxs)("div",{className:"p-6 flex justify-between items-center border-b",children:[(0,Wy.jsx)("h2",{className:"font-display font-bold text-gray-900",children:"Recent Payment Links"}),(0,Wy.jsx)(yt,{to:"/dashboard/links",children:(0,Wy.jsx)(fE,{variant:"ghost",size:"sm",children:"View All"})})]}),(0,Wy.jsx)("div",{className:"overflow-x-auto",children:u?(0,Wy.jsxs)("div",{className:"p-6 text-center",children:[(0,Wy.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-4 border-gray-300 border-t-primary-600"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading payment links..."})]}):s.length>0?(0,Wy.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Wy.jsx)("thead",{className:"bg-gray-50",children:(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,Wy.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{var t,n;return(0,Wy.jsxs)("tr",{children:[(0,Wy.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Wy.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.description}),(0,Wy.jsx)("div",{className:"text-xs text-gray-500",children:e.slug})]}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"text-sm text-gray-900",children:[e.currency||"KES"," ",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString()]})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:h(null===(n=e.createdAt)||void 0===n?void 0:n.seconds)})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.expiryDate&&e.expiryDate.seconds<Date.now()/1e3?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.expiryDate&&e.expiryDate.seconds<Date.now()/1e3?"Expired":e.status||"Active"})})]},e.id)})})]}):(0,Wy.jsxs)("div",{className:"p-6 text-center",children:[(0,Wy.jsx)("p",{className:"text-gray-500",children:"No payment links yet."}),(0,Wy.jsx)(yt,{to:"/dashboard/create",className:"mt-2 inline-block",children:(0,Wy.jsxs)(fE,{variant:"primary",size:"sm",children:[(0,Wy.jsx)(Uj,{className:"mr-1"})," Create Payment Link"]})})]})})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Wy.jsxs)("div",{className:"p-6 flex justify-between items-center border-b",children:[(0,Wy.jsx)("h2",{className:"font-display font-bold text-gray-900",children:"Recent Transactions"}),(0,Wy.jsx)(yt,{to:"/dashboard/transactions",children:(0,Wy.jsx)(fE,{variant:"ghost",size:"sm",children:"View All"})})]}),(0,Wy.jsx)("div",{className:"overflow-x-auto",children:u?(0,Wy.jsxs)("div",{className:"p-6 text-center",children:[(0,Wy.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-4 border-gray-300 border-t-primary-600"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading transactions..."})]}):o.length>0?(0,Wy.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Wy.jsx)("thead",{className:"bg-gray-50",children:(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,Wy.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(e=>{var t,n;return(0,Wy.jsxs)("tr",{children:[(0,Wy.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Wy.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.description}),(0,Wy.jsxs)("div",{className:"text-xs text-gray-500",children:["mpesa"===e.paymentProcessor&&e.mpesaReceiptNumber&&(0,Wy.jsxs)("span",{className:"inline-flex items-center",children:[(0,Wy.jsx)(Vj,{className:"mr-1 text-blue-500",size:12}),e.mpesaReceiptNumber]}),"stripe"===e.paymentProcessor&&e.stripePaymentId&&(0,Wy.jsxs)("span",{className:"inline-flex items-center",children:[(0,Wy.jsx)(xj,{className:"mr-1 text-purple-500",size:12}),e.stripePaymentId.substring(0,10),"..."]}),"paystack"===e.paymentProcessor&&e.paystackReference&&(0,Wy.jsxs)("span",{className:"inline-flex items-center",children:[(0,Wy.jsx)(Xj,{className:"mr-1 text-green-500",size:12}),e.paystackReference.substring(0,10),"..."]}),(!e.paymentProcessor||"mpesa"===e.paymentProcessor&&!e.mpesaReceiptNumber)&&e.id.substring(0,8)]})]}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"text-sm text-gray-900",children:[e.currency||"KES"," ",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString()]})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:h(null===(n=e.createdAt)||void 0===n?void 0:n.seconds)})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("success"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"success"===e.status?"Success":"pending"===e.status?"Pending":"Failed"})})]},e.id)})})]}):(0,Wy.jsxs)("div",{className:"p-6 text-center",children:[(0,Wy.jsx)("p",{className:"text-gray-500",children:"No transactions yet."}),(0,Wy.jsx)("p",{className:"mt-2 text-xs text-gray-400",children:"Transactions will appear here when customers make payments through your links."})]})})]})]}),(0,Wy.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[(0,Wy.jsx)("h2",{className:"font-display font-bold text-gray-900 mb-4",children:"Payment Method Breakdown"}),r.paymentMethods&&(r.totalTransactions>0?(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Wy.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,Wy.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2",children:(0,Wy.jsx)(Vj,{className:"w-4 h-4 text-blue-600"})}),(0,Wy.jsx)("h3",{className:"font-medium",children:"M-Pesa"})]}),(0,Wy.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Transactions"}),(0,Wy.jsx)("p",{className:"text-xl font-bold",children:r.paymentMethods.mpesa.count})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Amount"}),(0,Wy.jsxs)("p",{className:"text-xl font-bold",children:["KES ",r.paymentMethods.mpesa.amount.toLocaleString()]})]})]}),r.totalTransactions>0&&(0,Wy.jsx)("div",{className:"mt-2 w-full bg-blue-200 rounded-full h-2",children:(0,Wy.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(r.paymentMethods.mpesa.count/r.totalTransactions*100,"%")}})})]}),(0,Wy.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,Wy.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-2",children:(0,Wy.jsx)(xj,{className:"w-4 h-4 text-purple-600"})}),(0,Wy.jsx)("h3",{className:"font-medium",children:"Card Payments"})]}),(0,Wy.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Transactions"}),(0,Wy.jsx)("p",{className:"text-xl font-bold",children:r.paymentMethods.card.count})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Amount"}),(0,Wy.jsxs)("p",{className:"text-xl font-bold",children:["KES ",r.paymentMethods.card.amount.toLocaleString()]})]})]}),r.totalTransactions>0&&(0,Wy.jsx)("div",{className:"mt-2 w-full bg-purple-200 rounded-full h-2",children:(0,Wy.jsx)("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"".concat(r.paymentMethods.card.count/r.totalTransactions*100,"%")}})})]}),(0,Wy.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,Wy.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-2",children:(0,Wy.jsx)(Xj,{className:"w-4 h-4 text-green-600"})}),(0,Wy.jsx)("h3",{className:"font-medium",children:"Paystack"})]}),(0,Wy.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Transactions"}),(0,Wy.jsx)("p",{className:"text-xl font-bold",children:r.paymentMethods.paystack.count})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Amount"}),(0,Wy.jsxs)("p",{className:"text-xl font-bold",children:["KES ",r.paymentMethods.paystack.amount.toLocaleString()]})]})]}),r.totalTransactions>0&&(0,Wy.jsx)("div",{className:"mt-2 w-full bg-green-200 rounded-full h-2",children:(0,Wy.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(r.paymentMethods.paystack.count/r.totalTransactions*100,"%")}})})]})]}):(0,Wy.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,Wy.jsxs)("div",{className:"text-gray-500",children:[(0,Wy.jsx)("p",{children:"Payment method breakdown will appear here when you have transaction data."}),(0,Wy.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"Create payment links and share them with your customers to start seeing activity."})]})}))]})]})};function CE(e,t){return function(){return e.apply(t,arguments)}}const{toString:TE}=Object.prototype,{getPrototypeOf:PE}=Object,{iterator:AE,toStringTag:IE}=Symbol,DE=(RE=Object.create(null),e=>{const t=TE.call(e);return RE[t]||(RE[t]=t.slice(8,-1).toLowerCase())});var RE;const ME=e=>(e=e.toLowerCase(),t=>DE(t)===e),LE=e=>t=>typeof t===e,{isArray:OE}=Array,FE=LE("undefined");function VE(e){return null!==e&&!FE(e)&&null!==e.constructor&&!FE(e.constructor)&&BE(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const UE=ME("ArrayBuffer");const zE=LE("string"),BE=LE("function"),WE=LE("number"),HE=e=>null!==e&&"object"===typeof e,qE=e=>{if("object"!==DE(e))return!1;const t=PE(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(IE in e)&&!(AE in e)},KE=ME("Date"),GE=ME("File"),YE=ME("Blob"),XE=ME("FileList"),QE=ME("URLSearchParams"),[$E,JE,ZE,eC]=["ReadableStream","Request","Response","Headers"].map(ME);function tC(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),OE(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(VE(e))return;const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let a;for(n=0;n<s;n++)a=r[n],t.call(null,e[a],a,e)}}function nC(e,t){if(VE(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const rC="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,iC=e=>!FE(e)&&e!==rC;const sC=(aC="undefined"!==typeof Uint8Array&&PE(Uint8Array),e=>aC&&e instanceof aC);var aC;const oC=ME("HTMLFormElement"),lC=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),cC=ME("RegExp"),uC=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};tC(n,(n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)}),Object.defineProperties(e,r)};const dC=ME("AsyncFunction"),hC=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],rC.addEventListener("message",e=>{let{source:t,data:i}=e;t===rC&&i===n&&r.length&&r.shift()()},!1),e=>{r.push(e),rC.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,BE(rC.postMessage)),fC="undefined"!==typeof queueMicrotask?queueMicrotask.bind(rC):"undefined"!==typeof process&&process.nextTick||hC,mC={isArray:OE,isArrayBuffer:UE,isBuffer:VE,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||BE(e.append)&&("formdata"===(t=DE(e))||"object"===t&&BE(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&UE(e.buffer),t},isString:zE,isNumber:WE,isBoolean:e=>!0===e||!1===e,isObject:HE,isPlainObject:qE,isEmptyObject:e=>{if(!HE(e)||VE(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(MF){return!1}},isReadableStream:$E,isRequest:JE,isResponse:ZE,isHeaders:eC,isUndefined:FE,isDate:KE,isFile:GE,isBlob:YE,isRegExp:cC,isFunction:BE,isStream:e=>HE(e)&&BE(e.pipe),isURLSearchParams:QE,isTypedArray:sC,isFileList:XE,forEach:tC,merge:function e(){const{caseless:t}=iC(this)&&this||{},n={},r=(r,i)=>{const s=t&&nC(n,i)||i;qE(n[s])&&qE(r)?n[s]=e(n[s],r):qE(r)?n[s]=e({},r):OE(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&tC(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return tC(t,(t,r)=>{n&&BE(t)?e[r]=CE(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,a;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],r&&!r(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&PE(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:DE,kindOfTest:ME,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(OE(e))return e;let t=e.length;if(!WE(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[AE]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:oC,hasOwnProperty:lC,hasOwnProp:lC,reduceDescriptors:uC,freezeMethods:e=>{uC(e,(t,n)=>{if(BE(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];BE(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return OE(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:nC,global:rC,isContextDefined:iC,isSpecCompliantForm:function(e){return!!(e&&BE(e.append)&&"FormData"===e[IE]&&e[AE])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(HE(e)){if(t.indexOf(e)>=0)return;if(VE(e))return e;if(!("toJSON"in e)){t[r]=e;const i=OE(e)?[]:{};return tC(e,(e,t)=>{const s=n(e,r+1);!FE(s)&&(i[t]=s)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:dC,isThenable:e=>e&&(HE(e)||BE(e))&&BE(e.then)&&BE(e.catch),setImmediate:hC,asap:fC,isIterable:e=>null!=e&&BE(e[AE])};function pC(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}mC.inherits(pC,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:mC.toJSONObject(this.config),code:this.code,status:this.status}}});const gC=pC.prototype,yC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{yC[e]={value:e}}),Object.defineProperties(pC,yC),Object.defineProperty(gC,"isAxiosError",{value:!0}),pC.from=(e,t,n,r,i,s)=>{const a=Object.create(gC);return mC.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),pC.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};const vC=pC;function xC(e){return mC.isPlainObject(e)||mC.isArray(e)}function bC(e){return mC.endsWith(e,"[]")?e.slice(0,-2):e}function wC(e,t,n){return e?e.concat(t).map(function(e,t){return e=bC(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const kC=mC.toFlatObject(mC,{},null,function(e){return/^is[A-Z]/.test(e)});const NC=function(e,t,n){if(!mC.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=mC.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!mC.isUndefined(t[e])})).metaTokens,i=n.visitor||c,s=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&mC.isSpecCompliantForm(t);if(!mC.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(mC.isDate(e))return e.toISOString();if(mC.isBoolean(e))return e.toString();if(!o&&mC.isBlob(e))throw new vC("Blob is not supported. Use a Buffer instead.");return mC.isArrayBuffer(e)||mC.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let o=e;if(e&&!i&&"object"===typeof e)if(mC.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(mC.isArray(e)&&function(e){return mC.isArray(e)&&!e.some(xC)}(e)||(mC.isFileList(e)||mC.endsWith(n,"[]"))&&(o=mC.toArray(e)))return n=bC(n),o.forEach(function(e,r){!mC.isUndefined(e)&&null!==e&&t.append(!0===a?wC([n],r,s):null===a?n:n+"[]",l(e))}),!1;return!!xC(e)||(t.append(wC(i,n,s),l(e)),!1)}const u=[],d=Object.assign(kC,{defaultVisitor:c,convertValue:l,isVisitable:xC});if(!mC.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!mC.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),mC.forEach(n,function(n,s){!0===(!(mC.isUndefined(n)||null===n)&&i.call(t,n,mC.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])}),u.pop()}}(e),t};function SC(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function _C(e,t){this._pairs=[],e&&NC(e,this,t)}const jC=_C.prototype;jC.append=function(e,t){this._pairs.push([e,t])},jC.toString=function(e){const t=e?function(t){return e.call(this,t,SC)}:SC;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const EC=_C;function CC(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function TC(e,t,n){if(!t)return e;const r=n&&n.encode||CC;mC.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):mC.isURLSearchParams(t)?t.toString():new EC(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const PC=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){mC.forEach(this.handlers,function(t){null!==t&&e(t)})}},AC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},IC={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:EC,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},DC="undefined"!==typeof window&&"undefined"!==typeof document,RC="object"===typeof navigator&&navigator||void 0,MC=DC&&(!RC||["ReactNative","NativeScript","NS"].indexOf(RC.product)<0),LC="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,OC=DC&&window.location.href||"http://localhost",FC=c(c({},e),IC);const VC=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=i>=e.length;if(s=!s&&mC.isArray(r)?r.length:s,o)return mC.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!a;r[s]&&mC.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&mC.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!a}if(mC.isFormData(e)&&mC.isFunction(e.entries)){const n={};return mC.forEachEntry(e,(e,r)=>{t(function(e){return mC.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const UC={transitional:AC,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=mC.isObject(e);i&&mC.isHTMLForm(e)&&(e=new FormData(e));if(mC.isFormData(e))return r?JSON.stringify(VC(e)):e;if(mC.isArrayBuffer(e)||mC.isBuffer(e)||mC.isStream(e)||mC.isFile(e)||mC.isBlob(e)||mC.isReadableStream(e))return e;if(mC.isArrayBufferView(e))return e.buffer;if(mC.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return NC(e,new FC.classes.URLSearchParams,c({visitor:function(e,t,n,r){return FC.isNode&&mC.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=mC.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return NC(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(mC.isString(e))try{return(t||JSON.parse)(e),mC.trim(e)}catch(MF){if("SyntaxError"!==MF.name)throw MF}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||UC.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(mC.isResponse(e)||mC.isReadableStream(e))return e;if(e&&mC.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(MF){if(n){if("SyntaxError"===MF.name)throw vC.from(MF,vC.ERR_BAD_RESPONSE,this,null,this.response);throw MF}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:FC.classes.FormData,Blob:FC.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};mC.forEach(["delete","get","head","post","put","patch"],e=>{UC.headers[e]={}});const zC=UC,BC=mC.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),WC=Symbol("internals");function HC(e){return e&&String(e).trim().toLowerCase()}function qC(e){return!1===e||null==e?e:mC.isArray(e)?e.map(qC):String(e)}function KC(e,t,n,r,i){return mC.isFunction(r)?r.call(this,t,n):(i&&(t=n),mC.isString(t)?mC.isString(r)?-1!==t.indexOf(r):mC.isRegExp(r)?r.test(t):void 0:void 0)}class GC{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=HC(t);if(!i)throw new Error("header name must be a non-empty string");const s=mC.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=qC(e))}const s=(e,t)=>mC.forEach(e,(e,n)=>i(e,n,t));if(mC.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(mC.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&BC[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(mC.isObject(e)&&mC.isIterable(e)){let n,r,i={};for(const t of e){if(!mC.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?mC.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=HC(e)){const n=mC.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(mC.isFunction(t))return t.call(this,e,n);if(mC.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=HC(e)){const n=mC.findKey(this,e);return!(!n||void 0===this[n]||t&&!KC(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=HC(e)){const i=mC.findKey(n,e);!i||t&&!KC(0,n[i],i,t)||(delete n[i],r=!0)}}return mC.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!KC(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return mC.forEach(this,(r,i)=>{const s=mC.findKey(n,i);if(s)return t[s]=qC(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(i):String(i).trim();a!==i&&delete t[i],t[a]=qC(r),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return mC.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&mC.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[WC]=this[WC]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=HC(e);t[r]||(!function(e,t){const n=mC.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return mC.isArray(e)?e.forEach(r):r(e),this}}GC.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),mC.reduceDescriptors(GC.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),mC.freezeMethods(GC);const YC=GC;function XC(e,t){const n=this||zC,r=t||n,i=YC.from(r.headers);let s=r.data;return mC.forEach(e,function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function QC(e){return!(!e||!e.__CANCEL__)}function $C(e,t,n){vC.call(this,null==e?"canceled":e,vC.ERR_CANCELED,t,n),this.name="CanceledError"}mC.inherits($C,vC,{__CANCEL__:!0});const JC=$C;function ZC(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new vC("Request failed with status code "+n.status,[vC.ERR_BAD_REQUEST,vC.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const eT=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[a];i||(i=l),n[s]=o,r[s]=l;let u=a,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const tT=function(e,t){let n,r,i=0,s=1e3/t;const a=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-i;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?a(l,e):(n=l,r||(r=setTimeout(()=>{r=null,a(n)},s-t)))},()=>n&&a(n)]},nT=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=eT(50,250);return tT(n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-r,l=i(o);r=s;e({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},rT=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},iT=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mC.asap(()=>e(...n))},sT=FC.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,FC.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(FC.origin),FC.navigator&&/(msie|trident)/i.test(FC.navigator.userAgent)):()=>!0,aT=FC.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];mC.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),mC.isString(r)&&a.push("path="+r),mC.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function oT(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const lT=e=>e instanceof YC?c({},e):e;function cT(e,t){t=t||{};const n={};function r(e,t,n,r){return mC.isPlainObject(e)&&mC.isPlainObject(t)?mC.merge.call({caseless:r},e,t):mC.isPlainObject(t)?mC.merge({},t):mC.isArray(t)?t.slice():t}function i(e,t,n,i){return mC.isUndefined(t)?mC.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!mC.isUndefined(t))return r(void 0,t)}function a(e,t){return mC.isUndefined(t)?mC.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>i(lT(e),lT(t),0,!0)};return mC.forEach(Object.keys(c(c({},e),t)),function(r){const s=l[r]||i,a=s(e[r],t[r],r);mC.isUndefined(a)&&s!==o||(n[r]=a)}),n}const uT=e=>{const t=cT({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=YC.from(o),t.url=TC(oT(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),mC.isFormData(r))if(FC.hasStandardBrowserEnv||FC.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(FC.hasStandardBrowserEnv&&(i&&mC.isFunction(i)&&(i=i(t)),i||!1!==i&&sT(t.url))){const e=s&&a&&aT.read(a);e&&o.set(s,e)}return t},dT="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=uT(e);let i=r.data;const s=YC.from(r.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function m(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let p=new XMLHttpRequest;function g(){if(!p)return;const r=YC.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());ZC(function(e){t(e),m()},function(e){n(e),m()},{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(n(new vC("Request aborted",vC.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new vC("Network Error",vC.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||AC;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new vC(t,i.clarifyTimeoutError?vC.ETIMEDOUT:vC.ECONNABORTED,e,p)),p=null},void 0===i&&s.setContentType(null),"setRequestHeader"in p&&mC.forEach(s.toJSON(),function(e,t){p.setRequestHeader(t,e)}),mC.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),d&&"json"!==d&&(p.responseType=r.responseType),f&&([l,u]=nT(f,!0),p.addEventListener("progress",l)),h&&p.upload&&([o,c]=nT(h),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{p&&(n(!t||t.type?new JC(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===FC.protocols.indexOf(y)?n(new vC("Unsupported protocol "+y+":",vC.ERR_BAD_REQUEST,e)):p.send(i||null)})},hT=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof vC?t:new JC(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,i(new vC("timeout ".concat(t," of ms exceeded"),vC.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:o}=r;return o.unsubscribe=()=>mC.asap(a),o}};function fT(e,t){this.v=e,this.k=t}function mT(e){return function(){return new pT(e.apply(this,arguments))}}function pT(e){var t,n;function r(t,n){try{var s=e[t](n),a=s.value,o=a instanceof fT;Promise.resolve(o?a.v:a).then(function(n){if(o){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}i(s.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise(function(s,a){var o={key:e,arg:i,resolve:s,reject:a,next:null};n?n=n.next=o:(t=n=o,r(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}function gT(e){return new fT(e,0)}function yT(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new fT(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function vT(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new xT(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function xT(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return xT=function(e){this.s=e,this.n=e.next},xT.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new xT(e)}pT.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},pT.prototype.next=function(e){return this._invoke("next",e)},pT.prototype.throw=function(e){return this._invoke("throw",e)},pT.prototype.return=function(e){return this._invoke("return",e)};const bT=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},wT=function(){var e=mT(function*(e,t){var n,r=!1,i=!1;try{for(var s,a=vT(kT(e));r=!(s=yield gT(a.next())).done;r=!1){const e=s.value;yield*yT(vT(bT(e,t)))}}catch(o){i=!0,n=o}finally{try{r&&null!=a.return&&(yield gT(a.return()))}finally{if(i)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),kT=function(){var e=mT(function*(e){if(e[Symbol.asyncIterator])return void(yield*yT(vT(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield gT(t.read());if(e)break;yield n}}finally{yield gT(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),NT=(e,t,n,r)=>{const i=wT(e,t);let s,a=0,o=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return o(),void e.close();let s=r.byteLength;if(n){let e=a+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},ST="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,_T=ST&&"function"===typeof ReadableStream,jT=ST&&("function"===typeof TextEncoder?(ET=new TextEncoder,e=>ET.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ET;const CT=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(MF){return!1}},TT=_T&&CT(()=>{let e=!1;const t=new Request(FC.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),PT=_T&&CT(()=>mC.isReadableStream(new Response("").body)),AT={stream:PT&&(e=>e.body)};var IT;ST&&(IT=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!AT[e]&&(AT[e]=mC.isFunction(IT[e])?t=>t[e]():(t,n)=>{throw new vC("Response type '".concat(e,"' is not supported"),vC.ERR_NOT_SUPPORT,n)})}));const DT=async(e,t)=>{const n=mC.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(mC.isBlob(e))return e.size;if(mC.isSpecCompliantForm(e)){const t=new Request(FC.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return mC.isArrayBufferView(e)||mC.isArrayBuffer(e)?e.byteLength:(mC.isURLSearchParams(e)&&(e+=""),mC.isString(e)?(await jT(e)).byteLength:void 0)})(t):n},RT=ST&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:f}=uT(e);u=u?(u+"").toLowerCase():"text";let m,p=hT([i,s&&s.toAbortSignal()],a);const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(l&&TT&&"get"!==n&&"head"!==n&&0!==(y=await DT(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(mC.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=rT(y,nT(iT(l)));r=NT(n.body,65536,e,t)}}mC.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;m=new Request(t,c(c({},f),{},{signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:i?h:void 0}));let s=await fetch(m,f);const a=PT&&("stream"===u||"response"===u);if(PT&&(o||a&&g)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=s[t]});const t=mC.toFiniteNumber(s.headers.get("content-length")),[n,r]=o&&rT(t,nT(iT(o),!0))||[];s=new Response(NT(s.body,65536,n,()=>{r&&r(),g&&g()}),e)}u=u||"text";let v=await AT[mC.findKey(AT,u)||"text"](s,e);return!a&&g&&g(),await new Promise((t,n)=>{ZC(t,n,{data:v,headers:YC.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:m})})}catch(v){if(g&&g(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new vC("Network Error",vC.ERR_NETWORK,e,m),{cause:v.cause||v});throw vC.from(v,v&&v.code,e,m)}}),MT={http:null,xhr:dT,fetch:RT};mC.forEach(MT,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(MF){}Object.defineProperty(e,"adapterName",{value:t})}});const LT=e=>"- ".concat(e),OT=e=>mC.isFunction(e)||null===e||!1===e,FT=e=>{e=mC.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!OT(n)&&(r=MT[(t=String(n)).toLowerCase()],void 0===r))throw new vC("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(LT).join("\n"):" "+LT(e[0]):"as no adapter specified";throw new vC("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function VT(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new JC(null,e)}function UT(e){VT(e),e.headers=YC.from(e.headers),e.data=XC.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return FT(e.adapter||zC.adapter)(e).then(function(t){return VT(e),t.data=XC.call(e,e.transformResponse,t),t.headers=YC.from(t.headers),t},function(t){return QC(t)||(VT(e),t&&t.response&&(t.response.data=XC.call(e,e.transformResponse,t.response),t.response.headers=YC.from(t.response.headers))),Promise.reject(t)})}const zT="1.11.0",BT={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{BT[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const WT={};BT.transitional=function(e,t,n){function r(e,t){return"[Axios v"+zT+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new vC(r(i," has been removed"+(t?" in "+t:"")),vC.ERR_DEPRECATED);return t&&!WT[i]&&(WT[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},BT.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const HT={assertOptions:function(e,t,n){if("object"!==typeof e)throw new vC("options must be an object",vC.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const t=e[s],n=void 0===t||a(t,s,e);if(!0!==n)throw new vC("option "+s+" must be "+n,vC.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new vC("Unknown option "+s,vC.ERR_BAD_OPTION)}},validators:BT},qT=HT.validators;class KT{constructor(e){this.defaults=e||{},this.interceptors={request:new PC,response:new PC}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(MF){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=cT(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&HT.assertOptions(n,{silentJSONParsing:qT.transitional(qT.boolean),forcedJSONParsing:qT.transitional(qT.boolean),clarifyTimeoutError:qT.transitional(qT.boolean)},!1),null!=r&&(mC.isFunction(r)?t.paramsSerializer={serialize:r}:HT.assertOptions(r,{encode:qT.function,serialize:qT.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),HT.assertOptions(t,{baseUrl:qT.spelling("baseURL"),withXsrfToken:qT.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&mC.merge(i.common,i[t.method]);i&&mC.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=YC.concat(s,i);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[UT.bind(this),void 0];for(e.unshift(...a),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=UT.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return TC(oT((e=cT(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}mC.forEach(["delete","get","head","options"],function(e){KT.prototype[e]=function(t,n){return this.request(cT(n||{},{method:e,url:t,data:(n||{}).data}))}}),mC.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(cT(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}KT.prototype[e]=t(),KT.prototype[e+"Form"]=t(!0)});const GT=KT;class YT{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new JC(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new YT(function(t){e=t}),cancel:e}}}const XT=YT;const QT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(QT).forEach(e=>{let[t,n]=e;QT[n]=t});const $T=QT;const JT=function e(t){const n=new GT(t),r=CE(GT.prototype.request,n);return mC.extend(r,GT.prototype,n,{allOwnKeys:!0}),mC.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(cT(t,n))},r}(zC);JT.Axios=GT,JT.CanceledError=JC,JT.CancelToken=XT,JT.isCancel=QC,JT.VERSION=zT,JT.toFormData=NC,JT.AxiosError=vC,JT.Cancel=JT.CanceledError,JT.all=function(e){return Promise.all(e)},JT.spread=function(e){return function(t){return e.apply(null,t)}},JT.isAxiosError=function(e){return mC.isObject(e)&&!0===e.isAxiosError},JT.mergeConfig=cT,JT.AxiosHeaders=YC,JT.formToJSON=e=>VC(mC.isHTMLForm(e)?new FormData(e):e),JT.getAdapter=FT,JT.HttpStatusCode=$T,JT.default=JT;const ZT=JT,eP="http://localhost:8000",tP=async(e,t,n)=>{try{return(await ZT.post("".concat(eP,"/send-reminder"),{linkId:e,phoneNumber:t,reminderType:n})).data}catch(i){var r;throw console.error("Error sending manual reminder:",i),(null===(r=i.response)||void 0===r?void 0:r.data)||i}};const nP=function(){const{currentUser:e}=qy(),n=me(),[r,i]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)(""),[u,d]=(0,t.useState)(null),[h,f]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),[g,y]=(0,t.useState)(!1),[v,x]=(0,t.useState)("all"),[b,w]=(0,t.useState)("newest"),[k,N]=(0,t.useState)(!1),[S,_]=(0,t.useState)(!1),[j,E]=(0,t.useState)(!1),[C,T]=(0,t.useState)(""),[P,A]=(0,t.useState)(""),I=async()=>{if(e)try{a(!0);const t=qg(ig(By,"paymentLinks"),Gg("ownerUid","==",e.uid));let n=(await oy(t)).docs.map(e=>c({id:e.id},e.data()));"newest"===b?n.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.seconds-e.createdAt.seconds:0):"oldest"===b?n.sort((e,t)=>e.createdAt&&t.createdAt?e.createdAt.seconds-t.createdAt.seconds:0):"amount-high"===b?n.sort((e,t)=>t.amount-e.amount):"amount-low"===b&&n.sort((e,t)=>e.amount-t.amount),i(n)}catch(t){console.error("Error fetching payment links:",t)}finally{a(!1)}};(0,t.useEffect)(()=>{I()},[e,b]);const D=e=>{if(!e)return"";return new Date(1e3*e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})},R=r.filter(e=>{var t,n;const r=(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(n=e.slug)||void 0===n?void 0:n.toLowerCase().includes(o.toLowerCase())),i="all"===v||"active"===v&&"active"===e.status||"inactive"===v&&"inactive"===e.status||"expired"===v&&e.expiryDate&&e.expiryDate.seconds<Date.now()/1e3;return r&&i});return(0,Wy.jsxs)(jE,{children:[(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h1",{className:"text-2xl font-display font-bold text-gray-900",children:"Payment Links"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:"Manage your M-Pesa payment links."})]}),(0,Wy.jsx)("div",{className:"mt-4 md:mt-0",children:(0,Wy.jsx)(yt,{to:"/dashboard/create",children:(0,Wy.jsxs)(fE,{variant:"primary",children:[(0,Wy.jsx)(Uj,{className:"mr-2"})," Create New Link"]})})})]}),(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6 border border-gray-100",children:(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[(0,Wy.jsxs)("div",{className:"relative flex-grow",children:[(0,Wy.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Wy.jsx)(Bj,{className:"text-gray-400"})}),(0,Wy.jsx)("input",{type:"text",placeholder:"Search payment links...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:o,onChange:e=>l(e.target.value)})]}),(0,Wy.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Wy.jsxs)("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:v,onChange:e=>x(e.target.value),children:[(0,Wy.jsx)("option",{value:"all",children:"All Links"}),(0,Wy.jsx)("option",{value:"active",children:"Active"}),(0,Wy.jsx)("option",{value:"inactive",children:"Inactive"}),(0,Wy.jsx)("option",{value:"expired",children:"Expired"})]}),(0,Wy.jsxs)("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:b,onChange:e=>w(e.target.value),children:[(0,Wy.jsx)("option",{value:"newest",children:"Newest"}),(0,Wy.jsx)("option",{value:"oldest",children:"Oldest"}),(0,Wy.jsx)("option",{value:"amount-high",children:"Amount (High to Low)"}),(0,Wy.jsx)("option",{value:"amount-low",children:"Amount (Low to High)"})]})]})]})}),(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:s?(0,Wy.jsxs)("div",{className:"p-8 text-center",children:[(0,Wy.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-primary-600"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading payment links..."})]}):R.length>0?(0,Wy.jsx)("div",{className:"overflow-x-auto",children:(0,Wy.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Wy.jsx)("thead",{className:"bg-gray-50",children:(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Link Details"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Wy.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(e=>{var t,s,a;return(0,Wy.jsxs)(Y_.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},whileHover:{backgroundColor:"#f9fafb"},children:[(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Wy.jsx)(Aj,{className:"h-5 w-5 text-primary-600"})}),(0,Wy.jsxs)("div",{className:"ml-4",children:[(0,Wy.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.description}),(0,Wy.jsxs)("div",{className:"text-sm text-primary-600",children:["paylink.co.ke/",e.slug]})]})]})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.currency," ",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString()]})}),(0,Wy.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:D(null===(s=e.createdAt)||void 0===s?void 0:s.seconds)}),e.expiryDate&&(0,Wy.jsxs)("div",{className:"text-xs text-gray-400",children:["Expires: ",D(null===(a=e.expiryDate)||void 0===a?void 0:a.seconds)]}),e.reminders&&e.reminders.length>0&&(0,Wy.jsxs)("div",{className:"text-xs text-blue-500 mt-1",children:[e.reminders.length," reminder",1!==e.reminders.length?"s":""," sent"]})]}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.expiryDate&&e.expiryDate.seconds<Date.now()/1e3?"bg-red-100 text-red-800":"active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.expiryDate&&e.expiryDate.seconds<Date.now()/1e3?"Expired":"active"===e.status?"Active":"Inactive"})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:e.singleUse?"Single-use":"Multiple-use"})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Wy.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,Wy.jsx)("button",{onClick:()=>(e=>{const t="".concat(window.location.origin,"/pay/").concat(e);d({slug:e,url:t}),T(t),p(!0)})(e.slug),className:"text-gray-500 hover:text-primary-600",title:"Copy link",children:(0,Wy.jsx)(vj,{className:"h-5 w-5"})}),(0,Wy.jsx)("a",{href:"".concat(window.location.origin,"/pay/").concat(e.slug),target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-primary-600",title:"View payment page",children:(0,Wy.jsx)(Nj,{className:"h-5 w-5"})}),(0,Wy.jsx)("button",{onClick:()=>n("/dashboard/edit/".concat(e.id)),className:"text-gray-500 hover:text-primary-600",title:"Edit link",children:(0,Wy.jsx)(kj,{className:"h-5 w-5"})}),(0,Wy.jsx)("button",{onClick:()=>n("/dashboard/analytics/".concat(e.id)),className:"text-gray-500 hover:text-primary-600",title:"View analytics",children:(0,Wy.jsx)(uj,{className:"h-5 w-5"})}),(0,Wy.jsx)("button",{onClick:()=>{d(e),y(!0)},className:"text-gray-500 hover:text-blue-600",title:"Send payment reminder",children:(0,Wy.jsx)(dj,{className:"h-5 w-5"})}),(0,Wy.jsx)("button",{onClick:()=>(async e=>{try{const t="active"===e.status?"inactive":"active",n=sg(By,"paymentLinks",e.id);await cy(n,{status:t}),i(r.map(n=>n.id===e.id?c(c({},n),{},{status:t}):n))}catch(t){console.error("Error updating link status:",t),alert("Failed to update link status. Please try again.")}})(e),className:"text-gray-500 hover:text-primary-600",title:"active"===e.status?"Make inactive":"Make active",children:"active"===e.status?(0,Wy.jsx)(Gj,{className:"h-5 w-5"}):(0,Wy.jsx)(Kj,{className:"h-5 w-5"})}),(0,Wy.jsx)("button",{onClick:()=>{d(e),f(!0)},className:"text-gray-500 hover:text-red-600",title:"Delete link",children:(0,Wy.jsx)(Yj,{className:"h-5 w-5"})})]})})]},e.id)})})]})}):(0,Wy.jsxs)("div",{className:"p-8 text-center",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100",children:(0,Wy.jsx)(Aj,{className:"h-8 w-8 text-gray-400"})}),(0,Wy.jsx)("p",{className:"mt-4 text-lg font-medium text-gray-900",children:"No payment links found"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Create your first payment link to start accepting M-Pesa payments."}),(0,Wy.jsx)("div",{className:"mt-4",children:(0,Wy.jsx)(yt,{to:"/dashboard/create",children:(0,Wy.jsxs)(fE,{variant:"primary",children:[(0,Wy.jsx)(Uj,{className:"mr-2"})," Create Payment Link"]})})})]})}),h&&(0,Wy.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 max-w-md mx-4",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Payment Link"}),(0,Wy.jsxs)("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete the payment link "',null===u||void 0===u?void 0:u.description,'"? This action cannot be undone.']}),(0,Wy.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Wy.jsx)(fE,{variant:"ghost",onClick:()=>{f(!1),d(null)},disabled:k,children:"Cancel"}),(0,Wy.jsx)(fE,{variant:"danger",onClick:async()=>{var e;if(u)try{N(!0);const t=sg(By,"paymentLinks",u.id);await(e=t,dy(yl(e.firestore,cg),[new qd(e._key,Id.none())])),await I(),f(!1),d(null)}catch(t){console.error("Error deleting payment link:",t),alert("Failed to delete payment link. Please try again.")}finally{N(!1)}},isLoading:k,children:"Delete"})]})]})}),m&&(0,Wy.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 max-w-md mx-4",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Copy Payment Link"}),(0,Wy.jsx)("div",{className:"mb-4",children:(0,Wy.jsx)("div",{className:"flex items-center bg-gray-50 border border-gray-200 rounded-md p-3",children:(0,Wy.jsx)("span",{className:"text-sm text-gray-600 truncate flex-grow",children:C})})}),(0,Wy.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Wy.jsx)(fE,{variant:"ghost",onClick:()=>{p(!1),d(null)},children:"Cancel"}),(0,Wy.jsx)(fE,{variant:"primary",onClick:async()=>{if(u)try{_(!0),await navigator.clipboard.writeText(u.url),setTimeout(()=>{p(!1),d(null),_(!1)},1e3)}catch(e){console.error("Failed to copy link:",e),_(!1)}},isLoading:S,children:S?"Copied!":"Copy to Clipboard"})]})]})}),g&&(0,Wy.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 max-w-md mx-4",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Send Payment Reminder"}),(0,Wy.jsxs)("p",{className:"text-gray-600 mb-4",children:['Send a reminder to the customer for payment link "',null===u||void 0===u?void 0:u.description,'".']}),(0,Wy.jsxs)("div",{className:"mb-4",children:[(0,Wy.jsx)("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer's Phone Number"}),(0,Wy.jsx)("input",{type:"text",id:"phoneNumber",placeholder:"e.g. 254712345678",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:P,onChange:e=>A(e.target.value)}),(0,Wy.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the phone number in international format (e.g. 254712345678)"})]}),(null===u||void 0===u?void 0:u.reminders)&&u.reminders.length>0&&(0,Wy.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-md",children:[(0,Wy.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Previous Reminders"}),(0,Wy.jsx)("ul",{className:"text-xs text-gray-600",children:u.reminders.map((e,t)=>(0,Wy.jsxs)("li",{className:"mb-1",children:[new Date(1e3*e.sentAt.seconds).toLocaleString(),":"," ",e.type," reminder to ",e.recipientPhone]},t))})]}),(0,Wy.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Wy.jsx)(fE,{variant:"ghost",onClick:()=>{y(!1),d(null),A("")},disabled:j,children:"Cancel"}),(0,Wy.jsx)(fE,{variant:"primary",onClick:async()=>{if(u&&P)try{E(!0);const e=await tP(u.id,P,"manual");if("0"!==e.ResponseCode)throw new Error(e.errorMessage||"Failed to send reminder");{const e=r.map(e=>{if(e.id===u.id){const t=e.reminders||[];return c(c({},e),{},{reminders:[...t,{type:"manual",sentAt:{seconds:Date.now()/1e3},recipientPhone:P}]})}return e});i(e),setTimeout(()=>{y(!1),d(null),A(""),E(!1)},1e3)}}catch(e){console.error("Failed to send reminder:",e),alert("Failed to send reminder: "+(e.message||"Unknown error")),E(!1)}},isLoading:j,disabled:!P,children:j?"Sending...":"Send Reminder"})]})]})})]})};function rP(e){return ij({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function iP(e){return ij({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(e)}function sP(e){return ij({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}const aP=function(){const{currentUser:e}=qy(),n=me(),[r,i]=(0,t.useState)({description:"",amount:"",currency:"KES",expiryDate:"",slug:"",singleUse:!1,allowedPaymentMethods:["mpesa","card","paystack"]}),[s,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(""),u=e=>{const{name:t,value:n,type:s,checked:a}=e.target;i(c(c({},r),{},{[t]:"checkbox"===s?a:n}))},d=e=>{i(t=>{const n=[...t.allowedPaymentMethods];return n.includes(e)?c(c({},t),{},{allowedPaymentMethods:n.filter(t=>t!==e)}):c(c({},t),{},{allowedPaymentMethods:[...n,e]})})};return(0,Wy.jsx)(jE,{children:(0,Wy.jsxs)("div",{className:"p-6",children:[(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Payment Link"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:"Create a shareable payment link for your customers"})]}),o&&(0,Wy.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md text-red-800",children:o}),(0,Wy.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r.description.trim())if(!r.amount||parseFloat(r.amount)<=0)l("Please enter a valid amount");else if(0!==r.allowedPaymentMethods.length){a(!0),l("");try{const t={description:r.description,amount:parseFloat(r.amount),currency:r.currency,slug:r.slug||Math.random().toString(36).substring(2,10),singleUse:r.singleUse,allowedPaymentMethods:r.allowedPaymentMethods,active:!0,used:!1,createdAt:fy(),ownerUid:e.uid};r.expiryDate&&(t.expiryDate=new Date(r.expiryDate));await uy(ig(By,"paymentLinks"),t);n("/dashboard/payment-links")}catch(o){console.error("Error creating payment link:",o),l("An error occurred while creating the payment link")}finally{a(!1)}}else l("Please select at least one payment method");else l("Please enter a description")},children:[(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Wy.jsxs)("div",{className:"space-y-6",children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Wy.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Payment Details"}),(0,Wy.jsxs)("div",{className:"space-y-4",children:[(0,Wy.jsx)(bE,{label:"Description",type:"text",name:"description",value:r.description,onChange:u,placeholder:"e.g. Website Design Services",icon:(0,Wy.jsx)(_j,{className:"text-gray-400"}),required:!0}),(0,Wy.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Wy.jsx)(bE,{label:"Amount",type:"number",name:"amount",value:r.amount,onChange:u,placeholder:"0.00",icon:(0,Wy.jsx)(bj,{className:"text-gray-400"}),required:!0}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,Wy.jsxs)("select",{name:"currency",value:r.currency,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,Wy.jsx)("option",{value:"KES",children:"KES - Kenyan Shilling"}),(0,Wy.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,Wy.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,Wy.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),(0,Wy.jsx)("option",{value:"NGN",children:"NGN - Nigerian Naira"})]})]})]})]})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Wy.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Payment Methods"}),(0,Wy.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Select which payment methods to accept (at least one)"}),(0,Wy.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Wy.jsxs)("button",{type:"button",onClick:()=>d("mpesa"),className:"flex items-center px-4 py-2 rounded-md border ".concat(r.allowedPaymentMethods.includes("mpesa")?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 text-gray-700"),children:[(0,Wy.jsx)("span",{className:"mr-2",children:"M-Pesa"}),r.allowedPaymentMethods.includes("mpesa")&&(0,Wy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Wy.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),(0,Wy.jsxs)("button",{type:"button",onClick:()=>d("card"),className:"flex items-center px-4 py-2 rounded-md border ".concat(r.allowedPaymentMethods.includes("card")?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 text-gray-700"),children:[(0,Wy.jsx)("span",{className:"mr-2",children:"Card"}),r.allowedPaymentMethods.includes("card")&&(0,Wy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Wy.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),(0,Wy.jsxs)("button",{type:"button",onClick:()=>d("paystack"),className:"flex items-center px-4 py-2 rounded-md border ".concat(r.allowedPaymentMethods.includes("paystack")?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 text-gray-700"),children:[(0,Wy.jsx)("span",{className:"mr-2",children:"Paystack"}),r.allowedPaymentMethods.includes("paystack")&&(0,Wy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Wy.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})]})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Wy.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Link Settings"}),(0,Wy.jsxs)("div",{className:"space-y-4",children:[(0,Wy.jsxs)("div",{className:"flex items-end gap-4",children:[(0,Wy.jsx)("div",{className:"flex-1",children:(0,Wy.jsx)(bE,{label:"Custom Link ID (optional)",type:"text",name:"slug",value:r.slug,onChange:u,placeholder:"e.g. my-product",icon:(0,Wy.jsx)(Aj,{className:"text-gray-400"})})}),(0,Wy.jsx)(fE,{type:"button",variant:"secondary",onClick:()=>{const e=Math.random().toString(36).substring(2,10);i(c(c({},r),{},{slug:e}))},className:"mb-0.5",children:"Generate"})]}),(0,Wy.jsx)(bE,{label:"Expiry Date (optional)",type:"date",name:"expiryDate",value:r.expiryDate,onChange:u,min:(new Date).toISOString().split("T")[0],icon:(0,Wy.jsx)(hj,{className:"text-gray-400"})}),(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("input",{id:"singleUse",name:"singleUse",type:"checkbox",checked:r.singleUse,onChange:u,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,Wy.jsx)("label",{htmlFor:"singleUse",className:"ml-2 block text-sm text-gray-700",children:"Single-use link (can only be used once)"})]})]})]})]}),(0,Wy.jsx)("div",{children:(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-6",children:[(0,Wy.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Payment Link Preview"}),(0,Wy.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,Wy.jsx)("div",{className:"bg-gray-50 p-4 border-b border-gray-200",children:(0,Wy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)(Nj,{className:"text-gray-500 mr-2"}),(0,Wy.jsx)("span",{className:"text-sm font-medium",children:"Preview"})]}),(0,Wy.jsxs)("div",{className:"text-xs text-gray-500",children:[window.location.origin,"/pay/",r.slug||"custom-link"]})]})}),(0,Wy.jsxs)("div",{className:"p-6",children:[(0,Wy.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-100",children:[(0,Wy.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:r.description||"Payment Description"}),(0,Wy.jsxs)("p",{className:"text-gray-600 text-sm",children:["Payment request from ",(0,Wy.jsx)("span",{className:"font-medium",children:"PayNow"})]})]}),(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Amount"}),(0,Wy.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:[r.currency," ",r.amount?parseFloat(r.amount).toLocaleString():"0.00"]})]}),(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Available Payment Methods"}),(0,Wy.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[r.allowedPaymentMethods.includes("mpesa")&&(0,Wy.jsxs)("div",{className:"flex flex-col items-center justify-center p-3 rounded-md border border-primary-500 bg-primary-50",children:[(0,Wy.jsx)(iP,{className:"text-2xl text-primary-600"}),(0,Wy.jsx)("span",{className:"text-sm mt-2 text-primary-600 font-medium",children:"M-Pesa"})]}),r.allowedPaymentMethods.includes("card")&&(0,Wy.jsxs)("div",{className:"flex flex-col items-center justify-center p-3 rounded-md border border-primary-500 bg-primary-50",children:[(0,Wy.jsx)(rP,{className:"text-2xl text-primary-600"}),(0,Wy.jsx)("span",{className:"text-sm mt-2 text-primary-600 font-medium",children:"Card"})]}),r.allowedPaymentMethods.includes("paystack")&&(0,Wy.jsxs)("div",{className:"flex flex-col items-center justify-center p-3 rounded-md border border-primary-500 bg-primary-50",children:[(0,Wy.jsx)(sP,{className:"text-2xl text-primary-600"}),(0,Wy.jsx)("span",{className:"text-sm mt-2 text-primary-600 font-medium",children:"Paystack"})]})]})]}),r.expiryDate&&(0,Wy.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,Wy.jsx)("span",{className:"font-medium",children:"Expires:"})," ",new Date(r.expiryDate).toLocaleDateString()]}),r.singleUse&&(0,Wy.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,Wy.jsx)("span",{className:"font-medium",children:"Type:"})," Single-use link"]})]})]})]})})]}),(0,Wy.jsxs)("div",{className:"flex justify-end mt-6",children:[(0,Wy.jsx)(fE,{type:"button",variant:"secondary",onClick:()=>n("/dashboard/links"),className:"mr-4",children:"Cancel"}),(0,Wy.jsx)(fE,{type:"submit",variant:"primary",loading:s,children:"Create Payment Link"})]})]})]})})};const oP=function(){return(0,Wy.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,Wy.jsx)(Y_.div,{className:"w-16 h-16 border-4 border-primary-500 rounded-full",style:{borderTopColor:"transparent"},animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})};const lP=function(){const{id:e}=pe(),{currentUser:n}=qy(),r=me(),[i,s]=(0,t.useState)({amount:"",description:"",slug:"",expiryDate:"",reference:"",singleUse:!1,status:"active"}),[a,o]=(0,t.useState)(""),[l,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!0),[p,g]=(0,t.useState)(null),[y,v]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&n&&(async()=>{try{m(!0);const t=sg(By,"paymentLinks",e),r=await sy(t);if(!r.exists())return void u("Payment link not found");const i=r.data();if(i.ownerUid!==n.uid)return void u("You do not have permission to edit this link");let a="";i.expiryDate&&(a=new Date(1e3*i.expiryDate.seconds).toISOString().split("T")[0]),s({amount:i.amount||"",description:i.description||"",slug:i.slug||"",expiryDate:a,reference:i.reference||"",singleUse:i.singleUse||!1,status:i.status||"active"}),o(i.slug||"")}catch(l){console.error("Error fetching payment link:",l),u("Failed to load payment link details")}finally{m(!1)}})()},[e,n]);const x=e=>{const{name:t,value:n,type:r,checked:o}=e.target;s(c(c({},i),{},{[t]:"checkbox"===r?o:n})),"slug"===t&&n!==a&&g(null)};return f?(0,Wy.jsx)(jE,{children:(0,Wy.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Wy.jsx)(oP,{})})}):"Payment link not found"===l||"You do not have permission to edit this link"===l?(0,Wy.jsx)(jE,{children:(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:(0,Wy.jsxs)("div",{className:"text-center",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4",children:(0,Wy.jsx)(oj,{className:"h-8 w-8 text-red-600"})}),(0,Wy.jsx)("h2",{className:"text-2xl font-display font-bold text-gray-900 mb-2",children:l}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-6",children:"The payment link you are trying to edit does not exist or you don't have permission to access it."}),(0,Wy.jsx)(fE,{variant:"primary",onClick:()=>r("/dashboard/links"),children:"Back to Payment Links"})]})})}):(0,Wy.jsxs)(jE,{children:[(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("h1",{className:"text-2xl font-display font-bold text-gray-900",children:"Edit Payment Link"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:"Update your M-Pesa payment link details."})]}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Wy.jsx)("div",{className:"lg:col-span-2",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[l&&(0,Wy.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-start",children:[(0,Wy.jsx)(oj,{className:"text-red-500 mt-0.5 mr-2 flex-shrink-0"}),(0,Wy.jsx)("span",{className:"text-red-800 text-sm",children:l})]}),(0,Wy.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{if(u(""),h(!0),!i.amount||!i.description)return u("Amount and description are required"),void h(!1);if(i.slug!==a){const e=qg(ig(By,"paymentLinks"),Gg("slug","==",i.slug));if(!(await oy(e)).empty)return u("This slug is already taken. Please choose another one."),g(!1),void h(!1)}const t={amount:parseFloat(i.amount),description:i.description,slug:i.slug,status:i.status,singleUse:i.singleUse,updatedAt:fy()};i.expiryDate?t.expiryDate=new Date(i.expiryDate):t.expiryDate=null,i.reference?t.reference=i.reference:t.reference=null;const n=sg(By,"paymentLinks",e);await cy(n,t),r("/dashboard/links")}catch(l){console.error("Error updating payment link:",l),u("Failed to update payment link. Please try again.")}finally{h(!1)}},children:[(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Wy.jsx)(bE,{label:"Amount (KES)",type:"number",id:"amount",name:"amount",placeholder:"Enter amount",value:i.amount,onChange:x,required:!0,min:"1",icon:(0,Wy.jsx)(bj,{className:"text-gray-400"})}),(0,Wy.jsx)(bE,{label:"Description",type:"text",id:"description",name:"description",placeholder:"e.g. Monthly Subscription",value:i.description,onChange:x,required:!0}),(0,Wy.jsxs)("div",{className:"md:col-span-2",children:[(0,Wy.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-1",children:"Link Slug"}),(0,Wy.jsx)("div",{className:"flex items-center",children:(0,Wy.jsxs)("div",{className:"relative flex-grow",children:[(0,Wy.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Wy.jsx)(Aj,{className:"text-gray-400"})}),(0,Wy.jsx)("input",{type:"text",id:"slug",name:"slug",placeholder:"e.g. monthly-subscription",value:i.slug,onChange:x,onBlur:async()=>{if(i.slug!==a){if(i.slug)try{v(!0);const e=qg(ig(By,"paymentLinks"),Gg("slug","==",i.slug)),t=(await oy(e)).empty;g(t)}catch(l){console.error("Error checking slug availability:",l),g(!0)}finally{v(!1)}}else g(!0)},className:"\n                          w-full px-4 py-2 pl-10 rounded-md border \n                          ".concat(!1===p?"border-red-500":"border-gray-300"," \n                          focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\n                        "),required:!0}),y&&(0,Wy.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,Wy.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Wy.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Wy.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),!0===p&&!y&&(0,Wy.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,Wy.jsx)(mj,{className:"h-5 w-5 text-green-500"})})]})}),(0,Wy.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["This will be used in your payment URL: paylink.co.ke/",i.slug||"your-slug"]}),!1===p&&(0,Wy.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"This slug is already taken. Please choose another one."})]}),(0,Wy.jsx)(bE,{label:"Expiry Date (Optional)",type:"date",id:"expiryDate",name:"expiryDate",value:i.expiryDate,onChange:x,min:(new Date).toISOString().split("T")[0],icon:(0,Wy.jsx)(hj,{className:"text-gray-400"})}),(0,Wy.jsx)(bE,{label:"Reference (Optional)",type:"text",id:"reference",name:"reference",placeholder:"e.g. Invoice #123",value:i.reference,onChange:x}),(0,Wy.jsx)("div",{children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("input",{id:"singleUse",name:"singleUse",type:"checkbox",checked:i.singleUse,onChange:x,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,Wy.jsx)("label",{htmlFor:"singleUse",className:"ml-2 block text-sm text-gray-700",children:"Single-use link (can only be used once)"})]})}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link Status"}),(0,Wy.jsx)("button",{type:"button",onClick:()=>{s(c(c({},i),{},{status:"active"===i.status?"inactive":"active"}))},className:"flex items-center px-4 py-2 rounded-md ".concat("active"===i.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"active"===i.status?(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsx)(Gj,{className:"h-5 w-5 mr-2"}),"Active"]}):(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsx)(Kj,{className:"h-5 w-5 mr-2"}),"Inactive"]})}),(0,Wy.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"active"===i.status?"Your link is active and can be used for payments.":"Your link is inactive and cannot be used for payments."})]})]}),(0,Wy.jsxs)("div",{className:"mt-6 flex justify-end",children:[(0,Wy.jsx)(fE,{type:"button",variant:"ghost",className:"mr-4",onClick:()=>r("/dashboard/links"),children:"Cancel"}),(0,Wy.jsx)(fE,{type:"submit",variant:"primary",isLoading:d,children:"Update Payment Link"})]})]})]})}),(0,Wy.jsx)("div",{children:(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100 sticky top-6",children:[(0,Wy.jsx)("h2",{className:"font-display font-bold text-gray-900 mb-4",children:"Link Preview"}),(0,Wy.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,Wy.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Wy.jsx)(Aj,{className:"w-4 h-4 text-primary-600"})}),(0,Wy.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:"Payment Request"})]}),(0,Wy.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full ".concat("active"===i.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"active"===i.status?"Active":"Inactive"})]}),(0,Wy.jsxs)("div",{className:"border-t border-gray-200 pt-3",children:[(0,Wy.jsx)("h3",{className:"font-medium text-gray-900",children:i.description||"Payment Description"}),(0,Wy.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["KES ",i.amount||"0"]}),(0,Wy.jsxs)("div",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[i.reference&&(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{children:"Reference:"}),(0,Wy.jsx)("span",{className:"font-medium",children:i.reference})]}),i.expiryDate&&(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{children:"Expires:"}),(0,Wy.jsx)("span",{className:"font-medium",children:new Date(i.expiryDate).toLocaleDateString()})]}),(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{children:"Link type:"}),(0,Wy.jsx)("span",{className:"font-medium",children:i.singleUse?"Single-use":"Multiple-use"})]})]}),(0,Wy.jsx)("div",{className:"mt-6",children:(0,Wy.jsx)(fE,{variant:"active"===i.status?"primary":"ghost",fullWidth:!0,disabled:!0,children:"Pay Now"})})]})]}),(0,Wy.jsxs)("div",{className:"mt-6",children:[(0,Wy.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Payment URL"}),(0,Wy.jsxs)("div",{className:"flex items-center bg-gray-50 border border-gray-200 rounded-md p-2",children:[(0,Wy.jsxs)("span",{className:"text-sm text-gray-600 truncate",children:["paylink.co.ke/",i.slug||"your-slug"]}),(0,Wy.jsx)("button",{type:"button",className:"ml-auto p-1 text-gray-500 hover:text-primary-600",onClick:()=>{navigator.clipboard.writeText("paylink.co.ke/".concat(i.slug||"your-slug"))},children:(0,Wy.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]})})]})]})},cP="http://localhost:8000",uP=async(e,t,n)=>{try{return(await ZT.post("".concat(cP,"/stkpush"),{phone:e,amount:t,orderId:n})).data}catch(i){var r;throw console.error("Error initiating STK Push:",i),(null===(r=i.response)||void 0===r?void 0:r.data)||i}},dP=async e=>{try{return(await ZT.post("".concat(cP,"/query"),{queryCode:e})).data}catch(n){var t;throw console.error("Error checking payment status:",n),(null===(t=n.response)||void 0===t?void 0:t.data)||n}},hP=e=>{let t=e.replace(/\D/g,"");return t=t.replace(/^0+/,""),t.startsWith("254")||(t.startsWith("7")||t.startsWith("1"))&&(t="254"+t),t},fP=e=>{const t=hP(e);return/^254[17]\d{8}$/.test(t)},mP=e=>{var t,n;const r=e.mpesaReceiptNumber||e.transactionId||pP(),i=e.transactionTime||(null!==(t=e.createdAt)&&void 0!==t&&t.seconds?new Date(1e3*e.createdAt.seconds):new Date).toISOString().replace(/[-:]/g,"").substring(0,14);let s="John",a="",o="Doe";if(e.payerName){const t=e.payerName.split(" ");s=t[0]||"John",2===t.length?o=t[1]||"Doe":t.length>2&&(a=t[1]||"",o=t.slice(2).join(" ")||"Doe")}return{TransactionType:e.transactionType||"Pay Bill",TransID:r,TransTime:i,TransAmount:(null===(n=e.amount)||void 0===n?void 0:n.toString())||"0",BusinessShortCode:e.businessShortCode||"4121151",BillRefNumber:e.id||e.reference||"",InvoiceNumber:e.invoiceNumber||"",OrgAccountBalance:e.accountBalance||"",ThirdPartyTransID:e.thirdPartyTransID||"",MSISDN:e.payerPhone||"254700000000",FirstName:s,MiddleName:a,LastName:o}},pP=()=>{const e="ABCDEFGHJKLMNPQRSTUVWXYZ",t="0123456789";let n="";const r=Math.floor(3*Math.random())+2;for(let s=0;s<r;s++)n+=e.charAt(Math.floor(24*Math.random()));const i=10-r;for(let s=0;s<i;s++)n+=t.charAt(Math.floor(10*Math.random()));return n},gP=e=>{if(!e)return"N/A";try{if(e.length>=14){const t=e.substring(0,4),n=e.substring(4,6),r=e.substring(6,8),i=e.substring(8,10),s=e.substring(10,12),a=e.substring(12,14),o=new Date("".concat(t,"-").concat(n,"-").concat(r,"T").concat(i,":").concat(s,":").concat(a));return isNaN(o.getTime())?(new Date).toLocaleString("en-GB"):o.toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}{const t=parseInt(e);if(!isNaN(t)){return new Date(1e3*t).toLocaleString("en-GB")}return e}}catch(t){return console.error("Error formatting M-Pesa timestamp:",t),(new Date).toLocaleString("en-GB")}};const yP=function(){var e,n,r,i,s,a;const{currentUser:o}=qy(),[l,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(!0),[f,m]=(0,t.useState)(""),[p,g]=(0,t.useState)("all"),[y,v]=(0,t.useState)(1),[x,b]=(0,t.useState)(!1),[w,k]=(0,t.useState)(null),[N,S]=(0,t.useState)("mpesa");(0,t.useEffect)(()=>{(async()=>{if(o)try{h(!0);const e=qg(ig(By,"transactions"),Gg("ownerUid","==",o.uid));let t=(await oy(e)).docs.map(e=>{const t=e.data();return c(c({id:e.id},t),{},{validationData:t.validationRequest||t.callbackData||null})});t.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.seconds-e.createdAt.seconds:0),u(t)}catch(e){console.error("Error fetching transactions:",e)}finally{h(!1)}})()},[o]);const _=e=>{if(!e)return"";return new Date(1e3*e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},j=e=>{switch(e){case"success":return(0,Wy.jsx)(mj,{className:"h-5 w-5 text-green-500"});case"failed":return(0,Wy.jsx)(nE,{className:"h-5 w-5 text-red-500"});case"pending":return(0,Wy.jsx)(yj,{className:"h-5 w-5 text-yellow-500"});default:return null}},E=e=>{switch(e){case"success":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},C=l.filter(e=>{var t,n,r;const i=(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null===(n=e.mpesaReceiptNumber)||void 0===n?void 0:n.toLowerCase().includes(f.toLowerCase()))||(null===(r=e.payerPhone)||void 0===r?void 0:r.includes(f))||!1,s="all"===p||e.status===p;return i&&s}),T=10*y,P=T-10,A=C.slice(P,T),I=Math.ceil(C.length/10),D=e=>{v(e)},[R,M]=(0,t.useState)(!1),[L,O]=(0,t.useState)(null);return(0,Wy.jsxs)(jE,{children:[(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("h1",{className:"text-2xl font-display font-bold text-gray-900",children:"Transactions"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:"View and manage your M-Pesa payment transactions."})]}),(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6 border border-gray-100",children:(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[(0,Wy.jsxs)("div",{className:"relative flex-grow",children:[(0,Wy.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Wy.jsx)(Bj,{className:"text-gray-400"})}),(0,Wy.jsx)("input",{type:"text",placeholder:"Search by description, receipt number or phone...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:f,onChange:e=>m(e.target.value)})]}),(0,Wy.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Wy.jsxs)("div",{className:"relative",children:[(0,Wy.jsxs)("select",{className:"border border-gray-300 rounded-md pl-9 pr-3 py-2 appearance-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:p,onChange:e=>g(e.target.value),children:[(0,Wy.jsx)("option",{value:"all",children:"All Status"}),(0,Wy.jsx)("option",{value:"success",children:"Success"}),(0,Wy.jsx)("option",{value:"pending",children:"Pending"}),(0,Wy.jsx)("option",{value:"failed",children:"Failed"})]}),(0,Wy.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Wy.jsx)(jj,{className:"text-gray-400"})})]}),(0,Wy.jsxs)(fE,{variant:"outline",onClick:()=>{if(0===C.length)return void alert("No transactions to export");const e=[["ID","Description","Amount","Currency","Status","Phone","Receipt","Date"].join(","),...C.map(e=>{var t;return[e.id,'"'.concat(e.description||"",'"'),e.amount,e.currency||"KES",e.status||"",e.payerPhone||"",e.mpesaReceiptNumber||"",_(null===(t=e.createdAt)||void 0===t?void 0:t.seconds)].join(",")})].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(t),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download","transactions_".concat((new Date).toISOString().split("T")[0],".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},children:[(0,Wy.jsx)(wj,{className:"mr-2"})," Export"]})]})]})}),(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:d?(0,Wy.jsxs)("div",{className:"p-8 text-center",children:[(0,Wy.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-primary-600"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading transactions..."})]}):A.length>0?(0,Wy.jsx)("div",{className:"overflow-x-auto",children:(0,Wy.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Wy.jsx)("thead",{className:"bg-gray-50",children:(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Wy.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(e=>{var t,n;return(0,Wy.jsxs)(Y_.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},whileHover:{backgroundColor:"#f9fafb"},children:[(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center",children:(0,Wy.jsx)(xj,{className:"h-5 w-5 text-gray-600"})}),(0,Wy.jsxs)("div",{className:"ml-4",children:[(0,Wy.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.description||"Payment"}),(0,Wy.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",e.id]})]})]})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.currency||"KES"," ",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString()]})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:_(null===(n=e.createdAt)||void 0===n?void 0:n.seconds)})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[j(e.status),(0,Wy.jsx)("span",{className:"ml-1.5 px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(E(e.status)),children:e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Unknown"})]})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:e.payerPhone||"N/A"})}),(0,Wy.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-900",children:e.mpesaReceiptNumber||"Pending"}),e.hasInvoice&&e.invoiceUrl&&(0,Wy.jsx)("a",{href:e.invoiceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary-600 hover:text-primary-800 mt-1 inline-block",children:"View Invoice"})]}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Wy.jsx)("button",{onClick:()=>(async e=>{k(e),b(!0),M(!0),O(null),"stripe"===e.paymentProcessor?S("card"):"paystack"===e.paymentProcessor?S("paystack"):S("mpesa");try{const i=sg(By,"transactions",e.id),s=await sy(i);if(s.exists()){var t,n;const i=s.data();let a=i.validationRequest||i.callbackData;if(!a&&null!==(t=i.mpesaResponse)&&void 0!==t&&null!==(n=t.Body)&&void 0!==n&&n.stkCallback){const t=i.mpesaResponse.Body.stkCallback.CallbackMetadata;if(t){var r;const n=e=>{var n;const r=null===(n=t.Item)||void 0===n?void 0:n.find(t=>t.Name===e);return r?r.Value:null};let s=n("PhoneNumber");s&&(s=s.toString());let o=n("Amount");o&&(o=o.toString());let l=n("TransactionDate");l&&(l=l.toString());let c=n("MpesaReceiptNumber")||i.mpesaReceiptNumber,u="Customer",d="",h="";if(i.payerName){const e=i.payerName.split(" ");u=e[0]||"Customer",2===e.length?h=e[1]||"":e.length>2&&(d=e[1]||"",h=e.slice(2).join(" ")||"")}a={TransactionType:"Pay Bill",TransID:c||"",TransTime:l||"",TransAmount:o||(null===(r=i.amount)||void 0===r?void 0:r.toString())||"0",BusinessShortCode:i.mpesaResponse.Body.stkCallback.BusinessShortCode||"4121151",BillRefNumber:e.id,InvoiceNumber:i.invoiceNumber||"",OrgAccountBalance:i.accountBalance||"",ThirdPartyTransID:i.thirdPartyTransID||"",MSISDN:s||i.payerPhone||"",FirstName:u,MiddleName:d,LastName:h}}}if(a)k(c(c({},e),{},{validationData:a}));else{const t=mP(e);k(c(c({},e),{},{validationData:t}))}}}catch(i){console.error("Error fetching validation data:",i),O("Failed to load validation data")}finally{M(!1)}})(e),className:"text-primary-600 hover:text-primary-800",title:"View validation details",children:(0,Wy.jsx)(Nj,{className:"h-5 w-5 mx-auto"})})})]},e.id)})})]})}):(0,Wy.jsxs)("div",{className:"p-8 text-center",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100",children:(0,Wy.jsx)(xj,{className:"h-8 w-8 text-gray-400"})}),(0,Wy.jsx)("p",{className:"mt-4 text-lg font-medium text-gray-900",children:"No transactions found"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:f||"all"!==p?"Try adjusting your search or filters":"Transactions will appear here when you receive payments"})]})}),C.length>0&&(0,Wy.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,Wy.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,Wy.jsx)("span",{className:"font-medium",children:P+1})," to"," ",(0,Wy.jsx)("span",{className:"font-medium",children:Math.min(T,C.length)})," ","of ",(0,Wy.jsx)("span",{className:"font-medium",children:C.length})," results"]}),(0,Wy.jsxs)("div",{className:"flex space-x-2",children:[(0,Wy.jsx)("button",{className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",onClick:()=>D(y-1),disabled:1===y,children:"Previous"}),Array.from({length:Math.min(I,5)},(e,t)=>{let n;return n=I<=5||y<=3?t+1:y>=I-2?I-4+t:y-2+t,(0,Wy.jsx)("button",{className:"px-3 py-1 border rounded-md text-sm font-medium ".concat(y===n?"bg-primary-600 text-white border-primary-600":"text-gray-700 border-gray-300 hover:bg-gray-50"),onClick:()=>D(n),children:n},n)}),(0,Wy.jsx)("button",{className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",onClick:()=>D(y+1),disabled:y===I||0===I,children:"Next"})]})]}),x&&w&&(0,Wy.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl mx-4 w-full",children:[(0,Wy.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"stripe"===w.paymentProcessor?"Card Payment Details":"paystack"===w.paymentProcessor?"Paystack Payment Details":"M-Pesa Validation Request"}),(0,Wy.jsxs)("div",{className:"flex space-x-2",children:[(0,Wy.jsxs)("button",{className:"px-3 py-1 rounded-md text-sm font-medium flex items-center ".concat("mpesa"===N?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>S("mpesa"),disabled:!(!w.paymentProcessor||"mpesa"===w.paymentProcessor),children:[(0,Wy.jsx)(Vj,{className:"mr-1"})," M-Pesa"]}),(0,Wy.jsxs)("button",{className:"px-3 py-1 rounded-md text-sm font-medium flex items-center ".concat("card"===N?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>S("card"),disabled:!("stripe"===w.paymentProcessor),children:[(0,Wy.jsx)(xj,{className:"mr-1"})," Card"]}),(0,Wy.jsxs)("button",{className:"px-3 py-1 rounded-md text-sm font-medium flex items-center ".concat("paystack"===N?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>S("paystack"),disabled:!("paystack"===w.paymentProcessor),children:[(0,Wy.jsx)(Xj,{className:"mr-1"})," Paystack"]})]})]}),(0,Wy.jsx)("div",{className:"bg-gray-50 p-4 rounded-md mb-4 overflow-auto max-h-96",children:R?(0,Wy.jsxs)("div",{className:"flex items-center justify-center p-4",children:[(0,Wy.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-2 border-gray-300 border-t-primary-600 mr-2"}),(0,Wy.jsx)("p",{children:"Loading transaction data..."})]}):L?(0,Wy.jsx)("div",{className:"text-red-500",children:L}):"mpesa"===N&&w.validationData?(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Transaction Details"}),(0,Wy.jsx)("table",{className:"min-w-full text-sm",children:(0,Wy.jsxs)("tbody",{children:[(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Transaction ID:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.TransID||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Amount:"}),(0,Wy.jsxs)("td",{className:"py-1",children:["KES ",w.validationData.TransAmount||"N/A"]})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Transaction Time:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.TransTime?gP(w.validationData.TransTime):"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Transaction Type:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.TransactionType||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Business Code:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.BusinessShortCode||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Reference:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.BillRefNumber||"N/A"})]}),w.validationData.InvoiceNumber&&(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Invoice Number:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.InvoiceNumber})]}),w.validationData.ThirdPartyTransID&&(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Third Party ID:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.ThirdPartyTransID})]})]})})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Customer Details"}),(0,Wy.jsx)("table",{className:"min-w-full text-sm",children:(0,Wy.jsxs)("tbody",{children:[(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Phone:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.MSISDN||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"First Name:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.FirstName||"N/A"})]}),w.validationData.MiddleName&&(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Middle Name:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.MiddleName})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Last Name:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.LastName||"N/A"})]}),w.validationData.OrgAccountBalance&&(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Account Balance:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.validationData.OrgAccountBalance})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Status:"}),(0,Wy.jsx)("td",{className:"py-1",children:(0,Wy.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("success"===w.status?"bg-green-100 text-green-800":"failed"===w.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"success"===w.status?"Success":"failed"===w.status?"Failed":"Pending"})})]})]})})]})]}),(0,Wy.jsx)("div",{className:"mt-4",children:(0,Wy.jsx)("button",{onClick:()=>{const e=document.createElement("textarea");e.value=JSON.stringify(w.validationData,null,2),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Validation data copied to clipboard")},className:"text-xs text-primary-600 hover:text-primary-800",children:"View Raw JSON"})})]}):"card"===N?(0,Wy.jsx)(Wy.Fragment,{children:(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Card Payment Details"}),(0,Wy.jsx)("table",{className:"min-w-full text-sm",children:(0,Wy.jsxs)("tbody",{children:[(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Payment ID:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.stripePaymentId||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Amount:"}),(0,Wy.jsxs)("td",{className:"py-1",children:[w.currency||"KES"," ",(null===(e=w.amount)||void 0===e?void 0:e.toLocaleString())||"N/A"]})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Payment Method:"}),(0,Wy.jsx)("td",{className:"py-1",children:"Credit/Debit Card"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Transaction Date:"}),(0,Wy.jsx)("td",{className:"py-1",children:_((null===(n=w.completedAt)||void 0===n?void 0:n.seconds)||(null===(r=w.createdAt)||void 0===r?void 0:r.seconds))})]})]})})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Customer Details"}),(0,Wy.jsx)("table",{className:"min-w-full text-sm",children:(0,Wy.jsxs)("tbody",{children:[(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Email:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.payerEmail||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Name:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.payerName||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Status:"}),(0,Wy.jsx)("td",{className:"py-1",children:(0,Wy.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("success"===w.status?"bg-green-100 text-green-800":"failed"===w.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"success"===w.status?"Success":"failed"===w.status?"Failed":"Pending"})})]})]})})]})]})}):"paystack"===N?(0,Wy.jsx)(Wy.Fragment,{children:(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Paystack Payment Details"}),(0,Wy.jsx)("table",{className:"min-w-full text-sm",children:(0,Wy.jsxs)("tbody",{children:[(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Reference:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.paystackReference||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Amount:"}),(0,Wy.jsxs)("td",{className:"py-1",children:[w.currency||"KES"," ",(null===(i=w.amount)||void 0===i?void 0:i.toLocaleString())||"N/A"]})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Payment Method:"}),(0,Wy.jsx)("td",{className:"py-1",children:"Paystack"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Transaction Date:"}),(0,Wy.jsx)("td",{className:"py-1",children:_((null===(s=w.completedAt)||void 0===s?void 0:s.seconds)||(null===(a=w.createdAt)||void 0===a?void 0:a.seconds))})]})]})})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Customer Details"}),(0,Wy.jsx)("table",{className:"min-w-full text-sm",children:(0,Wy.jsxs)("tbody",{children:[(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Email:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.payerEmail||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Name:"}),(0,Wy.jsx)("td",{className:"py-1",children:w.payerName||"N/A"})]}),(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"py-1 pr-4 font-medium text-gray-500",children:"Status:"}),(0,Wy.jsx)("td",{className:"py-1",children:(0,Wy.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("success"===w.status?"bg-green-100 text-green-800":"failed"===w.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"success"===w.status?"Success":"failed"===w.status?"Failed":"Pending"})})]})]})})]})]})}):(0,Wy.jsx)("p",{className:"text-gray-500",children:"No transaction data available for the selected payment method."})}),(0,Wy.jsxs)("div",{className:"bg-green-50 p-4 rounded-md mb-4",children:[(0,Wy.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"Server Response"}),(0,Wy.jsx)("pre",{className:"text-sm whitespace-pre-wrap text-green-800",children:JSON.stringify(w.mpesaResponse||{ResponseCode:"success"===w.status?"0":"1",ResponseDesc:"success"===w.status?"Success":w.resultDescription||"Transaction processing"},null,2)})]}),(0,Wy.jsx)("div",{className:"flex justify-end",children:(0,Wy.jsx)(fE,{variant:"primary",onClick:()=>b(!1),children:"Close"})})]})})]})};const vP=function(){const{currentUser:e}=qy(),[n,r]=(0,t.useState)([]),[i,s]=(0,t.useState)(!0),[a,o]=(0,t.useState)(""),[l,u]=(0,t.useState)({key:"lastTransactionDate",direction:"desc"}),[d,h]=(0,t.useState)("all"),[f,m]=(0,t.useState)("all"),[p,g]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{if(e)try{s(!0);const t=qg(ig(By,"merchants",e.uid,"customers"));let n=(await oy(t)).docs.map(e=>c({id:e.id},e.data()));n.sort((e,t)=>e.lastTransactionDate&&t.lastTransactionDate?t.lastTransactionDate.seconds-e.lastTransactionDate.seconds:0),r(n)}catch(t){console.error("Error fetching customers:",t)}finally{s(!1)}})()},[e]);const y=e=>{if(!e)return"";return new Date(1e3*e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})},v=e=>{let t="asc";l.key===e&&"asc"===l.direction&&(t="desc"),u({key:e,direction:t})},x=t.useMemo(()=>{let e=[...n];return l.key&&e.sort((e,t)=>e[l.key]<t[l.key]?"asc"===l.direction?-1:1:e[l.key]>t[l.key]?"asc"===l.direction?1:-1:0),e},[n,l]).filter(e=>{var t,n,r;const i=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null===(n=e.phoneNumber)||void 0===n?void 0:n.toLowerCase().includes(a.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(a.toLowerCase()));let s=!0;if("all"!==f){const t=(e=>{switch(e){case"last7days":return 7;case"last30days":return 30;case"last90days":return 90;default:return 0}})(f),n=new Date;n.setDate(n.getDate()-t),(!e.lastTransactionDate||new Date(1e3*e.lastTransactionDate.seconds)<n)&&(s=!1)}let o=!0;if("all"!==d){const[t,n]=(e=>{switch(e){case"under1000":return[0,1e3];case"1000to5000":return[1e3,5e3];case"over5000":return[5e3,1/0];default:return[0,1/0]}})(d),r=e.totalSpent||0;(r<t||r>n)&&(o=!1)}return i&&s&&o});return(0,Wy.jsxs)(jE,{children:[(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("h1",{className:"text-2xl font-display font-bold text-gray-900",children:"Customers"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:"Manage your customer relationships and send payment links."})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6 border border-gray-100",children:[(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Wy.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,Wy.jsx)(bE,{type:"text",placeholder:"Search customers...",value:a,onChange:e=>o(e.target.value),className:"pl-10"}),(0,Wy.jsx)(Bj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),(0,Wy.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Wy.jsxs)(fE,{variant:"ghost",size:"sm",onClick:()=>g(!p),className:"flex items-center",children:[(0,Wy.jsx)(jj,{className:"mr-2"}),p?"Hide Filters":"Show Filters"]}),(0,Wy.jsxs)(fE,{variant:"ghost",size:"sm",onClick:()=>{const e=[["Name","Phone","Email","Total Spent","Transactions","Last Transaction"].join(","),...x.map(e=>['"'.concat(e.name||"",'"'),'"'.concat(e.phoneNumber||"",'"'),'"'.concat(e.email||"",'"'),e.totalSpent||0,e.totalTransactions||0,e.lastTransactionDate?y(e.lastTransactionDate.seconds):""].join(","))].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(t),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download","customers_".concat((new Date).toISOString().split("T")[0],".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:"flex items-center",children:[(0,Wy.jsx)(wj,{className:"mr-2"}),"Export"]}),(0,Wy.jsxs)("span",{className:"text-sm text-gray-500",children:[x.length," ",1===x.length?"customer":"customers"]})]})]}),p&&(0,Wy.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Transaction"}),(0,Wy.jsxs)("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2",value:f,onChange:e=>m(e.target.value),children:[(0,Wy.jsx)("option",{value:"all",children:"All Time"}),(0,Wy.jsx)("option",{value:"last7days",children:"Last 7 Days"}),(0,Wy.jsx)("option",{value:"last30days",children:"Last 30 Days"}),(0,Wy.jsx)("option",{value:"last90days",children:"Last 90 Days"})]})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Spend"}),(0,Wy.jsxs)("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2",value:d,onChange:e=>h(e.target.value),children:[(0,Wy.jsx)("option",{value:"all",children:"Any Amount"}),(0,Wy.jsx)("option",{value:"under1000",children:"Under KES 1,000"}),(0,Wy.jsx)("option",{value:"1000to5000",children:"KES 1,000 - 5,000"}),(0,Wy.jsx)("option",{value:"over5000",children:"Over KES 5,000"})]})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,Wy.jsxs)("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2",value:"".concat(l.key,"-").concat(l.direction),onChange:e=>{const[t,n]=e.target.value.split("-");u({key:t,direction:n})},children:[(0,Wy.jsx)("option",{value:"lastTransactionDate-desc",children:"Most Recent Transaction"}),(0,Wy.jsx)("option",{value:"lastTransactionDate-asc",children:"Oldest Transaction"}),(0,Wy.jsx)("option",{value:"totalSpent-desc",children:"Highest Spend"}),(0,Wy.jsx)("option",{value:"totalSpent-asc",children:"Lowest Spend"}),(0,Wy.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,Wy.jsx)("option",{value:"name-desc",children:"Name (Z-A)"})]})]})]})})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Wy.jsx)("div",{className:"p-6 border-b",children:(0,Wy.jsx)("h2",{className:"font-display font-bold text-gray-900",children:"Customer List"})}),i?(0,Wy.jsxs)("div",{className:"p-6 text-center",children:[(0,Wy.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-4 border-gray-300 border-t-primary-600"}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading customers..."})]}):x.length>0?(0,Wy.jsx)("div",{className:"overflow-x-auto",children:(0,Wy.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Wy.jsx)("thead",{className:"bg-gray-50",children:(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>v("name"),children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)(Zj,{className:"mr-1"}),"Customer","name"===l.key&&(0,Wy.jsx)("span",{className:"ml-1",children:"asc"===l.direction?"\u2191":"\u2193"})]})}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>v("lastTransactionDate"),children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)(hj,{className:"mr-1"}),"Last Transaction","lastTransactionDate"===l.key&&(0,Wy.jsx)("span",{className:"ml-1",children:"asc"===l.direction?"\u2191":"\u2193"})]})}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>v("totalSpent"),children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)(bj,{className:"mr-1"}),"Total Spent","totalSpent"===l.key&&(0,Wy.jsx)("span",{className:"ml-1",children:"asc"===l.direction?"\u2191":"\u2193"})]})}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>v("totalTransactions"),children:(0,Wy.jsxs)("div",{className:"flex items-center",children:["Transactions","totalTransactions"===l.key&&(0,Wy.jsx)("span",{className:"ml-1",children:"asc"===l.direction?"\u2191":"\u2193"})]})}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Wy.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>{var t,n,r,i;return(0,Wy.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Wy.jsx)("span",{className:"text-gray-600 font-medium",children:(null===(t=e.name)||void 0===t?void 0:t.charAt(0))||"C"})}),(0,Wy.jsxs)("div",{className:"ml-4",children:[(0,Wy.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name||"Customer"}),(0,Wy.jsxs)("div",{className:"text-xs text-gray-500 flex flex-col sm:flex-row sm:gap-3",children:[e.phoneNumber&&(0,Wy.jsxs)("span",{className:"flex items-center",children:[(0,Wy.jsx)(Vj,{className:"mr-1 text-gray-400",size:12}),e.phoneNumber]}),e.email&&(0,Wy.jsxs)("span",{className:"flex items-center",children:[(0,Wy.jsx)(Oj,{className:"mr-1 text-gray-400",size:12}),e.email]})]})]})]})}),(0,Wy.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-900",children:y(null===(n=e.lastTransactionDate)||void 0===n?void 0:n.seconds)}),(0,Wy.jsxs)("div",{className:"text-xs text-gray-500",children:["KES ",(null===(r=e.lastTransactionAmount)||void 0===r?void 0:r.toLocaleString())||"0"]}),e.transactions&&e.transactions.length>0&&(0,Wy.jsxs)("div",{className:"text-xs text-blue-500 mt-1",children:[e.transactions.length," transaction",1!==e.transactions.length?"s":""]})]}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["KES ",(null===(i=e.totalSpent)||void 0===i?void 0:i.toLocaleString())||"0"]})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsx)("div",{className:"text-sm text-gray-900",children:e.totalTransactions||"0"})}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Wy.jsx)(yt,{to:"/dashboard/create?customer=".concat(e.id),children:(0,Wy.jsxs)(fE,{variant:"ghost",size:"sm",className:"inline-flex items-center",children:[(0,Wy.jsx)(Wj,{className:"mr-1"}),"Send Payment Link"]})})})]},e.id)})})]})}):(0,Wy.jsxs)("div",{className:"p-6 text-center",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:(0,Wy.jsx)(Zj,{className:"h-8 w-8 text-gray-400"})}),(0,Wy.jsx)("p",{className:"text-gray-500",children:"No customers found."}),(0,Wy.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"Customers will appear here when they make payments through your links."})]})]})]})};function xP(e){return e+.5|0}const bP=(e,t,n)=>Math.max(Math.min(e,n),t);function wP(e){return bP(xP(2.55*e),0,255)}function kP(e){return bP(xP(255*e),0,255)}function NP(e){return bP(xP(e/2.55)/100,0,1)}function SP(e){return bP(xP(100*e),0,100)}const _P={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jP=[..."0123456789ABCDEF"],EP=e=>jP[15&e],CP=e=>jP[(240&e)>>4]+jP[15&e],TP=e=>(240&e)>>4===(15&e);function PP(e){var t=(e=>TP(e.r)&&TP(e.g)&&TP(e.b)&&TP(e.a))(e)?EP:CP;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const AP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function IP(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function DP(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function RP(e,t,n){const r=IP(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function MP(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=(i+s)/2;let o,l,c;return i!==s&&(c=i-s,l=a>.5?c/(2-i-s):c/(i+s),o=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),o=60*o+.5),[0|o,l||0,a]}function LP(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(kP)}function OP(e,t,n){return LP(IP,e,t,n)}function FP(e){return(e%360+360)%360}function VP(e){const t=AP.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?wP(+t[5]):kP(+t[5]));const i=FP(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return LP(RP,e,t,n)}(i,s,a):"hsv"===t[1]?function(e,t,n){return LP(DP,e,t,n)}(i,s,a):OP(i,s,a),{r:n[0],g:n[1],b:n[2],a:r}}const UP={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},zP={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let BP;function WP(e){BP||(BP=function(){const e={},t=Object.keys(zP),n=Object.keys(UP);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<n.length;i++)s=n[i],o=o.replace(s,UP[s]);s=parseInt(zP[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),BP.transparent=[0,0,0,0]);const t=BP[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const HP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const qP=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,KP=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function GP(e,t,n){if(e){let r=MP(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=OP(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function YP(e,t){return e?Object.assign(t||{},e):e}function XP(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=kP(e[3]))):(t=YP(e,{r:0,g:0,b:0,a:1})).a=kP(t.a),t}function QP(e){return"r"===e.charAt(0)?function(e){const t=HP.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?wP(e):bP(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?wP(n):bP(n,0,255)),r=255&(t[4]?wP(r):bP(r,0,255)),i=255&(t[6]?wP(i):bP(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):VP(e)}class $P{constructor(e){if(e instanceof $P)return e;const t=typeof e;let n;"object"===t?n=XP(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*_P[e[1]],g:255&17*_P[e[2]],b:255&17*_P[e[3]],a:5===n?17*_P[e[4]]:255}:7!==n&&9!==n||(t={r:_P[e[1]]<<4|_P[e[2]],g:_P[e[3]]<<4|_P[e[4]],b:_P[e[5]]<<4|_P[e[6]],a:9===n?_P[e[7]]<<4|_P[e[8]]:255})),t}(e)||WP(e)||QP(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=YP(this._rgb);return e&&(e.a=NP(e.a)),e}set rgb(e){this._rgb=XP(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(NP(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?PP(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=MP(e),n=t[0],r=SP(t[1]),i=SP(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(NP(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,a=2*s-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=KP(NP(e.r)),i=KP(NP(e.g)),s=KP(NP(e.b));return{r:kP(qP(r+n*(KP(NP(t.r))-r))),g:kP(qP(i+n*(KP(NP(t.g))-i))),b:kP(qP(s+n*(KP(NP(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new $P(this.rgb)}alpha(e){return this._rgb.a=kP(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=xP(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return GP(this._rgb,2,e),this}darken(e){return GP(this._rgb,2,-e),this}saturate(e){return GP(this._rgb,1,e),this}desaturate(e){return GP(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=MP(e);n[0]=FP(n[0]+t),n=OP(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function JP(){}const ZP=(()=>{let e=0;return()=>e++})();function eA(e){return null===e||void 0===e}function tA(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function nA(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function rA(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function iA(e,t){return rA(e)?e:t}function sA(e,t){return"undefined"===typeof e?t:e}const aA=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function oA(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function lA(e,t,n,r){let i,s,a;if(tA(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(nA(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)t.call(n,e[a[i]],a[i])}function cA(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function uA(e){if(tA(e))return e.map(uA);if(nA(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=uA(e[n[i]]);return t}return e}function dA(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function hA(e,t,n,r){if(!dA(e))return;const i=t[e],s=n[e];nA(i)&&nA(s)?fA(i,s,r):t[e]=uA(s)}function fA(e,t,n){const r=tA(t)?t:[t],i=r.length;if(!nA(e))return e;const s=(n=n||{}).merger||hA;let a;for(let o=0;o<i;++o){if(a=r[o],!nA(a))continue;const t=Object.keys(a);for(let r=0,i=t.length;r<i;++r)s(t[r],e,a,n)}return e}function mA(e,t){return fA(e,t,{merger:pA})}function pA(e,t,n){if(!dA(e))return;const r=t[e],i=n[e];nA(r)&&nA(i)?mA(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=uA(i))}const gA={"":e=>e,x:e=>e.x,y:e=>e.y};function yA(e,t){const n=gA[t]||(gA[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function vA(e){return e.charAt(0).toUpperCase()+e.slice(1)}const xA=e=>"undefined"!==typeof e,bA=e=>"function"===typeof e,wA=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const kA=Math.PI,NA=2*kA,SA=NA+kA,_A=Number.POSITIVE_INFINITY,jA=kA/180,EA=kA/2,CA=kA/4,TA=2*kA/3,PA=Math.log10,AA=Math.sign;function IA(e,t,n){return Math.abs(e-t)<n}function DA(e){const t=Math.round(e);e=IA(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(PA(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function RA(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function MA(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function LA(e){return e*(kA/180)}function OA(e){return e*(180/kA)}function FA(e){if(!rA(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function VA(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*kA&&(s+=NA),{angle:s,distance:i}}function UA(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function zA(e,t){return(e-t+SA)%NA-kA}function BA(e){return(e%NA+NA)%NA}function WA(e,t,n,r){const i=BA(e),s=BA(t),a=BA(n),o=BA(s-i),l=BA(a-i),c=BA(i-s),u=BA(i-a);return i===s||i===a||r&&s===a||o>l&&c<u}function HA(e,t,n){return Math.max(t,Math.min(n,e))}function qA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function KA(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const GA=(e,t,n,r)=>KA(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),YA=(e,t,n)=>KA(e,n,r=>e[r][t]>=n);const XA=["push","pop","shift","splice","unshift"];function QA(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(XA.forEach(t=>{delete e[t]}),delete e._chartjs)}function $A(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const JA="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function ZA(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];n=s,r||(r=!0,JA.call(window,()=>{r=!1,e.apply(t,n)}))}}const eI=e=>"start"===e?"left":"end"===e?"right":"center",tI=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function nI(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:f,maxDefined:m}=a.getUserBounds();if(f){if(i=Math.min(GA(l,u,d).lo,n?r:GA(t,u,a.getPixelForValue(d)).lo),c){const e=l.slice(0,i+1).reverse().findIndex(e=>!eA(e[o.axis]));i-=Math.max(0,e)}i=HA(i,0,r-1)}if(m){let e=Math.max(GA(l,a.axis,h,!0).hi+1,n?0:GA(t,u,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!eA(e[o.axis]));e+=Math.max(0,t)}s=HA(e,i,r)-i}else s=r-i}return{start:i,count:s}}function rI(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const iI=e=>0===e||1===e,sI=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*NA/n),aI=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*NA/n)+1,oI={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*EA),easeOutSine:e=>Math.sin(e*EA),easeInOutSine:e=>-.5*(Math.cos(kA*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>iI(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>iI(e)?e:sI(e,.075,.3),easeOutElastic:e=>iI(e)?e:aI(e,.075,.3),easeInOutElastic(e){const t=.1125;return iI(e)?e:e<.5?.5*sI(2*e,t,.45):.5+.5*aI(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-oI.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*oI.easeInBounce(2*e):.5*oI.easeOutBounce(2*e-1)+.5};function lI(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function cI(e){return lI(e)?e:new $P(e)}function uI(e){return lI(e)?e:new $P(e).saturate(.5).darken(.1).hexString()}const dI=["x","y","borderWidth","radius","tension"],hI=["color","borderColor","backgroundColor"];const fI=new Map;function mI(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=fI.get(n);return r||(r=new Intl.NumberFormat(e,t),fI.set(n,r)),r}(t,n).format(e)}const pI={values:e=>tA(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=PA(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),mI(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(PA(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?pI.numeric.call(this,e,t,n):""}};var gI={formatters:pI};const yI=Object.create(null),vI=Object.create(null);function xI(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function bI(e,t,n){return"string"===typeof t?fA(xI(e,t),n):fA(xI(e,""),t)}class wI{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>uI(t.backgroundColor),this.hoverBorderColor=(e,t)=>uI(t.borderColor),this.hoverColor=(e,t)=>uI(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return bI(this,e,t)}get(e){return xI(this,e)}describe(e,t){return bI(vI,e,t)}override(e,t){return bI(yI,e,t)}route(e,t,n,r){const i=xI(this,e),s=xI(this,n),a="_"+t;Object.defineProperties(i,{[a]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[r];return nA(e)?Object.assign({},t,e):sA(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var kI=new wI({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:hI},numbers:{type:"number",properties:dI}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function NI(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function SI(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],void 0===d||null===d||tA(d)){if(tA(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||tA(h)||(a=NI(e,i,s,a,h))}else a=NI(e,i,s,a,d);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return a}function _I(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function jI(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function EI(e,t,n,r){CI(e,t,n,r,null)}function CI(e,t,n,r,i){let s,a,o,l,c,u,d,h;const f=t.pointStyle,m=t.rotation,p=t.radius;let g=(m||0)*jA;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,p,0,0,NA):e.arc(n,r,p,0,NA),e.closePath();break;case"triangle":u=i?i/2:p,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*p),g+=TA,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*p),g+=TA,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*p),e.closePath();break;case"rectRounded":c=.516*p,l=p-c,a=Math.cos(g+CA)*l,d=Math.cos(g+CA)*(i?i/2-c:l),o=Math.sin(g+CA)*l,h=Math.sin(g+CA)*(i?i/2-c:l),e.arc(n-d,r-o,c,g-kA,g-EA),e.arc(n+h,r-a,c,g-EA,g),e.arc(n+d,r+o,c,g,g+EA),e.arc(n-h,r+a,c,g+EA,g+kA),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*p,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=CA;case"rectRot":d=Math.cos(g)*(i?i/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(i?i/2:p),e.moveTo(n-d,r-o),e.lineTo(n+h,r-a),e.lineTo(n+d,r+o),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":g+=CA;case"cross":d=Math.cos(g)*(i?i/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(i?i/2:p),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":d=Math.cos(g)*(i?i/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(i?i/2:p),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),g+=CA,d=Math.cos(g)*(i?i/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(i?i/2:p),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=i?i/2:Math.cos(g)*p,o=Math.sin(g)*p,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:p),r+Math.sin(g)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function TI(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function PI(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function AI(e){e.restore()}function II(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function DI(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function RI(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function MI(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function LI(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=tA(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),eA(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&MI(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),eA(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),RI(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function OI(e,t){const{x:n,y:r,w:i,h:s,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*kA,kA,!0),e.lineTo(n,r+s-a.bottomLeft),e.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,kA,EA,!0),e.lineTo(n+i-a.bottomRight,r+s),e.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,EA,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-EA,!0),e.lineTo(n+a.topLeft,r)}const FI=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,VI=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function UI(e,t){const n=(""+e).match(FI);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const zI=e=>+e||0;function BI(e,t){const n={},r=nA(t),i=r?Object.keys(t):t,s=nA(e)?r?n=>sA(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of i)n[a]=zI(s(a));return n}function WI(e){return BI(e,{top:"y",right:"x",bottom:"y",left:"x"})}function HI(e){return BI(e,["topLeft","topRight","bottomLeft","bottomRight"])}function qI(e){const t=WI(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function KI(e,t){e=e||{},t=t||kI.font;let n=sA(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=sA(e.style,t.style);r&&!(""+r).match(VI)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:sA(e.family,t.family),lineHeight:UI(sA(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:sA(e.weight,t.weight),string:""};return i.string=function(e){return!e||eA(e.size)||eA(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function GI(e,t,n,r){let i,s,a,o=!0;for(i=0,s=e.length;i<s;++i)if(a=e[i],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&tA(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function YI(e,t){return Object.assign(Object.create(e),t)}function XI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=aD("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>XI([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>eD(n,r,()=>function(e,t,n,r){let i;for(const s of t)if(i=aD(JI(s,e),n),"undefined"!==typeof i)return ZI(e,i)?iD(n,r,e,i):i}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>oD(e).includes(t),ownKeys:e=>oD(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function QI(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:$I(e,r),setContext:t=>QI(e,t,n,r),override:i=>QI(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>eD(e,t,()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let o=r[t];bA(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||r);o.delete(e),ZI(e,l)&&(l=iD(i._scopes,i,e,l));return l}(t,o,e,n));tA(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(nA(t[0])){const n=t,r=i._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=iD(r,i,e,l);t.push(QI(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));ZI(t,o)&&(o=QI(o,i,s&&s[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function $I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:bA(n)?n:()=>n,isIndexable:bA(r)?r:()=>r}}const JI=(e,t)=>e?e+vA(t):t,ZI=(e,t)=>nA(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function eD(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function tD(e,t,n){return bA(e)?e(t,n):e}const nD=(e,t)=>!0===e?t:"string"===typeof e?yA(t,e):void 0;function rD(e,t,n,r,i){for(const s of t){const t=nD(n,s);if(t){e.add(t);const s=tD(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function iD(e,t,n,r){const i=t._rootScopes,s=tD(t._fallback,n,r),a=[...e,...i],o=new Set;o.add(r);let l=sD(o,a,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=sD(o,a,s,l,r),null!==l))&&XI(Array.from(o),[""],i,s,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(tA(i)&&nA(n))return n;return i||{}}(t,n,r)))}function sD(e,t,n,r,i){for(;n;)n=rD(e,t,n,r,i);return n}function aD(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function oD(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function lD(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={r:i.parse(yA(u,s),c)};return a}const cD=Number.EPSILON||1e-14,uD=(e,t)=>t<e.length&&!e[t].skip&&e[t],dD=e=>"x"===e?"y":"x";function hD(e,t,n,r){const i=e.skip?t:e,s=t,a=n.skip?t:n,o=UA(s,i),l=UA(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(a.x-i.x),y:s.y-d*(a.y-i.y)},next:{x:s.x+h*(a.x-i.x),y:s.y+h*(a.y-i.y)}}}function fD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=dD(t),r=e.length,i=Array(r).fill(0),s=Array(r);let a,o,l,c=uD(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=uD(e,a+1),l){if(c){const e=c[t]-l[t];i[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?AA(i[a-1])!==AA(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}!function(e,t,n){const r=e.length;let i,s,a,o,l,c=uD(e,0);for(let u=0;u<r-1;++u)l=c,c=uD(e,u+1),l&&c&&(IA(t[u],0,cD)?n[u]=n[u+1]=0:(i=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(i,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=i*a*t[u],n[u+1]=s*a*t[u])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=dD(n),i=e.length;let s,a,o,l=uD(e,0);for(let c=0;c<i;++c){if(a=o,o=l,l=uD(e,c+1),!o)continue;const i=o[n],u=o[r];a&&(s=(i-a[n])/3,o["cp1".concat(n)]=i-s,o["cp1".concat(r)]=u-s*t[c]),l&&(s=(l[n]-i)/3,o["cp2".concat(n)]=i+s,o["cp2".concat(r)]=u+s*t[c])}}(e,s,t)}function mD(e,t,n){return Math.max(Math.min(e,n),t)}function pD(e,t,n,r,i){let s,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)fD(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=hD(n,o,e[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,i,s,a,o=TI(e[0],t);for(n=0,r=e.length;n<r;++n)a=s,s=o,o=n<r-1&&TI(e[n+1],t),s&&(i=e[n],a&&(i.cp1x=mD(i.cp1x,t.left,t.right),i.cp1y=mD(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=mD(i.cp2x,t.left,t.right),i.cp2y=mD(i.cp2y,t.top,t.bottom)))}(e,n)}function gD(){return"undefined"!==typeof window&&"undefined"!==typeof document}function yD(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function vD(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const xD=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const bD=["top","right","bottom","left"];function wD(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=bD[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function kD(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=xD(n),s="border-box"===i.boxSizing,a=wD(i,"padding"),o=wD(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,s,e.target))a=i,o=s;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:f,height:m}=t;return s&&(f-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/m*n.height/r)}}const ND=e=>Math.round(10*e)/10;function SD(e,t,n,r){const i=xD(e),s=wD(i,"margin"),a=vD(i.maxWidth,e,"clientWidth")||_A,o=vD(i.maxHeight,e,"clientHeight")||_A,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&yD(e);if(s){const e=s.getBoundingClientRect(),a=xD(s),o=wD(a,"border","width"),l=wD(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=vD(a.maxWidth,s,"clientWidth"),i=vD(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||_A,maxHeight:i||_A}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=wD(i,"border","width"),t=wD(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=ND(Math.min(c,a,l.maxWidth)),u=ND(Math.min(u,o,l.maxHeight)),c&&!u&&(u=ND(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=ND(Math.floor(u*r))),{width:c,height:u}}function _D(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s)&&(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const jD=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};gD()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(MF){}return e}();function ED(e,t){const n=function(e,t){return xD(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function CD(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function TD(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function PD(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=CD(e,i,n),o=CD(i,s,n),l=CD(s,t,n),c=CD(a,o,n),u=CD(o,l,n);return CD(c,u,n)}function AD(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function ID(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function DD(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function RD(e){return"angle"===e?{between:WA,compare:zA,normalize:BA}:{between:qA,compare:(e,t)=>e-t,normalize:e=>e}}function MD(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function LD(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=RD(r),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:a,normalize:o}=RD(r),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&a(o(t[d%l][r]),i,s);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),m=[];let p,g,y,v=!1,x=null;const b=()=>v||l(i,y,p)&&0!==o(i,y),w=()=>!v||0===o(s,p)||l(s,y,p);for(let k=u,N=u;k<=d;++k)g=t[k%a],g.skip||(p=c(g[r]),p!==y&&(v=l(p,i,s),null===x&&b()&&(x=0===o(p,i)?k:N),null!==x&&w()&&(m.push(MD({start:x,end:k,loop:h,count:a,style:f})),x=null),N=k,y=p));return null!==x&&m.push(MD({start:x,end:d,loop:h,count:a,style:f})),m}function OD(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=LD(r[i],e.points,t);s.length&&n.push(...s)}return n}function FD(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=VD(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,d=t[0].start,h=d;function f(e,t,r,i){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,d=t%l)}}for(const m of t){d=o?d:m.start;let e,t=n[d%l];for(h=d+1;h<=m.end;h++){const s=n[h%l];e=VD(r.setContext(YI(i,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),UD(e,u)&&f(d,h-1,m.loop,u),t=s,u=e}d<h-1&&f(d,h-1,m.loop,u)}return c}(e,t,n,r):t}function VD(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function UD(e,t){if(!t)return!1;const n=[],r=function(e,t){return lI(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function zD(e,t,n){return e.options.clip?e[n]:t[n]}function BD(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:zD(n,t,"left"),right:zD(n,t,"right"),top:zD(r,t,"top"),bottom:zD(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class WD{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach(r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=JA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,a=i.length-1,o=!1;for(;a>=0;--a)s=i[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var HD=new WD;const qD="transparent",KD={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=cI(e||qD),i=r.valid&&cI(t||qD);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class GD{constructor(e,t,n,r){const i=t[n];r=GI([e.to,r,i,e.from]);const s=GI([e.from,i,r]);this._active=!0,this._fn=e.fn||KD[e.type||typeof s],this._easing=oI[e.easing]||oI.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=GI([e.to,t,r,e.from]),this._from=GI([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,a=this._to;let o;if(this._active=i!==a&&(s||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=i:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(i,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class YD{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!nA(e))return;const t=Object.keys(kI.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!nA(i))return;const s={};for(const e of t)s[e]=i[e];(tA(i.properties)&&i.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,a);continue}u.cancel()}d&&d.duration?(i[l]=u=new GD(d,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(HD.add(this._chart,n),!0):void 0}}function XD(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function QD(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function $D(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===n){if(u=!0,r.all)continue;break}c=e.values[l],rA(c)&&(s||0===t||AA(t)===AA(c))&&(t+=c)}return u||r.all?t:0}function JD(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function ZD(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function eR(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function tR(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,r),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=ZD(i,u,n),h[o]=s,h._top=eR(h,a,!0,r.type),h._bottom=eR(h,a,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=s}}function nR(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function rR(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const iR=e=>"reset"===e||"none"===e,sR=(e,t)=>t?e:Object.assign({},e);class aR{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=JD(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&rR(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=sA(n.xAxisID,nR(e,"x")),s=t.yAxisID=sA(n.yAxisID,nR(e,"y")),a=t.rAxisID=sA(n.rAxisID,nR(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,i,s,a),c=t.vAxisID=r(o,s,i,a);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&QA(this._data,this),e._stacked&&rR(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(nA(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[i]:u,[s]:e[u]};return o}(t,e)}else if(n!==t){if(n){QA(n,this);const e=this._cachedMeta;rR(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),XA.forEach(e=>{const t="_onData"+vA(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const a=n.apply(this,i);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...i)}),a}})}))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=JD(t.vScale,t),t.stack!==n.stack&&(r=!0,rR(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(tR(this,t._parsed),t._stacked=JD(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,a=i.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=tA(r[e])?this.parseArrayData(n,r,e,t):nA(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[a]||d&&l[a]<d[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(i()&&(u=!1),d=l);n._sorted=u}s&&tR(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,a=i.axis,o=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[a]:c||i.parse(l[f],f),[o]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=t[d],l[c]={x:i.parse(yA(h,a),d),y:s.parse(yA(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return $D({keys:QD(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,s=$D(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:QD(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let d,h;function f(){h=r[d];const t=h[a.axis];return!rA(h[e.axis])||c>t||u<t}for(d=0;d<s&&(f()||(this.updateRangeFromParsed(l,e,h,o),!i));++d);if(i)for(d=s-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],rA(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return nA(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(sA(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=XD(e,n),i=XD(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return YI(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return YI(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,a=i[s],o=this.enableOptionSharing&&xA(n);if(a)return sR(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(kI.elements[e]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,r,t),u);return f.$shared&&(f.$shared=o,i[s]=Object.freeze(sR(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),a=i[s];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);o=r.createResolver(s,this.getContext(e,n,t))}const l=new YD(r,o&&o.animations);return o&&o._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||iR(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){iR(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!iR(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(i),a=e;a<s;++a)i[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&rR(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function oR(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=$A(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,i,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(xA(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return o}function lR(e,t,n,r){return tA(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function cR(e,t,n,r){const i=e.iScale,s=e.vScale,a=i.getLabels(),o=i===s,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=t[c],d={},d[i.axis]=o||i.parse(a[c],c),l.push(lR(h,d,s,c));return l}function uR(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function dR(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[hR(u,a,o,l)]=!0,i=c)),s[hR(i,a,o,l)]=!0,e.borderSkipped=s}function hR(e,t,n,r){var i,s,a;return r?(a=n,e=fR(e=(i=e)===(s=t)?a:i===a?s:i,n,t)):e=fR(e,t,n),e}function fR(e,t,n){return"start"===e?t:"end"===e?n:e}function mR(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}o(aR,"defaults",{}),o(aR,"datasetElementType",null),o(aR,"dataElementType",null);class pR extends aR{parsePrimitiveData(e,t,n,r){return cR(e,t,n,r)}parseArrayData(e,t,n,r){return cR(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===i.axis?a:o,c="x"===s.axis?a:o,u=[];let d,h,f,m;for(d=n,h=n+r;d<h;++d)m=t[d],f={},f[i.axis]=i.parse(yA(m,l),d),u.push(lR(yA(m,c),f,s,d));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,a=uR(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=i||eA(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),m=(t._stacks||{})[a.axis],p={horizontal:l,base:n.base,enableBorderRadius:!m||uR(t._custom)||s===m._top||s===m._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(p.options=u||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=p.options||e[h].options;dR(p,g,m,s),mR(p,g,c.ratio),this.updateElement(e[h],h,p,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),i=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(eA(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[sA("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=e.barThickness;return{min:a||oR(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,a=i||0,o=this.getParsed(e),l=o._custom,c=uR(l);let u,d,h=o[t.axis],f=0,m=n?this.applyStack(t,o,n):h;m!==h&&(f=m-h,m=h),c&&(h=l.barStart,m=l.barEnd-l.barStart,0!==h&&AA(h)!==AA(l.barEnd)&&(f=0),f+=h);const p=eA(i)||c?f:i;let g=t.getPixelForValue(p);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+m):g,d=u-g,Math.abs(d)<s){d=function(e,t,n){return 0!==e?AA(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,a)*s,h===a&&(g-=d/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);g=Math.max(Math.min(g,f),l),u=g+d,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=AA(d)*t.getLineWidthForValue(a)/2;g+=e,d-=e}return{size:d,base:g,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=sA(r.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let a=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const i=n.barThickness;let s,a;return eA(i)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[e]-s/2}}(e,t,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(sA(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+d;a=c.start+c.chunk*h+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}o(pR,"id","bar"),o(pR,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),o(pR,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class gR extends aR{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=sA(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=sA(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,u=a.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!i&&this.getParsed(d),h={},f=h[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),m=h[u]=i?a.getBasePixel():a.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(m),l&&(h.options=o||this.resolveDataElementOptions(d,t.active?"active":r),i&&(h.options.radius=0)),this.updateElement(t,d,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=sA(n&&n._custom,i),r}}o(gR,"id","bubble"),o(gR,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),o(gR,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class yR extends aR{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,a=e=>+n[e];if(nA(n[e])){const{key:e="value"}=this._parsing;a=t=>+yA(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=a(i)}}_getRotation(){return LA(this.options.rotation-90)}_getCircumference(){return LA(this.options.circumference)}_getRotationExtents(){let e=NA,t=-NA;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:g}=function(e,t,n){let r=1,i=1,s=0,a=0;if(t<NA){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),f=(e,t,r)=>WA(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),m=(e,t,r)=>WA(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),p=f(0,c,d),g=f(EA,u,h),y=m(kA,c,d),v=m(kA+EA,u,h);r=(p-y)/2,i=(g-v)/2,s=-(p+y)/2,a=-(g+v)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}(h,d,o),y=(n.width-s)/f,v=(n.height-s)/m,x=Math.max(Math.min(y,v)/2,0),b=aA(this.options.radius,x),w=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*b,this.offsetY=g*b,r.total=this.calculateTotal(),this.outerRadius=b-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/NA)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=i&&o.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(t,r);let p,g=this._getRotation();for(p=0;p<t;++p)g+=this._circumference(p,i);for(p=t;p<t+n;++p){const t=this._circumference(p,i),n=e[p],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};m&&(s.options=f||this.resolveDataElementOptions(p,n.active?"active":r)),g+=t,this.updateElement(n,p,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?NA*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=mI(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,a,o;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,a=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(sA(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}o(yR,"id","doughnut"),o(yR,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),o(yR,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),o(yR,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class vR extends aR{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=nI(t,r,s);this._drawStart=a,this._drawCount=o,rI(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),d=s.axis,h=a.axis,{spanGaps:f,segment:m}=this.options,p=RA(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,y=t+n,v=e.length;let x=t>0&&this.getParsed(t-1);for(let b=0;b<v;++b){const n=e[b],f=g?n:{};if(b<t||b>=y){f.skip=!0;continue}const v=this.getParsed(b),w=eA(v[h]),k=f[d]=s.getPixelForValue(v[d],b),N=f[h]=i||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,v,o):v[h],b);f.skip=isNaN(k)||isNaN(N)||w,f.stop=b>0&&Math.abs(v[d]-x[d])>p,m&&(f.parsed=v,f.raw=l.data[b]),u&&(f.options=c||this.resolveDataElementOptions(b,n.active?"active":r)),g||this.updateElement(n,b,f,r),x=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}o(vR,"id","line"),o(vR,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),o(vR,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class xR extends aR{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=mI(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return lD.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*kA;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,r,f);for(d=t;d<t+n;d++){const t=e[d];let n=h,m=h+this._computeAngle(d,r,f),p=s.getDataVisibility(d)?o.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=m,i&&(a.animateScale&&(p=0),a.animateRotate&&(n=m=u));const g={x:l,y:c,innerRadius:0,outerRadius:p,startAngle:n,endAngle:m,options:this.resolveDataElementOptions(d,t.active?"active":r)};this.updateElement(t,d,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?LA(this.resolveDataElementOptions(e,t).angle||n):0}}o(xR,"id","polarArea"),o(xR,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),o(xR,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class bR extends yR{}o(bR,"id","pie"),o(bR,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class wR extends aR{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return lD.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=i.getPointPositionForValue(a,this.getParsed(a).r),l=s?i.xCenter:o.x,c=s?i.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,r)}}}o(wR,"id","radar"),o(wR,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),o(wR,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class kR extends aR{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=nI(t,n,r);if(this._drawStart=i,this._drawCount=s,rI(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),h=s.axis,f=a.axis,{spanGaps:m,segment:p}=this.options,g=RA(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r;let v=t>0&&this.getParsed(t-1);for(let x=t;x<t+n;++x){const t=e[x],n=this.getParsed(x),c=y?t:{},m=eA(n[f]),b=c[h]=s.getPixelForValue(n[h],x),w=c[f]=i||m?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],x);c.skip=isNaN(b)||isNaN(w)||m,c.stop=x>0&&Math.abs(n[h]-v[h])>g,p&&(c.parsed=n,c.raw=l.data[x]),d&&(c.options=u||this.resolveDataElementOptions(x,t.active?"active":r)),y||this.updateElement(t,x,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}o(kR,"id","scatter"),o(kR,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),o(kR,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function NR(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class SR{static override(e){Object.assign(SR.prototype,e)}constructor(e){o(this,"options",void 0),this.options=e||{}}init(){}formats(){return NR()}parse(){return NR()}format(){return NR()}add(){return NR()}diff(){return NR()}startOf(){return NR()}endOf(){return NR()}}var _R=SR;function jR(e,t,n,r){const{controller:i,data:s,_sorted:a}=e,o=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?YA:GA;if(!r){const r=a(s,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,s=n.slice(0,r.lo+1).reverse().findIndex(e=>!eA(e[t.axis]));r.lo-=Math.max(0,s);const a=n.slice(r.hi).findIndex(e=>!eA(e[t.axis]));r.hi+=Math.max(0,a)}return r}if(i._sharedOptions){const e=s[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(s,t,n-r),i=a(s,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function ER(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=jR(s[o],t,a,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function CR(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return ER(e,n,t,function(n,a,o){(i||TI(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:a,index:o})},!0),s}function TR(e,t,n,r,i,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return ER(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(h))&&!d)return;const f=o(t,h);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function PR(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?TR(e,t,n,r,i,s):function(e,t,n,r){let i=[];return ER(e,n,t,function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=VA(e,{x:t.x,y:t.y});WA(l,a,o)&&i.push({element:e,datasetIndex:n,index:s})}),i}(e,t,n,i):[]}function AR(e,t,n,r,i){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return ER(e,n,t,(e,r,l)=>{e[a]&&e[a](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,i))}),r&&!o?[]:s}var IR={evaluateInteractionItems:ER,modes:{index(e,t,n,r){const i=kD(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?CR(e,i,s,r,a):PR(e,i,s,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const i=kD(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?CR(e,i,s,r,a):PR(e,i,s,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>CR(e,kD(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=kD(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return PR(e,i,s,n.intersect,r,a)},x:(e,t,n,r)=>AR(e,kD(t,e),"x",n.intersect,r),y:(e,t,n,r)=>AR(e,kD(t,e),"y",n.intersect,r)}};const DR=["left","top","right","bottom"];function RR(e,t){return e.filter(e=>e.pos===t)}function MR(e,t){return e.filter(e=>-1===DR.indexOf(e.pos)&&e.box.axis===t)}function LR(e,t){return e.sort((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function OR(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!DR.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:a&&t.availableHeight)}return n}function FR(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function VR(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function UR(e,t,n,r){const{pos:i,box:s}=n,a=e.maxPadding;if(!nA(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&VR(a,s.getPadding());const o=Math.max(0,t.outerWidth-FR(a,e,"left","right")),l=Math.max(0,t.outerHeight-FR(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function zR(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function BR(e,t,n,r){const i=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,zR(o.horizontal,t));const{same:a,other:d}=UR(t,n,o,r);c|=a&&i.length,u=u||d,l.fullSize||i.push(o)}return c&&BR(i,t,n,r)||u}function WR(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function HR(e,t,n,r){const i=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,s=l.size||e.height;xA(l.start)&&(a=l.start),e.fullSize?WR(e,i.left,a,n.outerWidth-i.right-i.left,s):WR(e,t.left+l.placed,a,r,s),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;xA(l.start)&&(s=l.start),e.fullSize?WR(e,s,i.top,a,n.outerHeight-i.bottom-i.top):WR(e,s,t.top+l.placed,a,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=a}var qR={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=qI(e.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(n-i.height,0),o=function(e){const t=function(e){const t=[];let n,r,i,s,a,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=LR(t.filter(e=>e.box.fullSize),!0),r=LR(RR(t,"left"),!0),i=LR(RR(t,"right")),s=LR(RR(t,"top"),!0),a=LR(RR(t,"bottom")),o=MR(t,"x"),l=MR(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:RR(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;lA(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},i);VR(h,qI(r));const f=Object.assign({maxPadding:h,w:s,h:a,x:i.left,y:i.top},i),m=OR(l.concat(c),d);BR(o.fullSize,f,d,m),BR(l,f,d,m),BR(c,f,d,m)&&BR(l,f,d,m),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),HR(o.leftAndTop,f,d,m),f.x+=f.w,f.y+=f.h,HR(o.rightAndBottom,f,d,m),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},lA(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class KR{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class GR extends KR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const YR="$chartjs",XR={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},QR=e=>null===e||""===e;const $R=!!jD&&{passive:!0};function JR(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,$R)}function ZR(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function eM(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||ZR(n.addedNodes,r),t=t&&!ZR(n.removedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function tM(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||ZR(n.removedNodes,r),t=t&&!ZR(n.addedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const nM=new Map;let rM=0;function iM(){const e=window.devicePixelRatio;e!==rM&&(rM=e,nM.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function sM(e,t,n){const r=e.canvas,i=r&&yD(r);if(!i)return;const s=ZA((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)});return a.observe(i),function(e,t){nM.size||window.addEventListener("resize",iM),nM.set(e,t)}(e,s),a}function aM(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){nM.delete(e),nM.size||window.removeEventListener("resize",iM)}(e)}function oM(e,t,n){const r=e.canvas,i=ZA(t=>{null!==e.ctx&&n(function(e,t){const n=XR[e.type]||e.type,{x:r,y:i}=kD(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,$R)}(r,t,i),i}class lM extends KR{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[YR]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",QR(i)){const t=ED(e,"width");void 0!==t&&(e.width=t)}if(QR(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=ED(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[YR])return!1;const n=t[YR].initial;["height","width"].forEach(e=>{const r=n[e];eA(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[YR],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:eM,detach:tM,resize:sM}[t]||oM;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:aM,detach:aM,resize:aM}[t]||JR)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return SD(e,t,n,r)}isAttached(e){const t=e&&yD(e);return!(!t||!t.isConnected)}}class cM{constructor(){o(this,"x",void 0),o(this,"y",void 0),o(this,"active",!1),o(this,"options",void 0),o(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return RA(this.x)&&RA(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function uM(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>i)return function(e,t,n,r){let i,s=0,a=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===a&&(t.push(e[i]),s++,a=n[s*r])}(t,c,s,a/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(dM(t,c,u,eA(r)?0:o-r,o),e=0,n=a-1;e<n;e++)dM(t,c,u,s[e],s[e+1]);return dM(t,c,u,l,eA(r)?t.length:l+r),c}return dM(t,c,u),c}function dM(e,t,n,r,i){const s=sA(r,0),a=Math.min(sA(i,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),i&&(o=i-r,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}o(cM,"defaults",{}),o(cM,"defaultRoutes",void 0);const hM=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,fM=(e,t)=>Math.min(t||e,e);function mM(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function pM(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-o||c>a+o)))return c}function gM(e){return e.drawTicks?e.tickLength:0}function yM(e,t){if(!e.display)return 0;const n=KI(e.font,t),r=qI(e.padding);return(tA(e.text)?e.text.length:1)*n.lineHeight+r.height}function vM(e,t,n){let r=eI(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class xM extends cM{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=iA(e,Number.POSITIVE_INFINITY),t=iA(t,Number.NEGATIVE_INFINITY),n=iA(n,Number.POSITIVE_INFINITY),r=iA(r,Number.NEGATIVE_INFINITY),{min:iA(e,n),max:iA(t,r),minDefined:rA(e),maxDefined:rA(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:iA(n,iA(r,n)),max:iA(r,iA(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oA(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=aA(t,(i-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(s)),max:a(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?mM(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=uM(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oA(this.options.afterUpdate,[this])}beforeSetDimensions(){oA(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oA(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),oA(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oA(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=oA(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){oA(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oA(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=fM(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,a,o,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=HA(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),u+6>s&&(s=h/(n-(e.offset?.5:1)),a=this.maxHeight-gM(e.grid)-t.padding-yM(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=OA(Math.min(Math.asin(HA((c.highest.height+6)/s,-1,1)),Math.asin(HA(a/o,-1,1))-Math.asin(HA(d/o,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){oA(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oA(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=yM(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=gM(i)+s):(e.height=this.maxHeight,e.width=gM(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),o=2*n.padding,l=LA(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*i.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=r*e.width,d=n*t.height):(u=n*e.height,d=r*t.width):"start"===i?d=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oA(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)eA(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=mM(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],a=[],o=Math.floor(t/fM(t,n));let l,c,u,d,h,f,m,p,g,y,v,x=0,b=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,m=i[f]=i[f]||{data:{},gc:[]},p=h.lineHeight,g=y=0,eA(d)||tA(d)){if(tA(d))for(c=0,u=d.length;c<u;++c)v=d[c],eA(v)||tA(v)||(g=NI(r,m.data,m.gc,g,v),y+=p)}else g=NI(r,m.data,m.gc,g,d),y=p;s.push(g),a.push(y),x=Math.max(g,x),b=Math.max(y,b)}!function(e,t){lA(e,e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}})}(i,t);const w=s.indexOf(x),k=a.indexOf(b),N=e=>({width:s[e]||0,height:a[e]||0});return{first:N(0),last:N(t-1),widest:N(w),highest:N(k),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return HA(this._alignToPixels?_I(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return YI(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return YI(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=LA(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,a=i?i.widest.width+s:0,o=i?i.highest.height+s:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:a}=r,o=i.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=gM(i),d=[],h=a.setContext(this.getContext()),f=h.display?h.width:0,m=f/2,p=function(e){return _I(n,e,f)};let g,y,v,x,b,w,k,N,S,_,j,E;if("top"===s)g=p(this.bottom),w=this.bottom-u,N=g-m,_=p(e.top)+m,E=e.bottom;else if("bottom"===s)g=p(this.top),_=e.top,E=p(e.bottom)-m,w=g+m,N=this.top+u;else if("left"===s)g=p(this.right),b=this.right-u,k=g-m,S=p(e.left)+m,j=e.right;else if("right"===s)g=p(this.left),S=e.left,j=p(e.right)-m,b=g+m,k=this.left+u;else if("x"===t){if("center"===s)g=p((e.top+e.bottom)/2+.5);else if(nA(s)){const e=Object.keys(s)[0],t=s[e];g=p(this.chart.scales[e].getPixelForValue(t))}_=e.top,E=e.bottom,w=g+m,N=w+u}else if("y"===t){if("center"===s)g=p((e.left+e.right)/2);else if(nA(s)){const e=Object.keys(s)[0],t=s[e];g=p(this.chart.scales[e].getPixelForValue(t))}b=g-m,k=b-u,S=e.left,j=e.right}const C=sA(r.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=T){const e=this.getContext(y),t=i.setContext(e),r=a.setContext(e),s=t.lineWidth,c=t.color,u=r.dash||[],h=r.dashOffset,f=t.tickWidth,m=t.tickColor,p=t.tickBorderDash||[],g=t.tickBorderDashOffset;v=pM(this,y,o),void 0!==v&&(x=_I(n,v,s),l?b=k=S=j=x:w=N=_=E=x,d.push({tx1:b,ty1:w,tx2:k,ty2:N,x1:S,y1:_,x2:j,y2:E,width:s,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:m,tickBorderDash:p,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=i,d=gM(n.grid),h=d+c,f=u?-c:h,m=-LA(this.labelRotation),p=[];let g,y,v,x,b,w,k,N,S,_,j,E,C="middle";if("top"===r)w=this.bottom-f,k=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,k=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);k=e.textAlign,b=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);k=e.textAlign,b=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(nA(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}k=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)b=(e.left+e.right)/2-h;else if(nA(r)){const e=Object.keys(r)[0],t=r[e];b=this.chart.scales[e].getPixelForValue(t)}k=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?C="top":"end"===o&&(C="bottom"));const T=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){v=a[g],x=v.label;const e=i.setContext(this.getContext(g));N=this.getPixelForTick(g)+i.labelOffset,S=this._resolveTickFontOptions(g),_=S.lineHeight,j=tA(x)?x.length:1;const t=j/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=k;if(s?(b=N,"inner"===k&&(h=g===y-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),E="top"===r?"near"===l||0!==m?-j*_+_/2:"center"===l?-T.highest.height/2-t*_+_:-T.highest.height+_/2:"near"===l||0!==m?_/2:"center"===l?T.highest.height/2-t*_:T.highest.height-j*_,u&&(E*=-1),0===m||e.showLabelBackdrop||(b+=_/2*Math.sin(m))):(w=N,E=(1-j)*_/2),e.showLabelBackdrop){const t=qI(e.backdropPadding),n=T.heights[g],r=T.widths[g];let i=E-t.top,s=0-t.left;switch(C){case"middle":i-=n/2;break;case"bottom":i-=n}switch(k){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":g===y-1?s-=r:g>0&&(s-=r/2)}d={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}p.push({label:x,font:S,textOffset:E,options:{rotation:m,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:C,translation:[b,w],backdrop:d}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-LA(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=_I(e,this.left,s)-s/2,c=_I(e,this.right,a)+a/2,u=d=o):(u=_I(e,this.top,s)-s/2,d=_I(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&PI(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;LI(t,i.label,0,i.textOffset,n,e)}n&&AI(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=KI(n.font),s=qI(n.padding),a=n.align;let o=i.lineHeight/2;"bottom"===t||"center"===t||nA(t)?(o+=s.bottom,tA(n.text)&&(o+=i.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,r){const{top:i,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,m=0;const p=a-i,g=o-s;if(e.isHorizontal()){if(h=tI(r,s,o),nA(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+p-t}else f="center"===n?(c.bottom+c.top)/2+p-t:hM(e,n,t);d=o-s}else{if(nA(n)){const e=Object.keys(n)[0],r=n[e];h=u[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:hM(e,n,t);f=tI(r,a,i),m="left"===n?-EA:EA}return{titleX:h,titleY:f,maxWidth:d,rotation:m}}(this,o,t,a);LI(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:vM(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=sA(e.grid&&e.grid.z,-1),r=sA(e.border&&e.border.z,0);return this._isVisible()&&this.draw===xM.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return KI(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class bM{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=fA(Object.create(null),[n?kI.get(n):{},kI.get(t),e.defaults]);kI.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");kI.route(s,i,l,o)})}(t,e.defaultRoutes);e.descriptors&&kI.describe(t,e.descriptors)}(e,s,n),this.override&&kI.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in kI[r]&&(delete kI[r][n],this.override&&delete yI[n])}}class wM{constructor(){this.controllers=new bM(aR,"datasets",!0),this.elements=new bM(cM,"elements"),this.plugins=new bM(Object,"plugins"),this.scales=new bM(xM,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):lA(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=vA(e);oA(n["before"+r],[],n),t[e](n),oA(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var kM=new wM;class NM{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===oA(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){eA(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=sA(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(kM.plugins.items);for(let s=0;s<r.length;s++)n.push(kM.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const a=[],o=e.getContext();for(const l of i){const t=l.id,i=SM(n[t],r);null!==i&&a.push({plugin:l,options:_M(e.config,{plugin:l,local:s[t]},i,o)})}return a}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function SM(e,t){return t||!1!==e?!0===e?{}:e:null}function _M(e,t,n,r){let{plugin:i,local:s}=t;const a=e.pluginScopeKeys(i),o=e.getOptionScopes(n,a);return s&&i.defaults&&o.push(i.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jM(e,t){const n=kI.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function EM(e){if("x"===e||"y"===e||"r"===e)return e}function CM(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function TM(e){if(EM(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||CM(i.position)||e.length>1&&EM(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function PM(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function AM(e,t){const n=yI[e.type]||{scales:{}},r=t.scales||{},i=jM(e.type,t),s=Object.create(null);return Object.keys(r).forEach(t=>{const a=r[t];if(!nA(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=TM(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return PM(e,"x",n[0])||PM(e,"y",n[0])}return{}}(t,e),kI.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,i),c=n.scales||{};s[t]=mA(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const i=n.type||e.type,a=n.indexAxis||jM(i,t),o=(yI[i]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),mA(s[i],[{axis:t},r[i],o[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];mA(t,[kI.scales[t.type],kI.scale])}),s}function IM(e){const t=e.options||(e.options={});t.plugins=sA(t.plugins,{}),t.scales=AM(e,t)}function DM(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const RM=new Map,MM=new Set;function LM(e,t){let n=RM.get(e);return n||(n=t(),RM.set(e,n),MM.add(n)),n}const OM=(e,t,n)=>{const r=yA(t,n);void 0!==r&&e.add(r)};class FM{constructor(e){this._config=function(e){return(e=e||{}).data=DM(e.data),IM(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=DM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),IM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return LM(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return LM("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return LM("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return LM("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>OM(o,e,t))),t.forEach(e=>OM(o,r,e)),t.forEach(e=>OM(o,yI[i]||{},e)),t.forEach(e=>OM(o,kI,e)),t.forEach(e=>OM(o,vI,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),MM.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,yI[t]||{},kI.datasets[t]||{},{type:t},kI,vI]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:a}=VM(this._resolverCache,e,r);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=$I(e);for(const i of t){const t=n(i),s=r(i),a=(s||t)&&e[i];if(t&&(bA(a)||UM(a))||s&&tA(a))return!0}return!1}(s,t)){i.$shared=!1;o=QI(s,n=bA(n)?n():n,this.createResolver(e,n,a))}for(const l of t)i[l]=o[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=VM(this._resolverCache,e,n);return nA(t)?QI(i,t,void 0,r):i}}function VM(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:XI(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(i,s)}return s}const UM=e=>nA(e)&&Object.getOwnPropertyNames(e).some(t=>bA(e[t]));const zM=["top","bottom","left","right","chartArea"];function BM(e,t){return"top"===e||"bottom"===e||-1===zM.indexOf(e)&&"x"===t}function WM(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function HM(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),oA(n&&n.onComplete,[e],t)}function qM(e){const t=e.chart,n=t.options.animation;oA(n&&n.onProgress,[e],t)}function KM(e){return gD()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const GM={},YM=e=>{const t=KM(e);return Object.values(GM).filter(e=>e.canvas===t).pop()};function XM(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}class QM{static register(){kM.add(...arguments),$M()}static unregister(){kM.remove(...arguments),$M()}constructor(e,t){const n=this.config=new FM(t),r=KM(e),i=YM(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!gD()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?GR:lM}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=ZP(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new NM,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],GM[this.id]=this,a&&o?(HD.listen(this,"complete",HM),HD.listen(this,"progress",qM),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return eA(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return kM}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_D(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return jI(this.canvas,this.ctx),this}stop(){return HD.stop(this),this}resize(e,t){HD.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,_D(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),oA(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){lA(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let i=[];t&&(i=i.concat(Object.keys(t).map(e=>{const n=t[e],r=TM(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}}))),lA(i,t=>{const i=t.options,s=i.id,a=TM(s,i),o=sA(i.type,t.dtype);void 0!==i.position&&BM(i.position,a)===BM(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(kM.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)}),lA(r,(e,t)=>{e||delete n[t]}),lA(n,e=>{qR.configure(this,e,e.options),qR.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(WM("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||jM(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=kM.getController(s),{datasetElementType:r,dataElementType:a}=kI.datasets[s];Object.assign(t,{dataElementType:kM.getElement(a),datasetElementType:r&&kM.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){lA(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||lA(i,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(WM("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){lA(this.scales,e=>{qR.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);wA(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){XM(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let i=1;i<t;i++)if(!wA(r,n(i)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;qR.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],lA(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,bA(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(HD.has(this)?this.attached&&!HD.running(this)&&HD.start(this):(this.draw(),HM({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=BD(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&PI(t,r),e.controller.draw(),r&&AI(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return TI(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=IR.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=YI(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);xA(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),HD.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),jI(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete GM[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};lA(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){lA(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},lA(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,a,o;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!cA(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=i(t,e),a=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,a=this._getActiveElements(e,r,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,oA(i.onHover,[e,a,this],this),o&&oA(i.onClick,[e,a,this],this));const c=!cA(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function $M(){return lA(QM.instances,e=>e._plugins.invalidate())}function JM(e,t,n,r){const i=BI(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,r*t/2),o=e=>{const t=(n-Math.min(s,e))*r/2;return HA(e,0,Math.min(s,t))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:HA(i.innerStart,0,a),innerEnd:HA(i.innerEnd,0,a)}}function ZM(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function eL(e,t,n,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const m=i-l;if(r){const e=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(m-(0!==e?m*e/(e+r):m))/2}const p=(m-Math.max(.001,m*d-n/kA)/d)/2,g=l+p+f,y=i-p-f,{outerStart:v,outerEnd:x,innerStart:b,innerEnd:w}=JM(t,h,d,y-g),k=d-v,N=d-x,S=g+v/k,_=y-x/N,j=h+b,E=h+w,C=g+b/j,T=y-w/E;if(e.beginPath(),s){const t=(S+_)/2;if(e.arc(a,o,d,S,t),e.arc(a,o,d,t,_),x>0){const t=ZM(N,_,a,o);e.arc(t.x,t.y,x,_,y+EA)}const n=ZM(E,y,a,o);if(e.lineTo(n.x,n.y),w>0){const t=ZM(E,T,a,o);e.arc(t.x,t.y,w,y+EA,T+Math.PI)}const r=(y-w/h+(g+b/h))/2;if(e.arc(a,o,h,y-w/h,r,!0),e.arc(a,o,h,r,g+b/h,!0),b>0){const t=ZM(j,C,a,o);e.arc(t.x,t.y,b,C+Math.PI,g-EA)}const i=ZM(k,g,a,o);if(e.lineTo(i.x,i.y),v>0){const t=ZM(k,S,a,o);e.arc(t.x,t.y,v,g-EA,S)}}else{e.moveTo(a,o);const t=Math.cos(S)*d+a,n=Math.sin(S)*d+o;e.lineTo(t,n);const r=Math.cos(_)*d+a,i=Math.sin(_)*d+o;e.lineTo(r,i)}e.closePath()}function tL(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,m="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,m?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){eL(e,t,n,r,p,i);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(p=a+(o%NA||NA))}m&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=i/o;e.beginPath(),e.arc(s,a,o,r-c,n+c),l>i?(c=i/l,e.arc(s,a,l,n+c,r-c,!0)):e.arc(s,a,i,n+EA,r-EA),e.closePath(),e.clip()}(e,t,p),l.selfJoin&&p-a>=kA&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/a,BA(r-n));if(e.beginPath(),e.arc(i,s,a-c/2,r+d/2,n-d/2),o>0){const t=Math.min(c/o,BA(r-n));e.arc(i,s,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,a*BA(r-n));if("round"===u)e.arc(i,s,t,n-kA/2,r+kA/2,!0);else if("bevel"===u){const a=2*t*t,o=-a*Math.cos(n+kA/2)+i,l=-a*Math.sin(n+kA/2)+s,c=a*Math.cos(r+kA/2)+i,u=a*Math.sin(r+kA/2)+s;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,p),s||(eL(e,t,n,r,p,i),e.stroke())}o(QM,"defaults",kI),o(QM,"instances",GM),o(QM,"overrides",yI),o(QM,"registry",kM),o(QM,"version","4.5.0"),o(QM,"getChart",YM);class nL extends cM{constructor(e){super(),o(this,"circumference",void 0),o(this,"endAngle",void 0),o(this,"fullCircles",void 0),o(this,"innerRadius",void 0),o(this,"outerRadius",void 0),o(this,"pixelMargin",void 0),o(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=VA(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=sA(u,o-a),f=WA(i,a,o)&&a!==o,m=h>=NA||f,p=qA(s,l+d,c+d);return m&&p}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+i)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>NA?Math.floor(n/NA):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(kA,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){eL(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%NA||NA))}eL(e,t,n,r,l,i),e.fill()}(e,this,o,i,s),tL(e,this,o,i,s),e.restore()}}function rL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=sA(n.borderCapStyle,t.borderCapStyle),e.setLineDash(sA(n.borderDash,t.borderDash)),e.lineDashOffset=sA(n.borderDashOffset,t.borderDashOffset),e.lineJoin=sA(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=sA(n.borderWidth,t.borderWidth),e.strokeStyle=sA(n.borderColor,t.borderColor)}function iL(e,t,n){e.lineTo(n.x,n.y)}function sL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:a,end:o}=t,l=Math.max(i,a),c=Math.min(s,o),u=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function aL(e,t,n,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:c}=sL(i,n,r),u=function(e){return e.stepped?II:e.tension||"monotone"===e.cubicInterpolationMode?DI:iL}(s);let d,h,f,{move:m=!0,reverse:p}=r||{};for(d=0;d<=c;++d)h=i[(o+(p?c-d:d))%a],h.skip||(m?(e.moveTo(h.x,h.y),m=!1):u(e,f,h,p,s.stepped),f=h);return l&&(h=i[(o+(p?c:0))%a],u(e,f,h,p,s.stepped)),!!l}function oL(e,t,n,r){const i=t.points,{count:s,start:a,ilen:o}=sL(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,m,p,g=0,y=0;const v=e=>(a+(c?o-e:e))%s,x=()=>{f!==m&&(e.lineTo(g,m),e.lineTo(g,f),e.lineTo(g,p))};for(l&&(d=i[v(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=i[v(u)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===h?(n<f?f=n:n>m&&(m=n),g=(y*g+t)/++y):(x(),e.lineTo(t,n),h=r,y=0,f=m=n),p=n}x()}function lL(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?oL:aL}o(nL,"id","arc"),o(nL,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),o(nL,"defaultRoutes",{backgroundColor:"backgroundColor"}),o(nL,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const cL="function"===typeof Path2D;function uL(e,t,n,r){cL&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),rL(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,a=lL(t);for(const o of i)rL(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class dL extends cM{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;pD(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return FD(e,!0===r?[{start:a,end:o,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(a-1)%i,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%i,end:o%i,loop:r}),s}(n,a,o<a?o+i:o,!!e._fullLoop&&0===a&&o===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=OD(this,{property:t,start:r,end:r});if(!s.length)return;const a=[],o=function(e){return e.stepped?TD:e.tension||"monotone"===e.cubicInterpolationMode?PD:CD}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],d=i[c],h=i[u];if(d===h){a.push(d);continue}const f=o(d,h,Math.abs((r-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return lL(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=lL(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)s&=i(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),uL(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function hL(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}o(dL,"id","line"),o(dL,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),o(dL,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),o(dL,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class fL extends cM{constructor(e){super(),o(this,"parsed",void 0),o(this,"skip",void 0),o(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return hL(this,e,"x",t)}inYRange(e,t){return hL(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!TI(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,EI(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function mL(e,t){const{x:n,y:r,base:i,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,d;return e.horizontal?(d=a/2,o=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,o=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:o,top:c,right:l,bottom:u}}function pL(e,t,n,r){return e?0:HA(t,n,r)}function gL(e){const t=mL(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=WI(r);return{t:pL(i.top,s.top,0,n),r:pL(i.right,s.right,0,t),b:pL(i.bottom,s.bottom,0,n),l:pL(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=HI(i),a=Math.min(t,n),o=e.borderSkipped,l=r||nA(i);return{topLeft:pL(!l||o.top||o.left,s.topLeft,0,a),topRight:pL(!l||o.top||o.right,s.topRight,0,a),bottomLeft:pL(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:pL(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function yL(e,t,n,r){const i=null===t,s=null===n,a=e&&!(i&&s)&&mL(e,r);return a&&(i||qA(t,a.left,a.right))&&(s||qA(n,a.top,a.bottom))}function vL(e,t){e.rect(t.x,t.y,t.w,t.h)}function xL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+a,radius:e.radius}}o(fL,"id","point"),o(fL,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),o(fL,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class bL extends cM{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=gL(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?OI:vL;var o;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),a(e,xL(s,t,i)),e.clip(),a(e,xL(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,xL(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return yL(this,e,t,n)}inXRange(e,t){return yL(this,e,null,t)}inYRange(e,t){return yL(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}o(bL,"id","bar"),o(bL,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),o(bL,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function wL(e,t,n,r){if(r)return;let i=t[e],s=n[e];return"angle"===e&&(i=BA(i),s=BA(s)),{property:e,start:i,end:s}}function kL(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function NL(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function SL(e,t){let n=[],r=!1;return tA(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,s=[];return t.segments.forEach(e=>{let{start:t,end:a}=e;a=kL(t,a,i);const o=i[t],l=i[a];null!==r?(s.push({x:o.x,y:r}),s.push({x:l.x,y:r})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:l.y}))}),s}(e,t),n.length?new dL({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function _L(e){return e&&!1!==e.fill}function jL(e,t,n){let r=e[t].fill;const i=[t];let s;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!rA(r))return r;if(s=e[r],!s)return!1;if(s.visible)return r;i.push(r),r=s.fill}return!1}function EL(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=sA(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(nA(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return rA(i)&&Math.floor(i)===i?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function CL(e,t,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:a,last:o,point:l}=TL(s,t,"x");if(!(!l||a&&o))if(a)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function TL(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],s=e.segments,a=e.points;let o=!1,l=!1;for(let c=0;c<s.length;c++){const e=s[c],t=a[e.start][n],r=a[e.end][n];if(qA(i,t,r)){o=i===t,l=i===r;break}}return{first:o,last:l,point:r}}class PL{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:i,radius:s}=this;return t=t||{start:0,end:NA},e.arc(r,i,s,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,i=e.angle;return{x:t+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function AL(e){const{chart:t,fill:n,line:r}=e;if(rA(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,i=[],s=r.segments,a=r.points,o=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const e=r[i];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(SL({x:null,y:t.bottom},r));for(let l=0;l<s.length;l++){const e=s[l];for(let t=e.start;t<=e.end;t++)CL(i,a[t],o)}return new dL({points:i,options:{}})}(e);if("shape"===n)return!0;const i=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,s=r.reverse?t.max:t.min,a=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:nA(e)?e.value:t.getBaseValue(),r}(n,t,s),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,s);return new PL({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<i;++l)o.push(t.getPointPositionForValue(l,a));return o}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:nA(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(rA(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return i instanceof PL?i:SL(i,r)}function IL(e,t,n){const r=AL(t),{chart:i,index:s,line:a,scale:o,axis:l}=t,c=a.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},m=i.getDatasetMeta(s),p=BD(i,m);r&&a.points.length&&(PI(e,n),function(e,t){const{line:n,target:r,above:i,below:s,area:a,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let u=s;s!==i&&("x"===c?(DL(e,r,a.top),ML(e,{line:n,target:r,color:i,scale:o,property:c,clip:l}),e.restore(),e.save(),DL(e,r,a.bottom)):"y"===c&&(RL(e,r,a.left),ML(e,{line:n,target:r,color:s,scale:o,property:c,clip:l}),e.restore(),e.save(),RL(e,r,a.right),u=i));ML(e,{line:n,target:r,color:u,scale:o,property:c,clip:l}),e.restore()}(e,{line:a,target:r,above:h,below:f,area:n,scale:o,axis:l,clip:p}),AI(e))}function DL(e,t,n){const{segments:r,points:i}=t;let s=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=i[r],u=i[kL(r,l,i)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function RL(e,t,n){const{segments:r,points:i}=t;let s=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=i[r],u=i[kL(r,l,i)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(n,c.y),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(n,u.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function ML(e,t){const{line:n,target:r,property:i,color:s,scale:a,clip:o}=t,l=function(e,t,n){const r=e.segments,i=e.points,s=t.points,a=[];for(const o of r){let{start:e,end:r}=o;r=kL(e,r,i);const l=wL(n,i[e],i[r],o.loop);if(!t.segments){a.push({source:o,target:l,start:i[e],end:i[r]});continue}const c=OD(t,l);for(const t of c){const e=wL(n,s[t.start],s[t.end],t.loop),r=LD(o,i,e);for(const i of r)a.push({source:i,target:t,start:{[n]:NL(l,e,"start",Math.max)},end:{[n]:NL(l,e,"end",Math.min)}})}}return a}(n,r,i);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:t=s}={}}=c,l=!0!==r;e.save(),e.fillStyle=t,LL(e,a,o,l&&wL(i,d,h)),e.beginPath();const f=!!n.pathSegment(e,c);let m;if(l){f?e.closePath():OL(e,r,h,i);const t=!!r.pathSegment(e,u,{move:f,reverse:!0});m=f&&t,m||OL(e,r,d,i)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function LL(e,t,n,r){const i=t.chart.chartArea,{property:s,start:a,end:o}=r||{};if("x"===s||"y"===s){let t,r,l,c;"x"===s?(t=a,r=i.top,l=o,c=i.bottom):(t=i.left,r=a,l=i.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),e.rect(t,r,l-t,c-r),e.clip()}}function OL(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var FL={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let s,a,o,l;for(a=0;a<r;++a)s=e.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof dL&&(l={visible:e.isDatasetVisible(a),index:a,fill:EL(o,a,r),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,i.push(l);for(a=0;a<r;++a)l=i[a],l&&!1!==l.fill&&(l.fill=jL(i,a,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,i=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let a=i.length-1;a>=0;--a){const t=i[a].$filler;t&&(t.line.updateControlPoints(s,t.axis),r&&t.fill&&IL(e.ctx,t,s))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const t=r[i].$filler;_L(t)&&IL(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;_L(r)&&"beforeDatasetDraw"===n.drawTime&&IL(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const VL=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class UL extends cM{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=oA(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=KI(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=VL(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let u=e;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,f)=>{const m=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+m+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),o[f]={left:0,top:h,row:d,width:m,height:r},l[l.length-1]+=m+a}),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,d=0,h=0,f=0,m=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:p,itemHeight:g}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(i).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=zL(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,i,e,r);s>0&&h+g+2*a>c&&(u+=d+a,l.push({width:d,height:h}),f+=d+a,m++,d=h=0),o[s]={left:f,top:h,col:m,width:p,height:g},d=Math.max(d,p),h+=g+a}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=AD(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=tI(n,this.left+r,this.right-this.lineWidths[i]);for(const o of t)i!==o.row&&(i=o.row,a=tI(n,this.left+r,this.right-this.lineWidths[i])),o.top+=this.top+e+r,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+r}else{let i=0,a=tI(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const o of t)o.col!==i&&(i=o.col,a=tI(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),o.top=a,o.left+=this.left+r,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;PI(e,this),this._draw(),AI(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,a=kI.color,o=AD(e.rtl,this.left,this.width),l=KI(s.font),{padding:c}=s,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:m,itemHeight:p}=VL(s,u),g=this.isHorizontal(),y=this._computeTitleHeight();h=g?{x:tI(i,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:tI(i,this.top+y+c,this.bottom-t[0].height),line:0},ID(this.ctx,e.textDirection);const v=p+c;this.legendItems.forEach((x,b)=>{r.strokeStyle=x.fontColor,r.fillStyle=x.fontColor;const w=r.measureText(x.text).width,k=o.textAlign(x.textAlign||(x.textAlign=s.textAlign)),N=f+d+w;let S=h.x,_=h.y;o.setWidth(this.width),g?b>0&&S+N+c>this.right&&(_=h.y+=v,h.line++,S=h.x=tI(i,this.left+c,this.right-n[h.line])):b>0&&_+v>this.bottom&&(S=h.x=S+t[h.line].width+c,h.line++,_=h.y=tI(i,this.top+y+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(m)||m<0)return;r.save();const i=sA(n.lineWidth,1);if(r.fillStyle=sA(n.fillStyle,a),r.lineCap=sA(n.lineCap,"butt"),r.lineDashOffset=sA(n.lineDashOffset,0),r.lineJoin=sA(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=sA(n.strokeStyle,a),r.setLineDash(sA(n.lineDash,[])),s.usePointStyle){const a={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=o.xPlus(e,f/2);CI(r,a,l,t+d,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-m)/2,0),a=o.leftForLtr(e,f),l=HI(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?OI(r,{x:a,y:s,w:f,h:m,radius:l}):r.rect(a,s,f,m),r.fill(),0!==i&&r.stroke()}r.restore()}(o.x(S),_,x),S=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(k,S+f+d,g?S+N:this.right,e.rtl),function(e,t,n){LI(r,n.text,e,t+p/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),_,x),g)h.x+=N+c;else if("string"!==typeof x.text){const e=l.lineHeight;h.y+=zL(x,e)+c}else h.y+=v}),DD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=KI(t.font),r=qI(t.padding);if(!t.display)return;const i=AD(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=tI(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+tI(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=tI(a,u,u+d);s.textAlign=i.textAlign(eI(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,LI(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=KI(e.font),n=qI(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(qA(e,this.left,this.right)&&qA(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],qA(e,r.left,r.left+r.width)&&qA(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,a=(i=n,null!==(r=s)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);s&&!a&&oA(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!a&&oA(t.onHover,[e,n,this],this)}else n&&oA(t.onClick,[e,n,this],this);var r,i}}function zL(e,t){return t*(e.text?e.text.length:0)}var BL={id:"legend",_element:UL,start(e,t,n){const r=e.legend=new UL({ctx:e.ctx,options:n,chart:e});qR.configure(e,r,n),qR.addBox(e,r)},stop(e){qR.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;qR.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=qI(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class WL extends cM{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=tA(n.text)?n.text.length:1;this._padding=qI(n.padding);const i=r*KI(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=tI(a,n,i),c=t+e,o=i-n):("left"===s.position?(l=n+e,c=tI(a,r,t),u=-.5*kA):(l=i-e,c=tI(a,t,r),u=.5*kA),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=KI(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(r);LI(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:eI(t.align),textBaseline:"middle",translation:[i,s]})}}var HL={id:"title",_element:WL,start(e,t,n){!function(e,t){const n=new WL({ctx:e.ctx,options:t,chart:e});qR.configure(e,n,t),qR.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;qR.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;qR.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const qL={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=UA(t,r.getCenterPoint());e<o&&(o=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function KL(e,t){return t&&(tA(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function GL(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function YL(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function XL(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=KI(t.bodyFont),c=KI(t.titleFont),u=KI(t.footerFont),d=s.length,h=i.length,f=r.length,m=qI(t.padding);let p=m.height,g=0,y=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(p+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){p+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const x=function(e){g=Math.max(g,n.measureText(e).width+v)};return n.save(),n.font=c.string,lA(e.title,x),n.font=l.string,lA(e.beforeBody.concat(e.afterBody),x),v=t.displayColors?a+2+t.boxPadding:0,lA(r,e=>{lA(e.before,x),lA(e.lines,x),lA(e.after,x)}),v=0,n.font=u.string,lA(e.footer,x),n.restore(),g+=m.width,{width:g,height:p}}function QL(e,t,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=i<=(o+l)/2?"left":"right":i<=s/2?c="left":i>=a-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;return"left"===e&&i+s+a>t.width||"right"===e&&i-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function $L(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||QL(e,t,n,r),yAlign:r}}function JL(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=HI(a);let m=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const p=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===o?m+=c:"right"===o&&(m-=c):"left"===o?m-=Math.max(u,h)+i:"right"===o&&(m+=Math.max(d,f)+i),{x:HA(m,0,r.width-t.width),y:HA(p,0,r.height-t.height)}}function ZL(e,t,n){const r=qI(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function eO(e){return KL([],GL(e))}function tO(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const nO={beforeTitle:JP,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:JP,beforeBody:JP,beforeLabel:JP,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return eA(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:JP,afterBody:JP,beforeFooter:JP,footer:JP,afterFooter:JP};function rO(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?nO[t].call(n,r):i}class iO extends cM{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new YD(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,YI(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=rO(n,"beforeTitle",this,e),i=rO(n,"title",this,e),s=rO(n,"afterTitle",this,e);let a=[];return a=KL(a,GL(r)),a=KL(a,GL(i)),a=KL(a,GL(s)),a}getBeforeBody(e,t){return eO(rO(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return lA(e,e=>{const t={before:[],lines:[],after:[]},i=tO(n,e);KL(t.before,GL(rO(i,"beforeLabel",this,e))),KL(t.lines,rO(i,"label",this,e)),KL(t.after,GL(rO(i,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return eO(rO(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=rO(n,"beforeFooter",this,e),i=rO(n,"footer",this,e),s=rO(n,"afterFooter",this,e);let a=[];return a=KL(a,GL(r)),a=KL(a,GL(i)),a=KL(a,GL(s)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(YL(this.chart,t[a]));return e.filter&&(l=l.filter((t,r,i)=>e.filter(t,r,i,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),lA(l,t=>{const n=tO(e.callbacks,t);r.push(rO(n,"labelColor",this,t)),i.push(rO(n,"labelPointStyle",this,t)),s.push(rO(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=qL[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=XL(this,n),a=Object.assign({},e,t),o=$L(this.chart,n,a),l=JL(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=HI(a),{x:d,y:h}=e,{width:f,height:m}=t;let p,g,y,v,x,b;return"center"===i?(x=h+m/2,"left"===r?(p=d,g=p-s,v=x+s,b=x-s):(p=d+f,g=p+s,v=x-s,b=x+s),y=p):(g="left"===r?d+Math.max(o,c)+s:"right"===r?d+f-Math.max(l,u)-s:this.caretX,"top"===i?(v=h,x=v-s,p=g-s,y=g+s):(v=h+m,x=v+s,p=g+s,y=g-s),b=v),{x1:p,x2:g,x3:y,y1:v,y2:x,y3:b}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,a,o;if(i){const l=AD(n.rtl,this.x,this.width);for(e.x=ZL(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=KI(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===i&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=i,c=KI(i.bodyFont),u=ZL(this,"left",i),d=r.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(i.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=f+o/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,EI(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,EI(e,t,n,c)}else{e.lineWidth=nA(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),a=HI(s.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,OI(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),OI(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=KI(n.bodyFont);let d=u.lineHeight,h=0;const f=AD(n.rtl,this.x,this.width),m=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+i},p=f.textAlign(s);let g,y,v,x,b,w,k;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=ZL(this,p,n),t.fillStyle=n.bodyColor,lA(this.beforeBody,m),h=a&&"right"!==p?"center"===s?l/2+c:l+2+c:0,x=0,w=r.length;x<w;++x){for(g=r[x],y=this.labelTextColors[x],t.fillStyle=y,lA(g.before,m),v=g.lines,a&&v.length&&(this._drawColorBox(t,e,x,f,n),d=Math.max(u.lineHeight,o)),b=0,k=v.length;b<k;++b)m(v[b]),d=u.lineHeight;lA(g.after,m)}h=0,d=u.lineHeight,lA(this.afterBody,m),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,a;if(i){const o=AD(n.rtl,this.x,this.width);for(e.x=ZL(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=KI(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=HI(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l-d,o),t.quadraticCurveTo(a+l,o,a+l,o+d),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=qL[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=XL(this,e),a=Object.assign({},n,this._size),o=$L(t,e,a),l=JL(e,a,o,t);r._to===l.x&&i._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=qI(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),ID(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),DD(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),i=!cA(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),a=this._positionChanged(s,e),o=t||!cA(s,i)||a;return o&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=qL[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}o(iO,"positioners",qL);var sO={id:"tooltip",_element:iO,positioners:qL,afterInit(e,t,n){n&&(e.tooltip=new iO({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",c(c({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nO},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function aO(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function oO(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class lO extends xM{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(eA(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:HA(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:aO(n,e,sA(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return oO.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function cO(e,t){const n=[],{bounds:r,step:i,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=i||1,f=c-1,{min:m,max:p}=t,g=!eA(s),y=!eA(a),v=!eA(l),x=(p-m)/(u+1);let b,w,k,N,S=DA((p-m)/f/h)*h;if(S<1e-14&&!g&&!y)return[{value:m},{value:p}];N=Math.ceil(p/S)-Math.floor(m/S),N>f&&(S=DA(N*S/f/h)*h),eA(o)||(b=Math.pow(10,o),S=Math.ceil(S*b)/b),"ticks"===r?(w=Math.floor(m/S)*S,k=Math.ceil(p/S)*S):(w=m,k=p),g&&y&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/i,S/1e3)?(N=Math.round(Math.min((a-s)/S,c)),S=(a-s)/N,w=s,k=a):v?(w=g?s:w,k=y?a:k,N=l-1,S=(k-w)/N):(N=(k-w)/S,N=IA(N,Math.round(N),S/1e3)?Math.round(N):Math.ceil(N));const _=Math.max(FA(S),FA(w));b=Math.pow(10,eA(o)?_:o),w=Math.round(w*b)/b,k=Math.round(k*b)/b;let j=0;for(g&&(d&&w!==s?(n.push({value:s}),w<s&&j++,IA(Math.round((w+j*S)*b)/b,s,uO(s,x,e))&&j++):w<s&&j++);j<N;++j){const e=Math.round((w+j*S)*b)/b;if(y&&e>a)break;n.push({value:e})}return y&&d&&k!==a?n.length&&IA(n[n.length-1].value,a,uO(a,x,e))?n[n.length-1].value=a:n.push({value:a}):y&&k!==a||n.push({value:k}),n}function uO(e,t,n){let{horizontal:r,minRotation:i}=n;const s=LA(i),a=(r?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}o(lO,"id","category"),o(lO,"defaults",{ticks:{callback:oO}});class dO extends xM{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return eA(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,a=e=>i=n?i:e;if(e){const e=AA(r),t=AA(i);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);a(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=cO({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&MA(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return mI(e,this.chart.options.locale,this.options.ticks.format)}}class hO extends dO{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=rA(e)?e:0,this.max=rA(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=LA(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}o(hO,"id","linear"),o(hO,"defaults",{ticks:{callback:gI.formatters.numeric}});const fO=e=>Math.floor(PA(e)),mO=(e,t)=>Math.pow(10,fO(e)+t);function pO(e){return 1===e/Math.pow(10,fO(e))}function gO(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function yO(e,t){let{min:n,max:r}=t;n=iA(e.min,n);const i=[],s=fO(n);let a=function(e,t){let n=fO(t-e);for(;gO(e,t,n)>10;)n++;for(;gO(e,t,n)<10;)n--;return Math.min(n,fO(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,d=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,a)),f=iA(e.min,Math.round((c+d+h*Math.pow(10,a))*o)/o);for(;f<r;)i.push({value:f,major:pO(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),f=Math.round((c+d+h*Math.pow(10,a))*o)/o;const m=iA(e.max,f);return i.push({value:m,major:pO(m),significand:h}),i}class vO extends xM{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=dO.prototype.parse.apply(this,[e,t]);if(0!==n)return rA(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=rA(e)?Math.max(0,e):null,this.max=rA(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!rA(this._userMin)&&(this.min=e===mO(this.min,0)?mO(this.min,-1):mO(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(mO(n,-1)),s(mO(r,1)))),n<=0&&i(mO(r,-1)),r<=0&&s(mO(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=yO({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&MA(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":mI(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=PA(e),this._valueRange=PA(this.max)-PA(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(PA(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function xO(e){const t=e.ticks;if(t.display&&e.display){const e=qI(t.backdropPadding);return sA(t.font&&t.font.size,kI.font.size)+e.height}return 0}function bO(e,t,n){return n=tA(n)?n:[n],{w:SI(e,t.string,n),h:n.length*t.lineHeight}}function wO(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function kO(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?kA/s:0;for(let l=0;l<s;l++){const s=a.setContext(e.getPointLabelContext(l));i[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+i[l],o),u=KI(s.font),d=bO(e.ctx,u,e._pointLabels[l]);r[l]=d;const h=BA(e.getIndexAngle(l)+o),f=Math.round(OA(h));NO(n,t,h,wO(f,c.x,d.w,0,180),wO(f,c.y,d.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:xO(s)/2,additionalAngle:a?kA/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const i=SO(e,u,l);r.push(i),"auto"===o&&(i.visible=_O(i,c),i.visible&&(c=i))}return r}(e,r,i)}function NO(e,t,n,r,i){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/a,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function SO(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,r+i+a,s),c=Math.round(OA(BA(l.angle+EA))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function _O(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(TI({x:n,y:r},t)||TI({x:n,y:s},t)||TI({x:i,y:r},t)||TI({x:i,y:s},t))}function jO(e,t,n){const{left:r,top:i,right:s,bottom:a}=n,{backdropColor:o}=t;if(!eA(o)){const n=HI(t.borderRadius),l=qI(t.backdropPadding);e.fillStyle=o;const c=r-l.left,u=i-l.top,d=s-r+l.width,h=a-i+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),OI(e,{x:c,y:u,w:d,h:h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function EO(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,NA);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}o(vO,"id","logarithmic"),o(vO,"defaults",{ticks:{callback:gI.formatters.logarithmic,major:{enabled:!0}}});class CO extends dO{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=qI(xO(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=rA(e)&&!isNaN(e)?e:0,this.max=rA(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xO(this.options))}generateTickLabels(e){dO.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=oA(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?kO(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return BA(e*(NA/(this._pointLabels.length||1))+LA(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(eA(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(eA(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return YI(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-EA+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),EO(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));jO(n,s,t);const a=KI(s.font),{x:o,y:l,textAlign:c}=t;LI(n,e._pointLabels[i],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),EO(e,n,a,r),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}}),n.display){for(e.save(),a=s-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=KI(o.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=qI(o.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}LI(e,r.label,0,-i,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}o(CO,"id","radialLinear"),o(CO,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:gI.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),o(CO,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),o(CO,"descriptors",{angleLines:{_fallback:"grid"}});const TO={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},PO=Object.keys(TO);function AO(e,t){return e-t}function IO(e,t){if(eA(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),rA(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(i&&(a="week"!==i||!RA(s)&&!0!==s?n.startOf(a,i):n.startOf(a,"isoWeek",s)),+a)}function DO(e,t,n,r){const i=PO.length;for(let s=PO.indexOf(e);s<i-1;++s){const e=TO[PO[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return PO[s]}return PO[i-1]}function RO(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=KA(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function MO(e,t,n){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class LO extends xM{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new _R(e.adapters.date);r.init(t),mA(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:IO(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(i=Math.max(i,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=rA(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=rA(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?DO(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=PO.length-1;s>=PO.indexOf(n);s--){const n=PO[s];if(TO[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return PO[n?PO.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=PO.indexOf(e)+1,n=PO.length;t<n;++t)if(TO[PO[t]].common)return PO[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),MO(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=HA(r,0,s),i=HA(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||DO(i.minUnit,t,n,this._getLabelCapacity(t)),a=sA(r.ticks.stepSize,1),o="week"===s&&i.isoWeekday,l=RA(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,a,s),d++)RO(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||RO(c,u,f),Object.keys(c).sort(AO).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return oA(s,[e,t,n],this);const a=i.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,r||(h?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=LA(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*s,h:n*s+a*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,MO(this,[e],this._majorUnit),r),s=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(IO(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $A(e.sort(AO))}}function OO(e,t,n){let r,i,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=GA(e,"pos",t)),({pos:r,time:s}=e[o]),({pos:i,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=GA(e,"time",t)),({time:r,pos:s}=e[o]),({time:i,pos:a}=e[l]));const c=i-r;return c?s+(a-s)*(t-r)/c:s}o(LO,"id","time"),o(LO,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class FO extends LO{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=OO(t,this.min),this._tableRange=OO(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=r.length;s<a;++s)c=r[s+1],o=r[s-1],l=r[s],Math.round((c+o)/2)!==l&&i.push({time:l,pos:s/(a-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(OO(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return OO(this._table,n*this._tableRange+this._minPos,!0)}}o(FO,"id","timeseries"),o(FO,"defaults",LO.defaults);const VO=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],UO="label";function zO(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function BO(e,t){e.labels=t}function WO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UO;const r=[];e.datasets=t.map(t=>{const i=e.datasets.find(e=>e[n]===t[n]);return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):c({},t)})}function HO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UO;const n={labels:[],datasets:[]};return BO(n,e.labels),WO(n,e.datasets,t),n}function qO(e,n){const{height:r=150,width:s=300,redraw:a=!1,datasetIdKey:o,type:l,data:u,options:d,plugins:h=[],fallbackContent:f,updateMode:m}=e,p=i(e,VO),g=(0,t.useRef)(null),y=(0,t.useRef)(null),v=()=>{g.current&&(y.current=new QM(g.current,{type:l,data:HO(u,o),options:d&&c({},d),plugins:h}),zO(n,y.current))},x=()=>{zO(n,null),y.current&&(y.current.destroy(),y.current=null)};return(0,t.useEffect)(()=>{!a&&y.current&&d&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(y.current,d)},[a,d]),(0,t.useEffect)(()=>{!a&&y.current&&BO(y.current.config.data,u.labels)},[a,u.labels]),(0,t.useEffect)(()=>{!a&&y.current&&u.datasets&&WO(y.current.config.data,u.datasets,o)},[a,u.datasets]),(0,t.useEffect)(()=>{y.current&&(a?(x(),setTimeout(v)):y.current.update(m))},[a,d,u.labels,u.datasets,m]),(0,t.useEffect)(()=>{y.current&&(x(),setTimeout(v))},[l]),(0,t.useEffect)(()=>(v(),()=>x()),[]),t.createElement("canvas",c({ref:g,role:"img",height:r,width:s},p),f)}const KO=(0,t.forwardRef)(qO);function GO(e,n){return QM.register(n),(0,t.forwardRef)((n,r)=>t.createElement(KO,c(c({},n),{},{ref:r,type:e})))}const YO=GO("line",vR),XO=GO("bar",pR),QO=GO("doughnut",yR);QM.register(lO,hO,fL,dL,bL,nL,HL,sO,BL,FL);const $O=function(){var e;const{id:n}=pe(),{currentUser:r}=qy(),i=me(),[s,a]=(0,t.useState)(null),[o,l]=(0,t.useState)([]),[u,d]=(0,t.useState)(!0),[h,f]=(0,t.useState)(""),[m,p]=(0,t.useState)("7days"),[g,y]=(0,t.useState)({totalViews:0,totalTransactions:0,successfulTransactions:0,totalAmount:0,conversionRate:0}),[v,x]=(0,t.useState)(1),[b]=(0,t.useState)(5);(0,t.useEffect)(()=>{n&&r&&(async()=>{try{d(!0);const e=sg(By,"paymentLinks",n),t=await sy(e);if(!t.exists())return f("Payment link not found"),void d(!1);const i=c({id:t.id},t.data());if(i.ownerUid!==r.uid)return f("You do not have permission to view this link"),void d(!1);a(i);const s=qg(ig(By,"transactions"),Gg("linkId","==",n)),o=(await oy(s)).docs.map(e=>c({id:e.id},e.data()));o.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.seconds-e.createdAt.seconds:0),l(o);const u=o.filter(e=>"success"===e.status),h=u.reduce((e,t)=>e+(t.amount||0),0),m=Math.max(3*o.length,10)+Math.floor(50*Math.random());y({totalViews:m,totalTransactions:o.length,successfulTransactions:u.length,totalAmount:h,conversionRate:m>0?u.length/m*100:0})}catch(h){console.error("Error fetching link analytics:",h),f("Failed to load analytics data")}finally{d(!1)}})()},[n,r]);const{labels:w,successData:k,failedData:N,amountData:S}=(()=>{const e=(()=>{const e=new Date,t=[];let n=7;"30days"===m?n=30:"90days"===m&&(n=90);for(let r=n-1;r>=0;r--){const n=new Date(e);n.setDate(n.getDate()-r),t.push(n.toLocaleDateString("en-GB",{day:"numeric",month:"short"}))}return t})(),t=new Array(e.length).fill(0),n=new Array(e.length).fill(0),r=new Array(e.length).fill(0),i=new Date;let s=new Date(i);"7days"===m?s.setDate(i.getDate()-7):"30days"===m?s.setDate(i.getDate()-30):"90days"===m&&s.setDate(i.getDate()-90);return o.filter(e=>{if(!e.createdAt)return!1;return new Date(1e3*e.createdAt.seconds)>=s}).forEach(s=>{if(!s.createdAt)return;const a=new Date(1e3*s.createdAt.seconds),o=Math.floor((i-a)/864e5);if(o<e.length){const i=e.length-1-o;"success"===s.status?(t[i]++,r[i]+=s.amount||0):"failed"===s.status&&n[i]++}}),{labels:e,successData:t,failedData:n,amountData:r}})(),_={labels:w,datasets:[{label:"Successful",data:k,backgroundColor:"rgba(34, 197, 94, 0.2)",borderColor:"rgb(34, 197, 94)",borderWidth:2,tension:.3,fill:!0},{label:"Failed",data:N,backgroundColor:"rgba(239, 68, 68, 0.2)",borderColor:"rgb(239, 68, 68)",borderWidth:2,tension:.3,fill:!0}]},j={labels:w,datasets:[{label:"Revenue (KES)",data:S,backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgb(59, 130, 246)",borderWidth:1}]},E={labels:["Successful","Failed","Pending"],datasets:[{data:[o.filter(e=>"success"===e.status).length,o.filter(e=>"failed"===e.status).length,o.filter(e=>"pending"===e.status||"initiated"===e.status).length],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(234, 179, 8, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(234, 179, 8)"],borderWidth:1}]},C=e=>{if(!e)return"";return new Date(1e3*e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})};return u?(0,Wy.jsx)(jE,{children:(0,Wy.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Wy.jsx)(oP,{})})}):h?(0,Wy.jsx)(jE,{children:(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:(0,Wy.jsxs)("div",{className:"text-center",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4",children:(0,Wy.jsx)(oj,{className:"h-8 w-8 text-red-600"})}),(0,Wy.jsx)("h2",{className:"text-2xl font-display font-bold text-gray-900 mb-2",children:"Error"}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-6",children:h}),(0,Wy.jsxs)(fE,{variant:"primary",onClick:()=>i("/dashboard/links"),children:[(0,Wy.jsx)(lj,{className:"mr-2"})," Back to Payment Links"]})]})})}):(0,Wy.jsxs)(jE,{children:[(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("button",{onClick:()=>i("/dashboard/links"),className:"mr-3 text-gray-500 hover:text-primary-600",children:(0,Wy.jsx)(lj,{className:"h-5 w-5"})}),(0,Wy.jsx)("h1",{className:"text-2xl font-display font-bold text-gray-900",children:"Link Analytics"})]}),(0,Wy.jsx)("p",{className:"text-gray-600 mt-1",children:s.description})]}),(0,Wy.jsx)("div",{className:"mt-4 md:mt-0",children:(0,Wy.jsxs)("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:m,onChange:e=>p(e.target.value),children:[(0,Wy.jsx)("option",{value:"7days",children:"Last 7 days"}),(0,Wy.jsx)("option",{value:"30days",children:"Last 30 days"}),(0,Wy.jsx)("option",{value:"90days",children:"Last 90 days"})]})})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100 mb-6",children:[(0,Wy.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Wy.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,Wy.jsx)(Aj,{className:"h-5 w-5 text-primary-600"})}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:s.description}),(0,Wy.jsxs)("p",{className:"text-sm text-primary-600",children:["paylink.co.ke/",s.slug]})]}),(0,Wy.jsx)("span",{className:"ml-auto px-2 py-1 text-xs font-medium rounded-full ".concat("active"===s.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"active"===s.status?"Active":"Inactive"})]}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Wy.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,Wy.jsx)(eE,{className:"h-4 w-4 text-blue-600"})}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-500",children:"Total Views"}),(0,Wy.jsx)("p",{className:"text-xl font-bold text-gray-900",children:g.totalViews})]})]})}),(0,Wy.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:(0,Wy.jsx)(bj,{className:"h-4 w-4 text-green-600"})}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),(0,Wy.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[s.currency," ",g.totalAmount.toLocaleString()]})]})]})}),(0,Wy.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center",children:(0,Wy.jsx)(yj,{className:"h-4 w-4 text-purple-600"})}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-500",children:"Conversion Rate"}),(0,Wy.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[g.conversionRate.toFixed(1),"%"]})]})]})}),(0,Wy.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center",children:(0,Wy.jsx)(hj,{className:"h-4 w-4 text-orange-600"})}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-500",children:"Created On"}),(0,Wy.jsx)("p",{className:"text-xl font-bold text-gray-900",children:C(null===(e=s.createdAt)||void 0===e?void 0:e.seconds).split(",")[0]})]})]})})]})]}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[(0,Wy.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Transaction Count"}),(0,Wy.jsx)("div",{className:"h-64",children:(0,Wy.jsx)(YO,{data:_,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{precision:0}}},plugins:{legend:{position:"bottom"}}}})})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[(0,Wy.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue"}),(0,Wy.jsx)("div",{className:"h-64",children:(0,Wy.jsx)(XO,{data:j,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{legend:{position:"bottom"}}}})})]})]}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[(0,Wy.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Transaction Status"}),(0,Wy.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,Wy.jsx)(QO,{data:E,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),(0,Wy.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[(0,Wy.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Transactions"}),o.length>0?(0,Wy.jsxs)("div",{className:"overflow-x-auto",children:[(0,Wy.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Wy.jsx)("thead",{children:(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Wy.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Wy.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Wy.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"})]})}),(0,Wy.jsx)("tbody",{className:"divide-y divide-gray-200",children:(()=>{const e=v*b,t=e-b;return o.slice(t,e).map(e=>{var t,n;return(0,Wy.jsxs)(Y_.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[(0,Wy.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:C(null===(t=e.createdAt)||void 0===t?void 0:t.seconds)}),(0,Wy.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:[s.currency," ",null===(n=e.amount)||void 0===n?void 0:n.toLocaleString()]}),(0,Wy.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,Wy.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("success"===e.status?"bg-green-100 text-green-800":"failed"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"success"===e.status?"Success":"failed"===e.status?"Failed":"Pending"})}),(0,Wy.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.payerPhone||"N/A"})]},e.id)})})()})]}),o.length>b&&(0,Wy.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,Wy.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,Wy.jsx)("span",{className:"font-medium",children:Math.min((v-1)*b+1,o.length)})," to"," ",(0,Wy.jsx)("span",{className:"font-medium",children:Math.min(v*b,o.length)})," ","of ",(0,Wy.jsx)("span",{className:"font-medium",children:o.length})," transactions"]}),(0,Wy.jsxs)("div",{className:"flex space-x-2",children:[(0,Wy.jsx)("button",{className:"px-2 py-1 border rounded-md text-xs ".concat(1===v?"text-gray-400 border-gray-200 cursor-not-allowed":"text-gray-700 border-gray-300 hover:bg-gray-50"),onClick:()=>x(v-1),disabled:1===v,children:"Previous"}),Array.from({length:Math.ceil(o.length/b)}).map((e,t)=>(0,Wy.jsx)("button",{className:"px-2 py-1 border rounded-md text-xs ".concat(v===t+1?"bg-primary-600 text-white border-primary-600":"text-gray-700 border-gray-300 hover:bg-gray-50"),onClick:()=>x(t+1),children:t+1},t)),(0,Wy.jsx)("button",{className:"px-2 py-1 border rounded-md text-xs ".concat(v===Math.ceil(o.length/b)?"text-gray-400 border-gray-200 cursor-not-allowed":"text-gray-700 border-gray-300 hover:bg-gray-50"),onClick:()=>x(v+1),disabled:v===Math.ceil(o.length/b),children:"Next"})]})]}),(0,Wy.jsx)("div",{className:"mt-4 text-center",children:(0,Wy.jsx)(fE,{variant:"ghost",size:"sm",onClick:()=>i("/dashboard/transactions",{state:{linkId:n}}),children:"View All in Transactions"})})]}):(0,Wy.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No transactions found for this payment link."})]})]})]})};const JO=function(){const{currentUser:e}=qy(),[n,r]=(0,t.useState)(!1),[i,s]=(0,t.useState)(!1),[a,o]=(0,t.useState)(""),[l,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null),[p,g]=(0,t.useState)({publishableKey:"",secretKey:"",enabled:!1}),[y,v]=(0,t.useState)({publicKey:"",secretKey:"",enabled:!1});(0,t.useEffect)(()=>{e&&(async()=>{try{r(!0);const t=sg(By,"merchantSettings",e.uid),n=await sy(t);if(n.exists()){const e=n.data();e.stripe&&g({publishableKey:e.stripe.publishableKey||"",secretKey:e.stripe.secretKey?"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022":"",enabled:e.stripe.enabled||!1}),e.paystack&&v({publicKey:e.paystack.publicKey||"",secretKey:e.paystack.secretKey?"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022":"",enabled:e.paystack.enabled||!1})}r(!1)}catch(a){console.error("Error fetching payment settings:",a),o("Failed to load payment settings"),r(!1)}})()},[e]);const x=e=>{const{name:t,value:n,type:r,checked:i}=e.target;g(c(c({},p),{},{[t]:"checkbox"===r?i:n}))},b=e=>{const{name:t,value:n,type:r,checked:i}=e.target;v(c(c({},y),{},{[t]:"checkbox"===r?i:n}))};return(0,Wy.jsx)(jE,{children:(0,Wy.jsxs)("div",{className:"p-6",children:[(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Settings"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:"Configure your payment gateway credentials to accept payments"})]}),a&&(0,Wy.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md text-red-800 flex items-center",children:[(0,Wy.jsx)(nE,{className:"text-red-500 mr-2"}),a]}),i&&(0,Wy.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-md text-green-800 flex items-center",children:[(0,Wy.jsx)(mj,{className:"text-green-500 mr-2"}),"Payment settings saved successfully"]}),f&&(0,Wy.jsxs)("div",{className:"mb-6 p-4 ".concat(f.success?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"," border rounded-md flex items-center"),children:[f.success?(0,Wy.jsx)(mj,{className:"text-green-500 mr-2"}):(0,Wy.jsx)(nE,{className:"text-red-500 mr-2"}),f.message]}),(0,Wy.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{if(r(!0),o(""),s(!1),m(null),p.enabled){if(!p.publishableKey.startsWith("pk_"))return o('Stripe publishable key should start with "pk_"'),void r(!1);if(!p.secretKey.startsWith("sk_")&&!p.secretKey.startsWith("\u2022"))return o('Stripe secret key should start with "sk_"'),void r(!1)}if(y.enabled){if(!y.publicKey.startsWith("pk_"))return o('Paystack public key should start with "pk_"'),void r(!1);if(!y.secretKey.startsWith("sk_")&&!y.secretKey.startsWith("\u2022"))return o('Paystack secret key should start with "sk_"'),void r(!1)}const t=sg(By,"merchantSettings",e.uid),n=await sy(t),i={enabled:p.enabled,publishableKey:p.publishableKey};p.secretKey.startsWith("\u2022")?n.exists()&&n.data().stripe&&(i.secretKey=n.data().stripe.secretKey):i.secretKey=p.secretKey;const a={enabled:y.enabled,publicKey:y.publicKey};y.secretKey.startsWith("\u2022")?n.exists()&&n.data().paystack&&(a.secretKey=n.data().paystack.secretKey):a.secretKey=y.secretKey,await ly(t,{stripe:i,paystack:a,updatedAt:fy()},{merge:!0}),s(!0),r(!1)}catch(a){console.error("Error saving payment settings:",a),o("Failed to save payment settings"),r(!1)}},children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,Wy.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)(xj,{className:"text-2xl text-gray-700 mr-3"}),(0,Wy.jsx)("h2",{className:"text-lg font-semibold",children:"Stripe"})]}),(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600 mr-2",children:"Enable Stripe"}),(0,Wy.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Wy.jsx)("input",{type:"checkbox",name:"enabled",className:"sr-only peer",checked:p.enabled,onChange:x}),(0,Wy.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]}),(0,Wy.jsxs)("div",{className:"space-y-4",children:[(0,Wy.jsx)(bE,{label:"Publishable Key",type:"text",name:"publishableKey",value:p.publishableKey,onChange:x,placeholder:"pk_test_...",icon:(0,Wy.jsx)(Pj,{className:"text-gray-400"}),disabled:!p.enabled}),(0,Wy.jsxs)("div",{className:"relative",children:[(0,Wy.jsx)(bE,{label:"Secret Key",type:"password",name:"secretKey",value:p.secretKey,onChange:x,placeholder:"sk_test_...",icon:(0,Wy.jsx)(Rj,{className:"text-gray-400"}),disabled:!p.enabled}),p.enabled&&(0,Wy.jsx)("button",{type:"button",onClick:async()=>{if(p.secretKey&&!p.secretKey.startsWith("\u2022")){u(!0),m(null),o("");try{const e=await ZT.post("http://localhost:8000/test-stripe-key",{secretKey:p.secretKey});e.data.success?m({success:!0,message:"Stripe API key is valid!"}):m({success:!1,message:e.data.error||"Invalid Stripe API key"})}catch(a){var e,t;m({success:!1,message:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to test Stripe API key"})}finally{u(!1)}}else o("Please enter a Stripe secret key to test")},disabled:l,className:"absolute right-2 top-9 p-1 text-primary-600 hover:text-primary-800",title:"Test API Key",children:(0,Wy.jsx)(zj,{className:"".concat(l?"animate-spin":"")})})]}),(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:(0,Wy.jsxs)("p",{children:["Get your API keys from the ",(0,Wy.jsx)("a",{href:"https://dashboard.stripe.com/apikeys",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800",children:"Stripe Dashboard"})]})})]})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,Wy.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)(xj,{className:"text-2xl text-gray-700 mr-3"}),(0,Wy.jsx)("h2",{className:"text-lg font-semibold",children:"Paystack"})]}),(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600 mr-2",children:"Enable Paystack"}),(0,Wy.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Wy.jsx)("input",{type:"checkbox",name:"enabled",className:"sr-only peer",checked:y.enabled,onChange:b}),(0,Wy.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]}),(0,Wy.jsxs)("div",{className:"space-y-4",children:[(0,Wy.jsx)(bE,{label:"Public Key",type:"text",name:"publicKey",value:y.publicKey,onChange:b,placeholder:"pk_test_...",icon:(0,Wy.jsx)(Pj,{className:"text-gray-400"}),disabled:!y.enabled}),(0,Wy.jsxs)("div",{className:"relative",children:[(0,Wy.jsx)(bE,{label:"Secret Key",type:"password",name:"secretKey",value:y.secretKey,onChange:b,placeholder:"sk_test_...",icon:(0,Wy.jsx)(Rj,{className:"text-gray-400"}),disabled:!y.enabled}),y.enabled&&(0,Wy.jsx)("button",{type:"button",onClick:async()=>{if(y.secretKey&&!y.secretKey.startsWith("\u2022")){h(!0),m(null),o("");try{const e=await ZT.post("http://localhost:8000/test-paystack-key",{secretKey:y.secretKey});e.data.success?m({success:!0,message:"Paystack API key is valid!"}):m({success:!1,message:e.data.error||"Invalid Paystack API key"})}catch(a){var e,t;m({success:!1,message:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to test Paystack API key"})}finally{h(!1)}}else o("Please enter a Paystack secret key to test")},disabled:d,className:"absolute right-2 top-9 p-1 text-primary-600 hover:text-primary-800",title:"Test API Key",children:(0,Wy.jsx)(zj,{className:"".concat(d?"animate-spin":"")})})]}),(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:(0,Wy.jsxs)("p",{children:["Get your API keys from the ",(0,Wy.jsx)("a",{href:"https://dashboard.paystack.com/#/settings/developer",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800",children:"Paystack Dashboard"})]})})]})]}),(0,Wy.jsx)("div",{className:"flex justify-end",children:(0,Wy.jsx)(fE,{type:"submit",variant:"primary",loading:n,children:"Save Settings"})})]})]})})};const ZO=function(){const{currentUser:e,userProfile:n,fetchUserProfile:r}=qy(),i=me(),[s,a]=(0,t.useState)({businessName:"",businessType:"individual",registrationNumber:"",contactPhone:"",contactEmail:"",address:"",city:"",country:"",website:"",description:"",idType:"national_id",idNumber:""}),[o,l]=(0,t.useState)(!1),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{null!==n&&void 0!==n&&n.verificationSubmitted&&p(!0),n&&a(e=>c(c({},e),{},{businessName:n.businessName||"",contactPhone:n.contactPhone||"",contactEmail:n.email||""}))},[n]);const g=e=>{const{name:t,value:n}=e.target;a(e=>c(c({},e),{},{[t]:n}))},y=()=>{switch(null===n||void 0===n?void 0:n.verificationStatus){case"approved":return(0,Wy.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,Wy.jsx)(mj,{className:"mr-2"}),(0,Wy.jsx)("span",{children:"Verified"})]});case"rejected":return(0,Wy.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,Wy.jsx)(oj,{className:"mr-2"}),(0,Wy.jsx)("span",{children:"Rejected"})]});default:return(0,Wy.jsxs)("div",{className:"flex items-center text-yellow-600",children:[(0,Wy.jsx)(Dj,{className:"mr-2 animate-spin"}),(0,Wy.jsx)("span",{children:"Pending Review"})]})}};return m?(0,Wy.jsx)(jE,{children:(0,Wy.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,Wy.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Verification Status"}),(0,Wy.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:(0,Wy.jsxs)("div",{className:"flex items-start",children:[(0,Wy.jsx)(Cj,{className:"text-blue-500 mt-0.5 mr-3"}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h3",{className:"font-medium text-blue-800",children:"Verification Submitted"}),(0,Wy.jsx)("p",{className:"text-blue-700 mt-1",children:"Your verification request has been submitted and is being reviewed by our team. You will be notified once the review is complete."})]})]})}),(0,Wy.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,Wy.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wy.jsx)("span",{className:"text-gray-600",children:"Status:"}),y()]}),"rejected"===(null===n||void 0===n?void 0:n.verificationStatus)&&(null===n||void 0===n?void 0:n.rejectionReason)&&(0,Wy.jsxs)("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:[(0,Wy.jsx)("h4",{className:"font-medium text-red-800",children:"Reason for Rejection"}),(0,Wy.jsx)("p",{className:"text-red-700 mt-1",children:n.rejectionReason})]}),(0,Wy.jsx)("div",{className:"mt-6",children:(0,Wy.jsx)(fE,{onClick:()=>i("/dashboard"),variant:"outline",children:"Return to Dashboard"})})]})]})})}):(0,Wy.jsx)(jE,{children:(0,Wy.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,Wy.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Merchant Verification"}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-6",children:"Complete this form to verify your business and get a verified badge on your payment pages."}),u&&(0,Wy.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:(0,Wy.jsxs)("div",{className:"flex",children:[(0,Wy.jsx)(oj,{className:"text-red-500 mt-0.5 mr-3"}),(0,Wy.jsx)("p",{className:"text-red-700",children:u})]})}),h&&(0,Wy.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 mb-6",children:(0,Wy.jsxs)("div",{className:"flex",children:[(0,Wy.jsx)(mj,{className:"text-green-500 mt-0.5 mr-3"}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("p",{className:"text-green-700",children:"Verification request submitted successfully!"}),(0,Wy.jsx)("p",{className:"text-green-600 text-sm mt-1",children:"Redirecting to dashboard..."})]})]})}),(0,Wy.jsx)("form",{onSubmit:async t=>{t.preventDefault(),l(!0),d("");try{if(!e)throw new Error("You must be logged in to submit verification");const t=sg(By,"users",e.uid);await cy(t,{businessName:s.businessName,businessType:s.businessType,registrationNumber:s.registrationNumber,contactPhone:s.contactPhone,contactEmail:s.contactEmail,address:s.address,city:s.city,country:s.country,website:s.website,description:s.description,idType:s.idType,idNumber:s.idNumber,verificationStatus:"pending",verificationSubmitted:!0,verificationSubmittedAt:fy()});const a=sg(By,"verificationRequests",e.uid),o=await sy(a),l={userId:e.uid,email:e.email,displayName:(null===n||void 0===n?void 0:n.displayName)||"",businessName:s.businessName,businessType:s.businessType,registrationNumber:s.registrationNumber,contactPhone:s.contactPhone,contactEmail:s.contactEmail,address:s.address,city:s.city,country:s.country,website:s.website,description:s.description,idType:s.idType,idNumber:s.idNumber,status:"pending",updatedAt:fy()};console.log("Creating/updating verification request for user:",e.uid);try{o.exists()?(console.log("Updating existing verification request"),await cy(a,c({},l))):(console.log("Creating new verification request"),await ly(a,c(c({},l),{},{submittedAt:fy()}))),console.log("Verification request saved successfully")}catch(u){throw console.error("Error saving verification request:",u),u}await r(e.uid),f(!0),p(!0),setTimeout(()=>{i("/dashboard")},3e3)}catch(u){console.error("Error submitting verification:",u),d(u.message)}finally{l(!1)}},children:(0,Wy.jsxs)("div",{className:"space-y-6",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Business Information"}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name*"}),(0,Wy.jsx)(bE,{type:"text",name:"businessName",value:s.businessName,onChange:g,required:!0,placeholder:"Your business name"})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type*"}),(0,Wy.jsxs)("select",{name:"businessType",value:s.businessType,onChange:g,className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0,children:[(0,Wy.jsx)("option",{value:"individual",children:"Individual/Sole Proprietor"}),(0,Wy.jsx)("option",{value:"company",children:"Registered Company"}),(0,Wy.jsx)("option",{value:"partnership",children:"Partnership"}),(0,Wy.jsx)("option",{value:"nonprofit",children:"Non-profit Organization"})]})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),(0,Wy.jsx)(bE,{type:"text",name:"registrationNumber",value:s.registrationNumber,onChange:g,placeholder:"Business registration number (if applicable)"})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),(0,Wy.jsx)(bE,{type:"url",name:"website",value:s.website,onChange:g,placeholder:"https://yourbusiness.com"})]})]})]}),(0,Wy.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone*"}),(0,Wy.jsx)(bE,{type:"tel",name:"contactPhone",value:s.contactPhone,onChange:g,required:!0,placeholder:"+254700000000"})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email*"}),(0,Wy.jsx)(bE,{type:"email",name:"contactEmail",value:s.contactEmail,onChange:g,required:!0,placeholder:"contact@yourbusiness.com"})]}),(0,Wy.jsxs)("div",{className:"md:col-span-2",children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address"}),(0,Wy.jsx)(bE,{type:"text",name:"address",value:s.address,onChange:g,placeholder:"Street address"})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,Wy.jsx)(bE,{type:"text",name:"city",value:s.city,onChange:g,placeholder:"City"})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country*"}),(0,Wy.jsx)(bE,{type:"text",name:"country",value:s.country,onChange:g,required:!0,placeholder:"Country"})]})]})]}),(0,Wy.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Identity Verification"}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Type*"}),(0,Wy.jsxs)("select",{name:"idType",value:s.idType,onChange:g,className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0,children:[(0,Wy.jsx)("option",{value:"national_id",children:"National ID"}),(0,Wy.jsx)("option",{value:"passport",children:"Passport"}),(0,Wy.jsx)("option",{value:"drivers_license",children:"Driver's License"})]})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Number*"}),(0,Wy.jsx)(bE,{type:"text",name:"idNumber",value:s.idNumber,onChange:g,required:!0,placeholder:"ID number"})]}),(0,Wy.jsxs)("div",{className:"md:col-span-2",children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Description"}),(0,Wy.jsx)("textarea",{name:"description",value:s.description,onChange:g,rows:4,className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Briefly describe your business and the products/services you offer"})]})]})]}),(0,Wy.jsxs)("div",{className:"border-t border-gray-200 pt-6 flex justify-end",children:[(0,Wy.jsx)(fE,{type:"button",variant:"outline",className:"mr-4",onClick:()=>i("/dashboard"),children:"Cancel"}),(0,Wy.jsx)(fE,{type:"submit",disabled:o,children:o?"Submitting...":"Submit Verification"})]})]})})]})})})};const eF=function(){var e;const[n,r]=(0,t.useState)(!1),{pathname:i}=de(),{userProfile:s,logout:a}=qy(),o=me(),l=[{name:"Admin Dashboard",path:"/admin",icon:(0,Wy.jsx)(eE,{className:"w-5 h-5"})}],c=async()=>{try{await a(),o("/")}catch(e){console.error("Failed to log out",e)}};return(0,Wy.jsxs)(Y_.div,{className:"bg-white shadow-md h-screen ".concat(n?"w-16":"w-64"," transition-width duration-300 ease-in-out flex flex-col hidden md:flex"),initial:!1,animate:{width:n?64:256},children:[(0,Wy.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[!n&&(0,Wy.jsx)(yt,{to:"/admin",className:"font-display font-bold text-xl text-primary-600",children:"PayNow Admin"}),(0,Wy.jsx)("button",{onClick:()=>r(!n),className:"p-1 rounded-md hover:bg-gray-100 ".concat(n?"mx-auto":""),children:n?(0,Wy.jsx)(gj,{}):(0,Wy.jsx)(pj,{})})]}),(0,Wy.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,Wy.jsx)("nav",{children:(0,Wy.jsx)("ul",{className:"space-y-1",children:l.map(e=>(0,Wy.jsx)("li",{children:(0,Wy.jsxs)(yt,{to:e.path,className:"\n                    flex items-center px-4 py-3 text-sm font-medium rounded-md transition-colors duration-200\n                    ".concat(i===e.path?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-gray-100","\n                    ").concat(n?"justify-center":"","\n                  "),children:[e.icon,!n&&(0,Wy.jsx)("span",{className:"ml-3",children:e.name})]})},e.name))})})}),(0,Wy.jsx)("div",{className:"border-t",children:n?(0,Wy.jsx)("div",{className:"p-4 flex justify-center",children:(0,Wy.jsx)("button",{onClick:c,className:"p-2 rounded-md text-gray-500 hover:text-primary-600 hover:bg-gray-100",title:"Logout",children:(0,Wy.jsx)(Lj,{className:"w-5 h-5"})})}):(0,Wy.jsx)("div",{className:"p-4",children:(0,Wy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-gray-600",children:(null===s||void 0===s||null===(e=s.displayName)||void 0===e?void 0:e.charAt(0))||"A"}),(0,Wy.jsxs)("div",{className:"ml-3",children:[(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("p",{className:"text-sm font-medium text-gray-700",children:(null===s||void 0===s?void 0:s.displayName)||"Admin"}),(0,Wy.jsxs)("span",{className:"ml-1 bg-red-100 text-red-800 text-xs px-1.5 py-0.5 rounded-full flex items-center",children:[(0,Wy.jsx)(qj,{className:"w-3 h-3 mr-0.5"}),"Admin"]})]}),(0,Wy.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null===s||void 0===s?void 0:s.email})]})]}),(0,Wy.jsx)("button",{onClick:c,className:"p-2 rounded-md text-gray-500 hover:text-primary-600 hover:bg-gray-100",title:"Logout",children:(0,Wy.jsx)(Lj,{className:"w-5 h-5"})})]})})})]})};const tF=function(e){let{children:t}=e;return(0,Wy.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,Wy.jsx)(eF,{}),(0,Wy.jsx)("div",{className:"flex-1 overflow-auto",children:(0,Wy.jsx)("main",{className:"p-6 dashboard-container",children:t})})]})};const nF=function(){var e,n,r,i,s,a,o,l,u,d,h,f,m,p,g,y,v,x,b,w,k;const{currentUser:N,userProfile:S}=qy(),[_,j]=(0,t.useState)([]),[E,C]=(0,t.useState)(!0),[T,P]=(0,t.useState)(""),[A,I]=(0,t.useState)(""),[D,R]=(0,t.useState)("all"),[M,L]=(0,t.useState)(null),[O,F]=(0,t.useState)(!1),[V,U]=(0,t.useState)(""),[z,B]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(S&&"admin"!==S.role)return P("You do not have permission to access this page."),void C(!1);W()},[S]);const W=async()=>{try{C(!0);let e=[],t=[];try{const n=qg(ig(By,"users"),Gg("verificationSubmitted","==",!0)),r=await oy(n);console.log("Found ".concat(r.size," users with verificationSubmitted=true"));const i=r.docs.map(e=>e.id);console.log("Users with verification submitted:",i);const s=qg(ig(By,"verificationRequests")),a=await oy(s);console.log("Found ".concat(a.size," verification requests in verificationRequests collection")),a.forEach(e=>{console.log("Verification request: ".concat(e.id,", data:"),e.data())}),e=a.docs.map(e=>c({id:e.id},e.data())),t=e.map(e=>e.userId||e.id),t=[...new Set([...t,...i])],console.log("Combined user IDs for fetching:",t)}catch(T){console.error("Error querying for verification submissions:",T)}const n=qg(ig(By,"users"),Gg("role","==","owner")),r=await oy(n);console.log("Found ".concat(r.size," users with role=owner"));const i=r.docs.map(t=>{const n=t.data();return console.log("Processing user ".concat(t.id,", verificationSubmitted: ").concat(n.verificationSubmitted)),c(c({id:t.id},n),{},{verificationData:e.find(e=>e.userId===t.id)||{}})}).filter(e=>e.verificationSubmitted?(console.log("Including user ".concat(e.id," with verification status: ").concat(e.verificationStatus," (verificationSubmitted=true)")),!0):t.includes(e.id)?(console.log("Including user ".concat(e.id," because they're in the verification requests list")),!0):(console.log("Excluding user ".concat(e.id,", verificationSubmitted=").concat(e.verificationSubmitted,", in userIds=").concat(t.includes(e.id))),!1));console.log("Final merchants list contains ".concat(i.length," merchants")),j(i),C(!1)}catch(T){console.error("Error fetching merchants:",T),P("Failed to load merchant data."),C(!1)}},H=_.filter(e=>{var t,n,r;const i=(null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase().includes(A.toLowerCase()))||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(A.toLowerCase()))||(null===(r=e.businessName)||void 0===r?void 0:r.toLowerCase().includes(A.toLowerCase()));let s=!0;return"all"!==D&&(s=e.verificationStatus===D),i&&s}),q=e=>{switch(e){case"approved":return(0,Wy.jsxs)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[(0,Wy.jsx)(fj,{className:"mr-1"})," Verified"]});case"rejected":return(0,Wy.jsxs)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:[(0,Wy.jsx)(tE,{className:"mr-1"})," Rejected"]});default:return(0,Wy.jsxs)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[(0,Wy.jsx)(oj,{className:"mr-1"})," Pending"]})}};return T&&!E?(0,Wy.jsx)(tF,{children:(0,Wy.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Wy.jsxs)("div",{className:"text-center p-6 bg-white rounded-lg shadow-md",children:[(0,Wy.jsx)(oj,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:T})]})})}):(0,Wy.jsxs)(tF,{children:[(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("h1",{className:"text-2xl font-display font-bold text-gray-900",children:"Admin Dashboard"}),(0,Wy.jsx)("p",{className:"text-gray-600",children:"Manage merchant verification requests and accounts"})]}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 bg-blue-100 rounded-md p-3",children:(0,Wy.jsx)(eE,{className:"h-6 w-6 text-blue-600"})}),(0,Wy.jsxs)("div",{className:"ml-5",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Total Merchants"}),(0,Wy.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:E?"...":_.length})]})]})}),(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 bg-yellow-100 rounded-md p-3",children:(0,Wy.jsx)(oj,{className:"h-6 w-6 text-yellow-600"})}),(0,Wy.jsxs)("div",{className:"ml-5",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Pending Verification"}),(0,Wy.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:E?"...":_.filter(e=>"pending"===e.verificationStatus).length})]})]})}),(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 bg-green-100 rounded-md p-3",children:(0,Wy.jsx)(qj,{className:"h-6 w-6 text-green-600"})}),(0,Wy.jsxs)("div",{className:"ml-5",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Verified Merchants"}),(0,Wy.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:E?"...":_.filter(e=>e.isVerified).length})]})]})})]}),(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6 border border-gray-200",children:(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[(0,Wy.jsxs)("div",{className:"relative flex-grow",children:[(0,Wy.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Wy.jsx)(Bj,{className:"text-gray-400"})}),(0,Wy.jsx)("input",{type:"text",placeholder:"Search by name, email or business name...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:A,onChange:e=>I(e.target.value)})]}),(0,Wy.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Wy.jsxs)("div",{className:"relative",children:[(0,Wy.jsxs)("select",{className:"border border-gray-300 rounded-md pl-9 pr-3 py-2 appearance-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:D,onChange:e=>R(e.target.value),children:[(0,Wy.jsx)("option",{value:"all",children:"All Status"}),(0,Wy.jsx)("option",{value:"pending",children:"Pending"}),(0,Wy.jsx)("option",{value:"approved",children:"Verified"}),(0,Wy.jsx)("option",{value:"rejected",children:"Rejected"})]}),(0,Wy.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Wy.jsx)(jj,{className:"text-gray-400"})})]}),(0,Wy.jsx)(fE,{variant:"outline",onClick:W,children:"Refresh"})]})]})}),(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:E?(0,Wy.jsxs)("div",{className:"p-8 text-center",children:[(0,Wy.jsx)(oP,{}),(0,Wy.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading merchants..."})]}):H.length>0?(0,Wy.jsx)("div",{className:"overflow-x-auto",children:(0,Wy.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Wy.jsx)("thead",{className:"bg-gray-50",children:(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Merchant"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Business"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),(0,Wy.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Wy.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(e=>{var t,n;return(0,Wy.jsxs)("tr",{children:[(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Wy.jsxs)("div",{className:"flex items-center",children:[(0,Wy.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:(null===(t=e.displayName)||void 0===t?void 0:t.charAt(0))||"M"}),(0,Wy.jsxs)("div",{className:"ml-4",children:[(0,Wy.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.displayName}),(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,Wy.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-900",children:e.businessName||"Not specified"}),(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:e.businessType||"N/A"})]}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:q(e.verificationStatus)}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null!==(n=e.verificationSubmittedAt)&&void 0!==n&&n.seconds?new Date(1e3*e.verificationSubmittedAt.seconds).toLocaleDateString():"N/A"}),(0,Wy.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Wy.jsxs)("div",{className:"flex space-x-2",children:[(0,Wy.jsx)("button",{onClick:()=>(async e=>{console.log("Viewing merchant details:",e.id);try{const t=await sy(sg(By,"users",e.id));if(t.exists()){const n=t.data();let r={};try{const t=await sy(sg(By,"verificationRequests",e.id));t.exists()&&(r=t.data())}catch(T){console.error("Error fetching verification data:",T)}L(c(c({},n),{},{id:e.id,verificationData:r})),F(!0)}else console.error("User document not found")}catch(T){console.error("Error fetching merchant details:",T)}})(e),className:"text-primary-600 hover:text-primary-900",title:"View Details",children:(0,Wy.jsx)(Nj,{})}),e.isVerified&&(0,Wy.jsx)("button",{onClick:()=>(async e=>{if(e)try{await cy(sg(By,"users",e),{isVerified:!1,isSuspended:!0,suspendedAt:fy(),suspendedBy:N.uid}),await W()}catch(T){console.error("Error suspending merchant:",T),P("Failed to suspend merchant.")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Suspend Account",children:(0,Wy.jsx)(Jj,{})})]})})]},e.id)})})]})}):(0,Wy.jsx)("div",{className:"p-8 text-center",children:(0,Wy.jsx)("p",{className:"text-gray-500",children:"No merchants found matching your criteria."})})}),O&&M&&(0,Wy.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 max-w-3xl mx-4 w-full max-h-[90vh] overflow-y-auto",children:[(0,Wy.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Wy.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Merchant Verification Details"}),(0,Wy.jsxs)("button",{onClick:()=>{F(!1),L(null),U("")},className:"text-gray-400 hover:text-gray-500",children:[(0,Wy.jsx)("span",{className:"sr-only",children:"Close"}),(0,Wy.jsx)(tE,{className:"h-6 w-6"})]})]}),(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Merchant Information"}),(0,Wy.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,Wy.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Wy.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 text-lg font-medium",children:(null===(e=M.displayName)||void 0===e?void 0:e.charAt(0))||"M"}),(0,Wy.jsxs)("div",{className:"ml-4",children:[(0,Wy.jsx)("div",{className:"font-medium text-gray-900",children:M.displayName}),(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:M.email})]})]}),(0,Wy.jsxs)("div",{className:"space-y-2",children:[(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"User ID:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:M.id})]}),(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"Account Created:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:null!==(n=M.createdAt)&&void 0!==n&&n.seconds?new Date(1e3*M.createdAt.seconds).toLocaleDateString():"N/A"})]}),(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"Verification Status:"}),(0,Wy.jsx)("span",{children:q(M.verificationStatus)})]})]})]})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Business Information"}),(0,Wy.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,Wy.jsxs)("div",{className:"space-y-2",children:[(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"Business Name:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:M.businessName||(null===(r=M.verificationData)||void 0===r?void 0:r.businessName)||"Not specified"})]}),(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"Business Type:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:M.businessType||(null===(i=M.verificationData)||void 0===i?void 0:i.businessType)||"Not specified"})]}),(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"Registration Number:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:M.registrationNumber||(null===(s=M.verificationData)||void 0===s?void 0:s.registrationNumber)||"Not specified"})]}),(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"Website:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:M.website||null!==(a=M.verificationData)&&void 0!==a&&a.website?(0,Wy.jsx)("a",{href:M.website||(null===(o=M.verificationData)||void 0===o?void 0:o.website),target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:M.website||(null===(l=M.verificationData)||void 0===l?void 0:l.website)}):"Not specified"})]}),(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"Verification Submitted:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:M.verificationSubmitted?"Yes":"No"})]}),(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-500",children:"Submission Date:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:null!==(u=M.verificationSubmittedAt)&&void 0!==u&&u.seconds?new Date(1e3*M.verificationSubmittedAt.seconds).toLocaleDateString():null!==(d=M.verificationData)&&void 0!==d&&null!==(h=d.submittedAt)&&void 0!==h&&h.seconds?new Date(1e3*M.verificationData.submittedAt.seconds).toLocaleDateString():"N/A"})]})]})})]})]}),(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Contact Information"}),(0,Wy.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:"Phone:"}),(0,Wy.jsx)("div",{className:"font-medium",children:M.contactPhone||(null===(f=M.verificationData)||void 0===f?void 0:f.contactPhone)||"Not specified"})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:"Email:"}),(0,Wy.jsx)("div",{className:"font-medium",children:M.contactEmail||(null===(m=M.verificationData)||void 0===m?void 0:m.contactEmail)||M.email})]}),(0,Wy.jsxs)("div",{className:"md:col-span-2",children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:"Address:"}),(0,Wy.jsx)("div",{className:"font-medium",children:M.address||null!==(p=M.verificationData)&&void 0!==p&&p.address?"".concat(M.address||(null===(g=M.verificationData)||void 0===g?void 0:g.address)||"",", \n                       ").concat(M.city||(null===(y=M.verificationData)||void 0===y?void 0:y.city)||"",", \n                       ").concat(M.country||(null===(v=M.verificationData)||void 0===v?void 0:v.country)||""):"Not specified"})]})]})})]}),(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Identity Verification"}),(0,Wy.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,Wy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:"ID Type:"}),(0,Wy.jsx)("div",{className:"font-medium",children:M.idType||(null===(x=M.verificationData)||void 0===x?void 0:x.idType)||"Not specified"})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:"ID Number:"}),(0,Wy.jsx)("div",{className:"font-medium",children:M.idNumber||(null===(b=M.verificationData)||void 0===b?void 0:b.idNumber)||"Not specified"})]})]}),(M.description||(null===(w=M.verificationData)||void 0===w?void 0:w.description))&&(0,Wy.jsxs)("div",{className:"mt-4",children:[(0,Wy.jsx)("div",{className:"text-sm text-gray-500",children:"Business Description:"}),(0,Wy.jsx)("div",{className:"mt-1 p-2 bg-white rounded border border-gray-200",children:M.description||(null===(k=M.verificationData)||void 0===k?void 0:k.description)})]})]})]}),"pending"===M.verificationStatus&&(0,Wy.jsxs)("div",{className:"border-t pt-4",children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Review Decision"}),(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Wy.jsxs)("div",{className:"flex-grow",children:[(0,Wy.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rejection Reason (required if rejecting)"}),(0,Wy.jsx)("textarea",{className:"w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",rows:3,value:V,onChange:e=>U(e.target.value),placeholder:"Explain why this verification is being rejected..."})]}),(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 md:self-end",children:[(0,Wy.jsx)(fE,{variant:"outline",onClick:()=>{F(!1),L(null),U("")},disabled:z,children:"Cancel"}),(0,Wy.jsx)(fE,{variant:"danger",onClick:async()=>{if(M&&V){B(!0);try{await cy(sg(By,"users",M.id),{isVerified:!1,verificationStatus:"rejected",verificationRejectedAt:fy(),verificationRejectedBy:N.uid,rejectionReason:V}),await cy(sg(By,"verificationRequests",M.id),{status:"rejected",rejectionReason:V,updatedAt:fy(),updatedBy:N.uid});try{console.log("Sending rejection notification to merchant ".concat(M.id," with reason: ").concat(V))}catch(e){console.error("Error sending notification:",e)}await W(),F(!1),L(null),U("")}catch(T){console.error("Error rejecting merchant:",T),P("Failed to reject merchant.")}finally{B(!1)}}},disabled:z||!V.trim(),children:z?"Processing...":"Reject"}),(0,Wy.jsx)(fE,{onClick:async()=>{if(M){B(!0);try{await cy(sg(By,"users",M.id),{isVerified:!0,verificationStatus:"approved",verificationApprovedAt:fy(),verificationApprovedBy:N.uid}),await cy(sg(By,"verificationRequests",M.id),{status:"approved",updatedAt:fy(),updatedBy:N.uid});try{console.log("Sending approval notification to merchant ".concat(M.id))}catch(e){console.error("Error sending notification:",e)}await W(),F(!1),L(null)}catch(T){console.error("Error approving merchant:",T),P("Failed to approve merchant.")}finally{B(!1)}}},disabled:z,children:z?"Processing...":"Approve & Verify"})]})]})]}),"rejected"===M.verificationStatus&&M.rejectionReason&&(0,Wy.jsxs)("div",{className:"border-t pt-4",children:[(0,Wy.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Rejection Reason"}),(0,Wy.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 text-red-800",children:M.rejectionReason})]})]})})]})},rF=async e=>{try{const{amount:t,currency:n="usd",description:r,metadata:i={},transactionId:s,merchantId:a}=e;if(!a)throw new Error("Merchant ID is required to create a payment intent");return(await ZT.post("".concat("http://localhost:8000","/stripe/create-payment-intent"),{amount:t,currency:n,description:r,metadata:i,transactionId:s,merchantId:a})).data}catch(n){var t;throw console.error("Error creating Stripe payment intent:",n),(null===(t=n.response)||void 0===t?void 0:t.data)||n}},iF="http://localhost:8000",sF=async e=>{try{const{amount:t,email:n,reference:r,callbackUrl:i,metadata:s={},merchantId:a}=e;if(!a)throw new Error("Merchant ID is required to initialize a Paystack transaction");return(await ZT.post("".concat(iF,"/paystack/initialize"),{amount:t,email:n,reference:r,callbackUrl:i,metadata:s,merchantId:a})).data}catch(n){var t;throw console.error("Error initializing Paystack transaction:",n),(null===(t=n.response)||void 0===t?void 0:t.data)||n}},aF=async(e,t)=>{try{if(!t)throw new Error("Merchant ID is required to verify a Paystack transaction");return(await ZT.get("".concat(iF,"/paystack/verify/").concat(e,"?merchantId=").concat(t))).data}catch(r){var n;throw console.error("Error verifying Paystack transaction:",r),(null===(n=r.response)||void 0===n?void 0:n.data)||r}},oF=e=>new Promise((t,n)=>{const r=window.open(e,"PaystackCheckout","width=600,height=600,left=100,top=100");if(!r||r.closed||"undefined"===typeof r.closed)return void n(new Error("Popup was blocked. Please allow popups for this website."));const i=setInterval(()=>{r.closed&&(clearInterval(i),t({status:"closed"}))},1e3);setTimeout(()=>{clearInterval(i),r.closed||r.close(),n(new Error("Payment timed out. Please try again."))},6e5)});var lF,cF=n(393),uF="basil",dF="https://js.stripe.com",hF="".concat(dF,"/").concat(uF,"/stripe.js"),fF=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,mF=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,pF="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",gF=function(e){return fF.test(e)||mF.test(e)},yF=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(hF).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},vF=null,xF=null,bF=null,wF=function(e){return null!==vF?vF:(vF=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(pF),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(dF,'"]')),t=0;t<e.length;t++){var n=e[t];if(gF(n.src))return n}return null}();if(r&&e)console.warn(pF);else if(r){if(r&&null!==bF&&null!==xF){var i;r.removeEventListener("load",bF),r.removeEventListener("error",xF),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=yF(e)}}else r=yF(e);bF=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),xF=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",bF),r.addEventListener("error",xF)}catch(s){return void n(s)}else t(null)}),vF.catch(function(e){return vF=null,Promise.reject(e)}))},kF=!1,NF=function(){return lF||(lF=wF(null).catch(function(e){return lF=null,Promise.reject(e)}))};Promise.resolve().then(function(){return NF()}).catch(function(e){kF||console.warn(e)});const SF={style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"},iconColor:"#4f46e5"},invalid:{color:"#fa755a",iconColor:"#fa755a"}},hidePostalCode:!0,iconStyle:"solid"},_F=e=>{let{clientSecret:n,onSuccess:r,onError:i,amount:s,currency:a}=e;const o=(0,cF.useStripe)(),l=(0,cF.useElements)(),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(""),[p,g]=(0,t.useState)("");return(0,Wy.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o&&l)if(f&&f.includes("@"))if(p.trim()){h(!0),u(null);try{const{error:e,paymentIntent:t}=await o.confirmCardPayment(n,{payment_method:{card:l.getElement(cF.CardElement),billing_details:{name:p,email:f}}});e?(u(e.message),i(e)):"succeeded"===t.status?r(t):(u("Payment processing failed. Please try again."),i(new Error("Payment processing failed")))}catch(t){u("An unexpected error occurred. Please try again."),i(t)}finally{h(!1)}}else u("Please enter your name");else u("Please enter a valid email address")},className:"space-y-4",children:[(0,Wy.jsxs)("div",{className:"space-y-4",children:[(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Wy.jsx)("input",{type:"text",id:"name",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"John Doe",value:p,onChange:e=>g(e.target.value),required:!0})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Wy.jsx)("input",{type:"email",id:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"you@example.com",value:f,onChange:e=>m(e.target.value),required:!0})]}),(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)("label",{htmlFor:"card",className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Details"}),(0,Wy.jsx)("div",{className:"border border-gray-300 rounded-md p-4 bg-white shadow-sm",children:(0,Wy.jsx)(cF.CardElement,{id:"card",options:SF})}),(0,Wy.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,Wy.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Wy.jsx)("img",{src:"https://cdn.jsdelivr.net/gh/stripe-samples/card-payment-form@main/static/visa.svg",alt:"Visa",className:"h-6"}),(0,Wy.jsx)("img",{src:"https://cdn.jsdelivr.net/gh/stripe-samples/card-payment-form@main/static/mastercard.svg",alt:"Mastercard",className:"h-6"}),(0,Wy.jsx)("img",{src:"https://cdn.jsdelivr.net/gh/stripe-samples/card-payment-form@main/static/amex.svg",alt:"American Express",className:"h-6"})]}),(0,Wy.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[(0,Wy.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-3 h-3 mr-1",children:(0,Wy.jsx)("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z",clipRule:"evenodd"})}),"Secure payment"]})]})]})]}),c&&(0,Wy.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md flex items-start",children:[(0,Wy.jsx)(oj,{className:"text-red-500 mt-0.5 mr-2 flex-shrink-0"}),(0,Wy.jsx)("span",{className:"text-red-800 text-sm",children:c})]}),(0,Wy.jsx)(fE,{type:"submit",variant:"primary",fullWidth:!0,disabled:!o||d,children:d?"Processing...":"Pay ".concat(a," ").concat(s.toLocaleString())})]})};const jF=function(e){let{linkData:t}=e;return(0,Wy.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,Wy.jsx)("header",{className:"bg-white shadow-sm",children:(0,Wy.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,Wy.jsx)("div",{className:"flex items-center",children:(0,Wy.jsx)(yt,{to:"/",className:"text-primary-600 font-display font-bold text-2xl",children:"PayNow"})})})}),(0,Wy.jsx)("main",{className:"flex-1 flex items-center justify-center p-4",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"bg-white rounded-lg shadow-md p-8 text-center border border-gray-100 max-w-md w-full",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:(0,Wy.jsx)(Rj,{className:"h-8 w-8 text-gray-600"})}),(0,Wy.jsx)("h2",{className:"text-2xl font-display font-bold text-gray-900 mb-2",children:"Payment Link Inactive"}),(0,Wy.jsxs)("p",{className:"text-gray-600 mb-6",children:["This payment link is currently inactive and cannot be used for payments.",(null===t||void 0===t?void 0:t.description)&&(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsx)("br",{}),(0,Wy.jsx)("span",{className:"font-medium",children:t.description})]})]}),(null===t||void 0===t?void 0:t.amount)&&(0,Wy.jsxs)("div",{className:"bg-gray-50 border border-gray-100 rounded-md p-4 mb-6",children:[(0,Wy.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600",children:"Amount:"}),(0,Wy.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[t.currency||"KES"," ",t.amount.toLocaleString()]})]}),t.reference&&(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600",children:"Reference:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.reference})]})]}),(0,Wy.jsx)(yt,{to:"/",children:(0,Wy.jsxs)(fE,{variant:"primary",children:[(0,Wy.jsx)(lj,{className:"mr-2"})," Return to Homepage"]})})]})}),(0,Wy.jsx)("footer",{className:"bg-white border-t mt-auto",children:(0,Wy.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,Wy.jsxs)("p",{className:"text-sm text-gray-500",children:["\xa9 ",(new Date).getFullYear()," PayNow. All rights reserved."]}),(0,Wy.jsxs)("div",{className:"mt-2 md:mt-0 flex space-x-4",children:[(0,Wy.jsx)(yt,{to:"/terms",className:"text-sm text-gray-500 hover:text-primary-600",children:"Terms of Service"}),(0,Wy.jsx)(yt,{to:"/privacy",className:"text-sm text-gray-500 hover:text-primary-600",children:"Privacy Policy"}),(0,Wy.jsx)(yt,{to:"/contact",className:"text-sm text-gray-500 hover:text-primary-600",children:"Contact"})]})]})})})]})},EF=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];kF=!0;var r=Date.now();return NF().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),i=function(e){return 3===e?"v3":e}(e.version),s=uF;r&&i!==s&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.8.0"," expected Stripe.js@").concat(s,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.8.0",startTime:t})}(a,n),a}(e,t,r)})}("pk_test_TYooMQauvdEDq54NiTphI7jx");const CF=function(){const{slug:e}=pe(),[n,r]=(0,t.useState)(null),[i,s]=(0,t.useState)(!0),[a,o]=(0,t.useState)(""),[l,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(""),[f,m]=(0,t.useState)("initial"),[p,g]=(0,t.useState)(!1),[y,v]=(0,t.useState)(!1),[x,b]=(0,t.useState)(""),[w,k]=(0,t.useState)(null),[N,S]=(0,t.useState)(null),[_,j]=(0,t.useState)(null),[E,C]=(0,t.useState)(null),[T,P]=(0,t.useState)("mpesa"),[A,I]=(0,t.useState)(null),[D,R]=(0,t.useState)(null),[M,L]=(0,t.useState)(null);(0,t.useEffect)(()=>((async()=>{try{s(!0);const t=qg(ig(By,"paymentLinks"),Gg("slug","==",e)),n=await oy(t);if(n.empty)return o("Payment link not found or has expired."),void s(!1);const i=n.docs[0],l=c({id:i.id},i.data());if(l.ownerUid)try{const e=await sy(sg(By,"users",l.ownerUid));if(e.exists()){const t=e.data();l.ownerName=t.businessName||t.displayName,l.ownerVerified=t.isVerified||!1}}catch(a){console.error("Error fetching owner details:",a)}r(l),l.expiryDate&&l.expiryDate.seconds<Date.now()/1e3&&g(!0),"inactive"===l.status&&v(!0),l.singleUse&&l.used&&o("This payment link has already been used."),l.allowedPaymentMethods&&l.allowedPaymentMethods.length>0?P(l.allowedPaymentMethods[0]):P("mpesa"),s(!1)}catch(a){console.error("Error fetching payment link:",a),o("An error occurred while fetching the payment link."),s(!1)}})(),()=>{E&&clearInterval(E)}),[e]);const O=async()=>{const e={linkId:n.id,ownerUid:n.ownerUid,amount:n.amount,description:n.description,status:"initiated",payerPhone:l||"",payerEmail:d||"",createdAt:fy(),currency:n.currency||"KES",reference:n.reference||"",paymentMethod:T},t=await uy(ig(By,"transactions"),e);return j(t.id),t.id},F=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mpesa";try{const i=sg(By,"transactions",e),s={status:"success",completedAt:fy(),paymentProcessor:r};switch(r){case"mpesa":s.mpesaReceiptNumber=t;break;case"stripe":s.stripePaymentId=t;break;case"paystack":s.paystackReference=t}if(await cy(i,s),n.singleUse){const e=sg(By,"paymentLinks",n.id);await cy(e,{used:!0,lastUsedAt:fy()})}}catch(a){console.error("Error updating transaction:",a)}},V=async(e,t)=>{try{const n=sg(By,"transactions",e);await cy(n,{status:"failed",failureReason:t,updatedAt:fy()})}catch(a){console.error("Error updating transaction:",a)}};return i?(0,Wy.jsx)(oP,{}):y?(0,Wy.jsx)(jF,{linkData:n}):a&&"initial"===f?(0,Wy.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:(0,Wy.jsx)("div",{className:"bg-white rounded-lg shadow-md p-8 max-w-md w-full",children:(0,Wy.jsxs)("div",{className:"text-center",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4",children:(0,Wy.jsx)(oj,{className:"h-8 w-8 text-red-600"})}),(0,Wy.jsx)("h2",{className:"text-2xl font-display font-bold text-gray-900 mb-2",children:"Payment Link Error"}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,Wy.jsx)(yt,{to:"/",children:(0,Wy.jsxs)(fE,{variant:"primary",children:[(0,Wy.jsx)(lj,{className:"mr-2"})," Return to Homepage"]})})]})})}):(0,Wy.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,Wy.jsx)("header",{className:"bg-white shadow-sm",children:(0,Wy.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,Wy.jsx)("div",{className:"flex items-center",children:(0,Wy.jsx)(yt,{to:"/",className:"text-primary-600 font-display font-bold text-2xl",children:"PayNow"})})})}),(0,Wy.jsx)("main",{className:"flex-1 flex items-center justify-center p-4",children:(0,Wy.jsx)("div",{className:"max-w-3xl w-full",children:(0,Wy.jsxs)(cE,{mode:"wait",children:["initial"===f&&!p&&(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:[(0,Wy.jsxs)("div",{className:"mb-6 pb-6 border-b",children:[(0,Wy.jsx)("h1",{className:"text-xl font-display font-bold text-gray-900 mb-1",children:n.description}),(0,Wy.jsxs)("p",{className:"text-gray-600 text-sm flex items-center",children:["Payment request from",(0,Wy.jsx)("span",{className:"font-medium ml-1",children:n.ownerName||"PayNow"}),n.ownerVerified&&(0,Wy.jsxs)("span",{className:"ml-1 bg-green-100 text-green-800 text-xs px-1.5 py-0.5 rounded-full flex items-center",children:[(0,Wy.jsx)(qj,{className:"w-3 h-3 mr-0.5"}),"Verified"]})]})]}),(0,Wy.jsxs)("div",{className:"mb-6",children:[(0,Wy.jsx)("p",{className:"text-sm text-gray-600",children:"Amount"}),(0,Wy.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:[n.currency," ",n.amount.toLocaleString()]})]}),n.expiryDate&&(0,Wy.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-4",children:[(0,Wy.jsx)(yj,{className:"mr-2 text-gray-400"}),(0,Wy.jsxs)("span",{children:["Expires on ",new Date(1e3*n.expiryDate.seconds).toLocaleDateString()]})]}),(0,Wy.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Wy.jsx)(qj,{className:"mr-2 text-gray-400"}),(0,Wy.jsx)("span",{children:"Secure payment via PayNow"})]}),n.ownerVerified&&(0,Wy.jsx)("div",{className:"mt-3 flex items-center",children:(0,Wy.jsxs)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full flex items-center",children:[(0,Wy.jsx)(qj,{className:"w-3 h-3 mr-1"}),"Verified Merchant"]})})]}),(0,Wy.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:[(0,Wy.jsx)("h2",{className:"text-lg font-display font-bold text-gray-900 mb-4",children:"Choose a payment method"}),a&&(0,Wy.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-start",children:[(0,Wy.jsx)(oj,{className:"text-red-500 mt-0.5 mr-2 flex-shrink-0"}),(0,Wy.jsx)("span",{className:"text-red-800 text-sm",children:a})]}),(0,Wy.jsx)("div",{className:"mb-6",children:(0,Wy.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(!n.allowedPaymentMethods||n.allowedPaymentMethods.includes("mpesa"))&&(0,Wy.jsxs)("button",{type:"button",onClick:()=>P("mpesa"),className:"flex flex-col items-center justify-center p-3 rounded-md border ".concat("mpesa"===T?"border-primary-500 bg-primary-50":"border-gray-200 hover:bg-gray-50"),children:[(0,Wy.jsx)(iP,{className:"text-2xl ".concat("mpesa"===T?"text-primary-600":"text-gray-500")}),(0,Wy.jsx)("span",{className:"text-sm mt-2 ".concat("mpesa"===T?"text-primary-600 font-medium":"text-gray-600"),children:"M-Pesa"})]}),(!n.allowedPaymentMethods||n.allowedPaymentMethods.includes("card"))&&(0,Wy.jsxs)("button",{type:"button",onClick:()=>P("card"),className:"flex flex-col items-center justify-center p-3 rounded-md border ".concat("card"===T?"border-primary-500 bg-primary-50":"border-gray-200 hover:bg-gray-50"),children:[(0,Wy.jsx)(rP,{className:"text-2xl ".concat("card"===T?"text-primary-600":"text-gray-500")}),(0,Wy.jsx)("span",{className:"text-sm mt-2 ".concat("card"===T?"text-primary-600 font-medium":"text-gray-600"),children:"Card"})]}),(!n.allowedPaymentMethods||n.allowedPaymentMethods.includes("paystack"))&&(0,Wy.jsxs)("button",{type:"button",onClick:()=>P("paystack"),className:"flex flex-col items-center justify-center p-3 rounded-md border ".concat("paystack"===T?"border-primary-500 bg-primary-50":"border-gray-200 hover:bg-gray-50"),children:[(0,Wy.jsx)(sP,{className:"text-2xl ".concat("paystack"===T?"text-primary-600":"text-gray-500")}),(0,Wy.jsx)("span",{className:"text-sm mt-2 ".concat("paystack"===T?"text-primary-600 font-medium":"text-gray-600"),children:"Paystack"})]})]})}),(0,Wy.jsxs)("form",{onSubmit:async e=>{switch(e.preventDefault(),T){case"mpesa":await(async()=>{if(fP(l)){o(""),m("processing"),b("Initiating M-Pesa STK Push...");try{const e=await O(),t=await uP(l,n.amount,e);if("0"===t.ResponseCode){k(t.CheckoutRequestID),b("STK Push sent to your phone. Please enter your M-Pesa PIN to complete payment.");const n=setInterval(async()=>{try{const r=await dP(t.CheckoutRequestID);if(r.isSuccessful){clearInterval(n);const t="PJE"+Math.floor(1e6+9e6*Math.random());S(t),await F(e,t,"mpesa"),m("success")}else r.isCanceled?(clearInterval(n),m("failed"),o("Transaction was canceled. Please try again."),await V(e,"canceled")):r.isProcessing||"4999"===r.ResultCode||4999===r.ResultCode?b("Payment is being processed. Please wait..."):r.ResultCode&&"0"!==r.ResultCode&&(clearInterval(n),m("failed"),o(r.ResultDesc||"Payment failed. Please try again."),await V(e,r.ResultDesc))}catch(a){console.error("Error checking payment status:",a)}},5e3);C(n)}else m("failed"),o(t.ResponseDescription||"Failed to initiate payment. Please try again."),await V(e,"STK push failed")}catch(a){console.error("Error processing payment:",a),m("failed"),o("An error occurred while processing your payment. Please try again.")}}else o("Please enter a valid Kenyan phone number")})();break;case"card":await(async()=>{if(d&&d.includes("@")){o(""),m("processing"),b("Initializing card payment...");try{const e=await O();j(e);const t=await rF({amount:n.amount,currency:n.currency||"usd",description:n.description,metadata:{paymentLinkId:n.id,transactionId:e},transactionId:e,merchantId:n.ownerUid});"0"===t.ResponseCode?(I(t.clientSecret),b("Please enter your card details to complete payment.")):(m("failed"),o(t.errorMessage||"Failed to initialize card payment. Please try again."),await V(e,"Failed to create payment intent"))}catch(a){console.error("Error initializing card payment:",a),m("failed"),o("An error occurred while initializing your payment. Please try again.")}}else o("Please enter a valid email address")})();break;case"paystack":await(async()=>{if(d&&d.includes("@")){o(""),m("processing"),b("Initializing Paystack payment...");try{const t=await O();j(t);const r="paynow-".concat(t,"-").concat(Date.now());L(r);const i=await sF({amount:n.amount,email:d,reference:r,callbackUrl:"".concat(window.location.origin,"/payment/verify?reference=").concat(r,"&merchantId=").concat(n.ownerUid),metadata:{paymentLinkId:n.id,transactionId:t},merchantId:n.ownerUid});if("0"===i.ResponseCode){R(i.authorization_url),b("Redirecting to Paystack checkout...");try{await oF(i.authorization_url);const e=await aF(r,n.ownerUid);"0"===e.ResponseCode&&"success"===e.status?(await F(t,r,"paystack"),m("success")):(m("failed"),o(e.message||"Payment was not completed. Please try again."),await V(t,"Payment verification failed"))}catch(e){console.error("Paystack popup error:",e),m("failed"),o(e.message||"Payment window was closed. Please try again."),await V(t,"Payment window closed")}}else m("failed"),o(i.errorMessage||"Failed to initialize Paystack payment. Please try again."),await V(t,"Failed to initialize Paystack")}catch(a){console.error("Error initializing Paystack payment:",a),m("failed"),o("An error occurred while initializing your payment. Please try again.")}}else o("Please enter a valid email address")})();break;default:o("Please select a payment method")}},children:["mpesa"===T&&(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)(bE,{label:"Phone Number",type:"text",id:"phoneNumber",placeholder:"e.g. 254712345678",value:l,onChange:e=>{let t=e.target.value;u(hP(t))},required:!0,icon:(0,Wy.jsx)(Vj,{className:"text-gray-400"})}),(0,Wy.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Enter your phone number in the format 254XXXXXXXXX"})]}),("card"===T||"paystack"===T)&&(0,Wy.jsxs)("div",{children:[(0,Wy.jsx)(bE,{label:"Email Address",type:"email",id:"email",placeholder:"you@example.com",value:d,onChange:e=>{h(e.target.value)},required:!0,icon:(0,Wy.jsx)(Oj,{className:"text-gray-400"})}),(0,Wy.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Your receipt will be sent to this email address"})]}),(0,Wy.jsxs)(fE,{type:"submit",variant:"primary",fullWidth:!0,children:["Pay ",n.currency," ",n.amount.toLocaleString()]}),(0,Wy.jsxs)("p",{className:"mt-4 text-xs text-gray-500 text-center",children:['By clicking "Pay", you agree to our'," ",(0,Wy.jsx)(yt,{to:"/terms",className:"text-primary-600 hover:text-primary-500",children:"Terms of Service"})]})]})]})]},"payment-form"),"processing"===f&&(0,Wy.jsx)(Y_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"bg-white rounded-lg shadow-md p-8 text-center border border-gray-100",children:"card"===T&&A?(0,Wy.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,Wy.jsx)("h2",{className:"text-2xl font-display font-bold text-gray-900 mb-4",children:"Enter Card Details"}),(0,Wy.jsx)(cF.Elements,{stripe:EF,children:(0,Wy.jsx)(_F,{clientSecret:A,onSuccess:async e=>{try{const t=_;if(!t)return console.error("No transaction ID available for successful payment"),o("Payment was processed but transaction details are missing. Please contact support."),void m("failed");await F(t,e.id,"stripe"),m("success")}catch(a){console.error("Error updating transaction after successful payment:",a)}},onError:e=>{console.error("Stripe payment error:",e),m("failed"),"invalid_request_error"===e.type&&"resource_missing"===e.code?o("The payment session has expired. Please try again with a new payment."):o(e.message||"Payment failed. Please try again."),_&&V(_,"resource_missing"===e.code?"Payment intent not found or expired":e.message||"Card payment failed")},amount:n.amount,currency:n.currency||"USD"})})]}):(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsx)("div",{className:"inline-block mb-4",children:(0,Wy.jsx)("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})}),(0,Wy.jsx)("h2",{className:"text-2xl font-display font-bold text-gray-900 mb-2",children:"Processing Payment"}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-6",children:x}),(0,Wy.jsx)("div",{className:"bg-yellow-50 border border-yellow-100 rounded-md p-4",children:(0,Wy.jsx)("p",{className:"text-sm text-yellow-800",children:"Please do not close this page until the payment is complete."})})]})},"processing"),"success"===f&&(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"bg-white rounded-lg shadow-md p-8 text-center border border-gray-100",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 mb-4",children:(0,Wy.jsx)(fj,{className:"h-8 w-8 text-green-600"})}),(0,Wy.jsx)("h2",{className:"text-2xl font-display font-bold text-green-600 mb-4",children:"Thank You For Your Payment!"}),(0,Wy.jsxs)("p",{className:"text-gray-700 text-lg mb-2",children:["Your payment of ",(0,Wy.jsxs)("span",{className:"font-medium",children:[n.currency," ",n.amount.toLocaleString()]})," has been processed successfully."]}),(0,Wy.jsxs)("p",{className:"text-gray-600 mb-6",children:["mpesa"===T&&"A receipt has been sent to your phone number via SMS.","card"===T&&"A receipt has been sent to your email address.","paystack"===T&&"A receipt has been sent to your email address."]}),(0,Wy.jsxs)("div",{className:"bg-gray-50 border border-gray-100 rounded-md p-4 mb-6",children:[(0,Wy.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600",children:"Transaction ID:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:_||"TXN".concat(Math.floor(1e8+9e8*Math.random()))})]}),"mpesa"===T&&(0,Wy.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600",children:"M-Pesa Receipt:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:N||"PJE".concat(Math.floor(1e6+9e6*Math.random()))})]}),"card"===T&&(0,Wy.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600",children:"Card Payment:"}),(0,Wy.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[(0,Wy.jsx)(rP,{className:"inline-block mr-1"})," \u2022\u2022\u2022\u2022",Math.floor(1e3+9e3*Math.random())]})]}),"paystack"===T&&(0,Wy.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600",children:"Paystack Reference:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:M||"REF".concat(Math.floor(1e7+9e7*Math.random()))})]}),(0,Wy.jsxs)("div",{className:"flex justify-between",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600",children:"Date:"}),(0,Wy.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(new Date).toLocaleString()})]}),(0,Wy.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,Wy.jsx)("span",{className:"text-sm text-gray-600",children:"Payment Method:"}),(0,Wy.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["mpesa"===T&&"M-Pesa","card"===T&&"Credit/Debit Card","paystack"===T&&"Paystack"]})]})]}),(0,Wy.jsx)("div",{className:"bg-green-50 border border-green-100 rounded-md p-4 mb-6",children:(0,Wy.jsxs)("p",{className:"text-green-800",children:[(0,Wy.jsx)(fj,{className:"inline-block mr-2"}),"Your transaction was completed successfully. Thank you for using our service!"]})})]},"success"),"failed"===f&&(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"bg-white rounded-lg shadow-md p-8 text-center border border-gray-100",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4",children:(0,Wy.jsx)(oj,{className:"h-8 w-8 text-red-600"})}),(0,Wy.jsx)("h2",{className:"text-2xl font-display font-bold text-gray-900 mb-2",children:"Payment Failed"}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-6",children:a||"Your payment could not be processed. Please try again."}),(0,Wy.jsx)("div",{className:"space-y-3",children:(0,Wy.jsx)(fE,{variant:"primary",fullWidth:!0,onClick:()=>m("initial"),children:"Try Again"})})]},"failed"),p&&(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"bg-white rounded-lg shadow-md p-8 text-center border border-gray-100",children:[(0,Wy.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4",children:(0,Wy.jsx)(yj,{className:"h-8 w-8 text-red-600"})}),(0,Wy.jsx)("h2",{className:"text-2xl font-display font-bold text-gray-900 mb-2",children:"Payment Link Expired"}),(0,Wy.jsx)("p",{className:"text-gray-600 mb-6",children:"This payment link has expired and is no longer valid."}),(0,Wy.jsx)(yt,{to:"/",children:(0,Wy.jsx)(fE,{variant:"primary",children:"Return to Homepage"})})]},"expired")]})})}),(0,Wy.jsx)("footer",{className:"bg-white border-t mt-auto",children:(0,Wy.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Wy.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,Wy.jsxs)("p",{className:"text-sm text-gray-500",children:["\xa9 ",(new Date).getFullYear()," PayNow. All rights reserved."]}),(0,Wy.jsxs)("div",{className:"mt-2 md:mt-0 flex space-x-4",children:[(0,Wy.jsx)(yt,{to:"/terms",className:"text-sm text-gray-500 hover:text-primary-600",children:"Terms of Service"}),(0,Wy.jsx)(yt,{to:"/privacy",className:"text-sm text-gray-500 hover:text-primary-600",children:"Privacy Policy"}),(0,Wy.jsx)(yt,{to:"/contact",className:"text-sm text-gray-500 hover:text-primary-600",children:"Contact"})]})]})})})]})};const TF=function(){return(0,Wy.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,Wy.jsx)(mE,{}),(0,Wy.jsx)("div",{className:"flex-grow flex items-center justify-center p-4",children:(0,Wy.jsx)("div",{className:"max-w-lg w-full text-center",children:(0,Wy.jsxs)(Y_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,Wy.jsx)("h1",{className:"text-9xl font-display font-bold text-primary-600",children:"404"}),(0,Wy.jsx)("h2",{className:"mt-4 text-3xl font-display font-bold text-gray-900",children:"Page Not Found"}),(0,Wy.jsx)("p",{className:"mt-4 text-lg text-gray-600",children:"The page you're looking for doesn't exist or has been moved."}),(0,Wy.jsx)("div",{className:"mt-8",children:(0,Wy.jsx)(yt,{to:"/",children:(0,Wy.jsxs)(fE,{variant:"primary",size:"lg",children:[(0,Wy.jsx)(lj,{className:"mr-2"})," Back to Home"]})})})]})})}),(0,Wy.jsx)(pE,{})]})};const PF=function(e){let{children:t}=e;const{currentUser:n,loading:r}=qy();return r?(0,Wy.jsx)(oP,{}):n?t:(0,Wy.jsx)(Ie,{to:"/login"})};const AF=function(e){let{children:t}=e;const{userProfile:n,loading:r}=qy();return r?null:!n||n.isVerified||n.verificationSubmitted?t:(0,Wy.jsx)(Ie,{to:"/dashboard/verification",replace:!0})};const IF=function(){const e=de().pathname;return e.includes("/dashboard")?(0,Wy.jsx)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:(0,Wy.jsxs)("div",{className:"grid grid-cols-5",children:[(0,Wy.jsxs)(yt,{to:"/dashboard",className:"flex flex-col items-center justify-center py-2 ".concat("/dashboard"===e?"text-primary-600":"text-gray-500"),children:[(0,Wy.jsx)(Ej,{className:"w-5 h-5"}),(0,Wy.jsx)("span",{className:"text-xs mt-1",children:"Home"})]}),(0,Wy.jsxs)(yt,{to:"/dashboard/links",className:"flex flex-col items-center justify-center py-2 ".concat(e.includes("/dashboard/links")?"text-primary-600":"text-gray-500"),children:[(0,Wy.jsx)(Aj,{className:"w-5 h-5"}),(0,Wy.jsx)("span",{className:"text-xs mt-1",children:"Links"})]}),(0,Wy.jsxs)(yt,{to:"/dashboard/create",className:"flex flex-col items-center justify-center py-2",children:[(0,Wy.jsx)("div",{className:"w-12 h-12 bg-primary-600 rounded-full flex items-center justify-center -mt-5",children:(0,Wy.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,Wy.jsx)("span",{className:"text-xs mt-1 text-primary-600",children:"Create"})]}),(0,Wy.jsxs)(yt,{to:"/dashboard/transactions",className:"flex flex-col items-center justify-center py-2 ".concat(e.includes("/dashboard/transactions")?"text-primary-600":"text-gray-500"),children:[(0,Wy.jsx)(bj,{className:"w-5 h-5"}),(0,Wy.jsx)("span",{className:"text-xs mt-1",children:"Payments"})]}),(0,Wy.jsxs)(yt,{to:"/dashboard/payment-settings",className:"flex flex-col items-center justify-center py-2 ".concat(e.includes("/dashboard/payment-settings")?"text-primary-600":"text-gray-500"),children:[(0,Wy.jsx)(Hj,{className:"w-5 h-5"}),(0,Wy.jsx)("span",{className:"text-xs mt-1",children:"Settings"})]})]})}):null};const DF=function(){return(0,Wy.jsx)(pt,{children:(0,Wy.jsx)(Ky,{children:(0,Wy.jsxs)(Wy.Fragment,{children:[(0,Wy.jsx)(IF,{}),(0,Wy.jsxs)(Me,{children:[(0,Wy.jsx)(De,{path:"/",element:(0,Wy.jsx)(gE,{})}),(0,Wy.jsx)(De,{path:"/login",element:(0,Wy.jsx)(wE,{})}),(0,Wy.jsx)(De,{path:"/register",element:(0,Wy.jsx)(kE,{})}),(0,Wy.jsx)(De,{path:"/reset-password",element:(0,Wy.jsx)(NE,{})}),(0,Wy.jsx)(De,{path:"/verify-email",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(SE,{})})}),(0,Wy.jsx)(De,{path:"/pay/:slug",element:(0,Wy.jsx)(CF,{})}),(0,Wy.jsx)(De,{path:"/inactive",element:(0,Wy.jsx)(jF,{})}),(0,Wy.jsx)(De,{path:"/dashboard",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(EE,{})})}),(0,Wy.jsx)(De,{path:"/dashboard/links",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(nP,{})})}),(0,Wy.jsx)(De,{path:"/dashboard/create",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(AF,{children:(0,Wy.jsx)(aP,{})})})}),(0,Wy.jsx)(De,{path:"/dashboard/edit/:id",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(AF,{children:(0,Wy.jsx)(lP,{})})})}),(0,Wy.jsx)(De,{path:"/dashboard/transactions",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(yP,{})})}),(0,Wy.jsx)(De,{path:"/dashboard/customers",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(vP,{})})}),(0,Wy.jsx)(De,{path:"/dashboard/analytics/:id",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)($O,{})})}),(0,Wy.jsx)(De,{path:"/dashboard/payment-settings",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(AF,{children:(0,Wy.jsx)(JO,{})})})}),(0,Wy.jsx)(De,{path:"/dashboard/verification",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(ZO,{})})}),(0,Wy.jsx)(De,{path:"/admin",element:(0,Wy.jsx)(PF,{children:(0,Wy.jsx)(nF,{})})}),(0,Wy.jsx)(De,{path:"/dashboard/*",element:(0,Wy.jsx)(Ie,{to:"/dashboard",replace:!0})}),(0,Wy.jsx)(De,{path:"*",element:(0,Wy.jsx)(TF,{})})]})]})})})},RF=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:a}=t;n(e),r(e),i(e),s(e),a(e)})};r.createRoot(document.getElementById("root")).render((0,Wy.jsx)(t.StrictMode,{children:(0,Wy.jsx)(DF,{})})),RF()})()})();
//# sourceMappingURL=main.fa65ae74.js.map